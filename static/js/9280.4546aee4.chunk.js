"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[9280],{13448:(e,t,s)=>{s.d(t,{P:()=>l});var i=s(54480),n=(s(52867),s(66345)),a=s(14313);const l=(e,t)=>{const s={type:e,id:t,page:0,perPage:20};return async e=>{await(new a.A).post(n.CCh,s).then((t=>{const{responseData:s,responseCode:n}=t.data;if(200===n){const{notifications:t,count:n}=s;e({type:i.rmK,payload:{notifications:t,count:n}})}})).catch((e=>{}))}}},58224:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N,getNotifyLoad:()=>g});var i=s(9950),n=s(73878),a=s(74283),l=s(80409),o=s(98361),c=s(59051),r=s.n(c),d=s(42074),m=s(54810),h=s(52867),f=s(13448),x=s(44414);const g=e=>{var t={};return e&&e.length>0?(e.map((e=>{t[r()(new Date(1e3*e.message.time)).fromNow()]?t[r()(new Date(1e3*e.message.time)).fromNow()].includes(e.id)||t[r()(new Date(1e3*e.message.time)).fromNow()].push(e):t[r()(new Date(1e3*e.message.time)).fromNow()]=[e]})),t):t};class p extends i.Component{constructor(e){super(e),this.updateStatus=e=>{e.status,this.props.onNotificationToggle(),this.onRequest()},this.getUnreadNotifications=e=>{if(e&&Object.keys(e).length>0){const t=Object.entries(e).reduce(((e,t)=>{let[s,i]=t;const n=i.filter((e=>0==e.status));return n.length>0&&e.push([s,n]),e}),[]);return Object.fromEntries(t)}return{}},this.onRequest=()=>{const e=a.A.parse(window.location.search);if(e&&Object.keys(e).length>0||String(window.location.href).includes("assets")){const e=h.Zz?window:new BroadcastChannel("connect");h.Zz?window.opener.postMessage(JSON.stringify({type:"assets-redirect"})):e.postMessage(JSON.stringify({type:"assets-redirect"}))}},this.onClickNotification=()=>{},this.state={notifications:g(e.notificationList)}}componentWillReceiveProps(e){const{notificationList:t}=e;JSON.stringify(t)!=JSON.stringify(this.state.notifications)&&this.setState({notifications:g(t)})}render(){const{onNotificationToggle:e}=this.props,{notifications:t}=this.state,s=this.getUnreadNotifications(t);return(0,x.jsx)("div",{className:"w-100",children:(0,x.jsxs)(l.A.Container,{id:"notifications_tab_panel",defaultActiveKey:"all-notifications",children:[(0,x.jsxs)("div",{className:"f-between px-3 border-bottom",children:[(0,x.jsxs)(o.A,{variant:"underline",className:"nav",children:[(0,x.jsx)(o.A.Item,{className:"",children:(0,x.jsx)(o.A.Link,{className:"me-3 py-3 px-0 fw-medium",eventKey:"all-notifications",children:"All"})}),(0,x.jsx)(o.A.Item,{className:"",children:(0,x.jsx)(o.A.Link,{className:"px-0 py-3 fw-medium",eventKey:"unread-notifications",children:"Unread"})})]}),(0,x.jsx)("div",{children:Object.keys(s).length>0?(0,x.jsx)("button",{type:"button",className:"btn btn-link btn-sm px-0 h-auto fw-bold text-decoration-none btn-active-color-primary",onClick:()=>this.props.getAllNotification("markread",""),children:"Mark all as read"}):""})]}),(0,x.jsx)("div",{className:"overflow-auto",style:{height:380},children:t&&Object.keys(t).length>0?(0,x.jsxs)(l.A.Content,{children:[(0,x.jsx)(l.A.Pane,{eventKey:"all-notifications",className:"pb-3 min-h-100",children:t&&Object.keys(t).map(((s,n)=>(0,x.jsxs)(i.Fragment,{children:[(0,x.jsxs)("div",{className:"f-between px-3 py-1",children:[(0,x.jsx)("span",{className:"fw-bold",children:s}),(0,x.jsx)("span",{className:"bg-primary badge rounded-5 min-w-30 d-none",children:t[s]&&t[s].length>0?t[s].length:0})]}),t[s]&&t[s].length>0?(0,x.jsx)("div",{className:"",children:t[s].map((t=>(0,x.jsxs)(d.N_,{to:(0,h.cD)(t.url),className:"px-3 d-flex align-items-start border-bottom notification-item"+(0==t.status?" bg-gray-100":""),onClick:()=>{0==t.status&&this.props.getAllNotification("all",t.id),e()},children:[(0,x.jsx)("div",{className:"symbol symbol-38 rounded-1 overflow-hidden me-2 p-2",children:(0,x.jsx)("img",{alt:"Pic",src:t.message.photo,height:"40",width:"40",onError:e=>e.target.src=m.xb})}),(0,x.jsxs)("div",{className:"d-flex align-items-start flex-column flex-grow-1",children:[(0,x.jsxs)("div",{className:"d-flex algin-items-center justify-content-between w-100",children:[""!=t.message.subject?(0,x.jsx)("span",{className:"text-hover-primary text-gray-800 fw-bold me-2",children:t.message.subject}):null,(0,x.jsx)("span",{className:"text-gray-500 fs-9",children:r()(new Date(1e3*t.message.time)).format("hh:mma")})]}),(0,x.jsx)("div",{className:"d-flex algin-items-start",children:(0,x.jsx)("span",{className:"text-gray-600 fs-9",children:t.message.text})})]})]},t.id)))}):0==n?(0,x.jsx)("div",{className:"f-center",style:{height:350},children:(0,x.jsx)("p",{className:"mb-0 text-muted",children:"No Notifications"})}):null]},n)))}),(0,x.jsx)(l.A.Pane,{eventKey:"unread-notifications",className:"pb-3 min-h-100",children:s&&Object.keys(s).length>0?Object.keys(s).map(((t,n)=>(0,x.jsxs)(i.Fragment,{children:[(0,x.jsxs)("div",{className:"f-between px-3 py-1",children:[(0,x.jsx)("span",{className:"fw-bold",children:t}),(0,x.jsx)("span",{className:"bg-primary badge rounded-5 min-w-30 d-none",children:s[t]&&s[t].length>0&&s[t].filter((e=>0==e.status)).length>0?s[t].filter((e=>0==e.status)).length:0})]}),s[t]&&s[t].length>0?(0,x.jsx)("div",{className:"",children:s[t].map(((t,s)=>0==t.status?(0,x.jsxs)(d.N_,{to:t.getNotificationUrl?t.getNotificationUrl:"#",className:"px-3 d-flex align-items-start border-bottom notification-item text-decoration-none",onClick:()=>{0==t.status&&this.props.getAllNotification("all",t.id),e()},children:[(0,x.jsx)("div",{className:"symbol symbol-38 rounded-1 overflow-hidden me-2 p-2",children:(0,x.jsx)("img",{alt:"Pic",src:t.message.photo,height:"40",width:"40",onError:e=>e.target.src=m.xb})}),(0,x.jsxs)("div",{className:"d-flex align-items-start flex-column flex-grow-1",children:[(0,x.jsxs)("div",{className:"d-flex algin-items-center justify-content-between w-100",children:[""!=t.message.subject?(0,x.jsx)("span",{className:"text-hover-primary fw-bold text-decoration-none me-2",children:t.message.subject}):null,(0,x.jsx)("span",{className:"text-gray-500 fs-9",children:r()(new Date(1e3*t.message.time)).format("hh:mma")})]}),(0,x.jsx)("div",{className:"d-flex algin-items-start",children:(0,x.jsx)("span",{className:"text-gray-600 fs-9",children:t.message.text})})]})]},s):null))}):null]},n))):(0,x.jsx)("div",{className:"f-center",style:{height:350},children:(0,x.jsx)("p",{className:"mb-0 text-gray-500 fs-8",children:"No Unread Notifications"})})})]}):(0,x.jsx)("div",{className:"f-center",style:{height:150},children:(0,x.jsx)("p",{className:"mb-0 text-gray-500 fs-8",children:"No Notifications"})})})]})})}}const N=(0,n.Ng)((e=>({notificationList:e.notification.notificationList})),(e=>({getAllNotification:(t,s)=>e((0,f.P)(t,s))})))((0,i.memo)(p))},22063:(e,t,s)=>{s.d(t,{A:()=>n});const i=s(9950).createContext(null);i.displayName="CardHeaderContext";const n=i}}]);