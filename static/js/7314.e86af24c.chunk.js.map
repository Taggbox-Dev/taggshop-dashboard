{"version":3,"file":"static/js/7314.e86af24c.chunk.js","mappings":"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","sources":["actions/socketClient.js","app/Layout/Main/PricePlan/SignUpPricePlan.js"],"sourcesContent":["import io from 'socket.io-client';\nimport { SOCKET_CLIENT_URL } from './api';\n\nexport const SOCKET_CONNECTION = io(`${SOCKET_CLIENT_URL}`, {\n    transports: [\"websocket\"],\n    transport: [\"websocket\"],\n    upgrade: true\n})\n\nexport const emitEvent = (event, data) => {\n    SOCKET_CONNECTION.emit(event, data);\n};\n\nexport const onEvent = (event, func) => {\n    SOCKET_CONNECTION.on(event, func);\n};\n\n","import React, { Component } from 'react'\nimport { PLAN__DETAILS, UPDATE_PLAN__DETAILS } from '../../../../actions/planDetail';\nimport { TOAST_DISMISS, TOAST_LOADING, getCookieValue } from '../../../../utils';\nimport withRouter from '../../../routes/WithRouter';\nimport Cookies from 'universal-cookie';\nimport { connect } from 'react-redux';\nimport PlanView from './Elements/PlanView';\nimport { emitEvent, onEvent } from '../../../../actions/socketClient';\nimport { HOST_URL } from '../../../../actions/api';\nimport { createWall } from '../../../../actions/initActions';\nimport { SHOPIFY_PRODUCT_SYNC } from '../../../../actions/productAction';\nimport { getUserInfo } from '../../../../actions/loginActions';\n\nclass SignUpPricePlan extends Component {\n  state = { init: false, showFrePlan: false, shopifyLogin: localStorage.getItem('shopifyLogin'), loading: false, changePrice: true, showContactUs: false }\n\n  componentDidMount() {\n    this.props.PLAN__DETAILS(true);\n    this.setState({ shopifyLogin: localStorage.getItem('shopifyLogin') })\n    setTimeout(() => {\n      onEvent(`getPlanUpdated${this.props.authorized?.token?.user?.id != null ? this.props.authorized?.token?.user?.id : this.props.authorized?.userData?.user_data?.user.id ? this.props.authorized?.userData?.user_data?.user.id : localStorage.getItem('ownerId')}`, (data) => {\n        localStorage.removeItem(\"steps\")\n        window.location.href = `${HOST_URL}walls/home`\n      });\n    }, 1500);\n    window.fpr(\"referral\", { email: localStorage.getItem('emailId') })\n  }\n\n\n\n  SignUpPlanUpdate = async (planId) => {\n\n    const { authorized } = this.props;\n    this.setState({ loading: true });\n    const toastId = TOAST_LOADING();\n    const cookies = new Cookies();\n    try {\n      const response = await UPDATE_PLAN__DETAILS(planId);\n      if (response.data.response_code !== 200) throw new Error(\"Plan update failed\");\n\n      const userId = authorized?.token?.user?.id || authorized?.userData?.user_data?.user.id || localStorage.getItem('ownerId');\n      const createFromShopify = authorized?.userData?.user_data?.sessionData?.createFrom === 'shopify';\n\n      const processResponse = () => {\n        //await createWall(shopOnBio);\n        this.setState({ loading: false, init: true });\n        localStorage.removeItem('steps');\n        cookies.remove('shoponUrl');\n        setTimeout(() => {  \n          window.location.replace(`${HOST_URL}walls/home?id=tagshop`);\n        }, 100);\n      };\n\n      if (createFromShopify) {\n        //await createWall(null);\n        localStorage.removeItem('shopifyLogin');\n        localStorage.removeItem('steps');\n        setTimeout(() => {\n          SHOPIFY_PRODUCT_SYNC(localStorage.getItem('shopId'), () => {\n             this.props.getUserInfo(this.props.history,`${HOST_URL}init/index/shopify`)\n            //window.location.href = ``;\n          });\n        }, 100);\n      } else {\n        emitEvent('planUpdated', { id: userId, plan: \"\" });\n        const shopOnBio = getCookieValue('shoponUrl');\n        await processResponse(shopOnBio);\n      }\n      TOAST_DISMISS(toastId);\n    } catch (error) {\n      this.setState({ loading: false });\n      TOAST_DISMISS(toastId);\n    }\n  };\n\n\n  render() {\n    return <PlanView {...this.props} signUpPlan={true} loading={this.state.loading} SignUpPlanUpdate={this.SignUpPlanUpdate} />\n  }\n}\n\nconst mapStateToProps = state => { \n  return {\n    authorized: state.authorized,\n    priceDetail: state.planPriceDetail?.planPrice,\n  }\n}\nconst mapDispatchToProps = dispatch => {\n  return {\n    PLAN__DETAILS: (isSignup) => dispatch(PLAN__DETAILS(isSignup)),\n    getUserInfo: (navigation,link) =>dispatch(getUserInfo(navigation,link))\n    ,\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(SignUpPricePlan));"],"names":["SOCKET_CONNECTION","io","SOCKET_CLIENT_URL","transports","transport","upgrade","SignUpPricePlan","Component","constructor","arguments","state","init","showFrePlan","shopifyLogin","localStorage","getItem","loading","changePrice","showContactUs","SignUpPlanUpdate","async","authorized","this","props","setState","toastId","TOAST_LOADING","cookies","Cookies","_authorized$token","_authorized$token$use","_authorized$userData","_authorized$userData$","_authorized$userData2","_authorized$userData3","_authorized$userData4","UPDATE_PLAN__DETAILS","planId","data","response_code","Error","userId","token","user","id","userData","user_data","createFromShopify","sessionData","createFrom","processResponse","removeItem","remove","setTimeout","window","location","replace","HOST_URL","SHOPIFY_PRODUCT_SYNC","getUserInfo","history","event","plan","emit","shopOnBio","getCookieValue","TOAST_DISMISS","error","emitEvent","componentDidMount","PLAN__DETAILS","_this$props$authorize","_this$props$authorize2","_this$props$authorize3","_this$props$authorize4","_this$props$authorize5","_this$props$authorize6","_this$props$authorize7","_this$props$authorize8","_this$props$authorize9","_this$props$authorize10","_this$props$authorize11","_this$props$authorize12","func","href","on","fpr","email","render","_jsx","PlanView","signUpPlan","connect","_state$planPriceDetai","priceDetail","planPriceDetail","planPrice","dispatch","isSignup","navigation","link","withRouter"],"sourceRoot":""}