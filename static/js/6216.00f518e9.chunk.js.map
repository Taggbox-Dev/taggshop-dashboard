{"version":3,"file":"static/js/6216.00f518e9.chunk.js","mappings":"2NAQA,MAAMA,EAAa,IAAIC,gBACjBC,EAAU,IAAIC,iBAAiB,WA0CrC,EAzCqBC,KACjB,MAAMC,GAASC,EAAAA,EAAAA,KACTC,GAAWC,EAAAA,EAAAA,OACVC,EAAQC,IAAcC,EAAAA,EAAAA,WAAS,GAEhCC,EAAgBC,UAClB,IACI,MAAMC,EAAWC,KAAKC,MAAMC,EAAMC,OAC5B,KAAEC,GAASL,EACXM,EAAYC,aAAaC,QAAQ,aACjCC,EAAOF,aAAaC,QAAQ,mBAC9BL,EAAMO,OAAOC,SAAS,eAAiBR,EAAMO,OAAOC,SAAS,eAClD,kBAARF,GACKJ,SAAYO,EAAAA,EAAAA,IAAiBC,SAASP,GAAYD,GAAM,IAAMZ,GAASqB,EAAAA,EAAAA,IAA6BC,KAAKxB,EAAOyB,IAAIC,MAAM,KAAKC,KAAK,IAAKtB,KAGzJ,CAAE,MAAOuB,GAET,GAmBJ,OAhBAC,EAAAA,EAAAA,YAAU,KACN,MAAMC,EAASnC,EAAWmC,OAO1B,OANAC,OAAOC,iBAAiB,UAAWzB,EAAe,CAAEuB,WACpDjC,EAAQmC,iBAAiB,UAAWzB,GACpCL,GAASqB,EAAAA,EAAAA,IAA6BC,KAAKxB,EAAOyB,IAAIC,MAAM,KAAKC,KAAK,IAAKtB,IAC3EW,aAAaiB,QAAQ,UAAWT,KAAKxB,EAAOyB,IAAIC,MAAM,KAAKC,KAAK,KAChEX,aAAaiB,QAAQ,gBAAgB,GACrCjB,aAAaiB,QAAQ,eAAgBF,OAAOG,SAASC,SAASC,QAAQ,MAAO,KACtE,KACHL,OAAOM,oBAAoB,UAAW9B,EAAe,CAAEuB,WACvDjC,EAAQwC,oBAAoB,UAAW9B,GACvCZ,EAAW2C,QACXzC,EAAQ0C,OAAO,CAClB,GACF,IAEInC,GAAUoC,EAAAA,EAAAA,KAACC,EAAAA,EAAM,KAAKD,EAAAA,EAAAA,KAACE,EAAAA,EAAa,CAACC,WAAW,GAAO,C","sources":["app/Layout/Main/SocialAccount/ShareAccount.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport { TAGGSHOP_SOCIAL_ACCOUNT_DATA } from \"../../../../actions/sceneActions\";\nimport { addAccountFromId } from \"../../../../utils/addAccount\";\nimport { Loader } from \"../CommonComponents/Loader\";\nimport SocialAccount from \"./SocialAccount\";\n\nconst controller = new AbortController();\nconst channel = new BroadcastChannel('connect');\nconst ShareAccount = () => {\n    const params = useParams();\n    const dispatch = useDispatch();\n    const [loading,setLoading] = useState(true);\n\n    const handleMessage = async(event) => {\n        try {\n            const response = JSON.parse(event.data);\n            const { code } = response;\n            const networkId = localStorage.getItem('networkId');\n            const type = localStorage.getItem('connectionType');\n            if (event.origin.includes(\"tagshop.ai\") || event.origin.includes(\"localhost\")) {\n                if(type == 'connectAccount'){\n                    if (code) await addAccountFromId(parseInt(networkId), code, () => dispatch(TAGGSHOP_SOCIAL_ACCOUNT_DATA(atob(params.id).split(\"'\").join(''), setLoading)));\n                }\n            }\n        } catch (error) {\n            \n        }\n    };\n\n    useEffect(() => {\n        const signal = controller.signal;\n        window.addEventListener(\"message\", handleMessage, { signal });\n        channel.addEventListener(\"message\", handleMessage);\n        dispatch(TAGGSHOP_SOCIAL_ACCOUNT_DATA(atob(params.id).split(\"'\").join(''), setLoading))\n        localStorage.setItem('ownerId', atob(params.id).split(\"'\").join(''))\n        localStorage.setItem('shareAccount', true)\n        localStorage.setItem('url_redirect', window.location.pathname.replace('/v2', ''))\n        return () => {\n            window.removeEventListener(\"message\", handleMessage, { signal });\n            channel.removeEventListener(\"message\", handleMessage);\n            controller.abort();\n            channel.close();\n        }\n    }, [])\n\n    return loading ? <Loader/> : <SocialAccount isSharing={true}/>\n    \n}\n\nexport default ShareAccount"],"names":["controller","AbortController","channel","BroadcastChannel","ShareAccount","params","useParams","dispatch","useDispatch","loading","setLoading","useState","handleMessage","async","response","JSON","parse","event","data","code","networkId","localStorage","getItem","type","origin","includes","addAccountFromId","parseInt","TAGGSHOP_SOCIAL_ACCOUNT_DATA","atob","id","split","join","error","useEffect","signal","window","addEventListener","setItem","location","pathname","replace","removeEventListener","abort","close","_jsx","Loader","SocialAccount","isSharing"],"sourceRoot":""}