{"version":3,"file":"static/js/6216.00f518e9.chunk.js","mappings":"2NAQA,MAAMA,EAAa,IAAIC,gBACjBC,EAAU,IAAIC,iBAAiB,WA0CrC,EAzCqBC,KACjB,MAAMC,GAASC,EAAAA,EAAAA,KACTC,GAAWC,EAAAA,EAAAA,OACVC,EAAQC,IAAcC,EAAAA,EAAAA,WAAS,GAEhCC,EAAgBC,UAClB,IACI,MAAMC,EAAWC,KAAKC,MAAMC,EAAMC,OAC5B,KAAEC,GAASL,EACXM,EAAYC,aAAaC,QAAQ,aACjCC,EAAOF,aAAaC,QAAQ,mBAC9BL,EAAMO,OAAOC,SAAS,eAAiBR,EAAMO,OAAOC,SAAS,eAClD,kBAARF,GACKJ,SAAYO,EAAAA,EAAAA,IAAiBC,SAASP,GAAYD,GAAM,IAAMZ,GAASqB,EAAAA,EAAAA,IAA6BC,KAAKxB,EAAOyB,IAAIC,MAAM,KAAKC,KAAK,IAAKtB,KAGzJ,CAAE,MAAOuB,GAET,GAmBJ,OAhBAC,EAAAA,EAAAA,YAAU,KACN,MAAMC,EAASnC,EAAWmC,OAO1B,OANAC,OAAOC,iBAAiB,UAAWzB,EAAe,CAAEuB,WACpDjC,EAAQmC,iBAAiB,UAAWzB,GACpCL,GAASqB,EAAAA,EAAAA,IAA6BC,KAAKxB,EAAOyB,IAAIC,MAAM,KAAKC,KAAK,IAAKtB,IAC3EW,aAAaiB,QAAQ,UAAWT,KAAKxB,EAAOyB,IAAIC,MAAM,KAAKC,KAAK,KAChEX,aAAaiB,QAAQ,gBAAgB,GACrCjB,aAAaiB,QAAQ,eAAgBF,OAAOG,SAASC,SAASC,QAAQ,MAAO,KACtE,KACHL,OAAOM,oBAAoB,UAAW9B,EAAe,CAAEuB,WACvDjC,EAAQwC,oBAAoB,UAAW9B,GACvCZ,EAAW2C,QACXzC,EAAQ0C,OAAO,CAClB,GACF,IAEInC,GAAUoC,EAAAA,EAAAA,KAACC,EAAAA,EAAM,KAAKD,EAAAA,EAAAA,KAACE,EAAAA,EAAa,CAACC,WAAW,GAAO,C","sources":["app/Layout/Main/SocialAccount/ShareAccount.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { TAGGSHOP_SOCIAL_ACCOUNT_DATA } from \"../../../../actions/sceneActions\";\r\nimport { addAccountFromId } from \"../../../../utils/addAccount\";\r\nimport { Loader } from \"../CommonComponents/Loader\";\r\nimport SocialAccount from \"./SocialAccount\";\r\n\r\nconst controller = new AbortController();\r\nconst channel = new BroadcastChannel('connect');\r\nconst ShareAccount = () => {\r\n    const params = useParams();\r\n    const dispatch = useDispatch();\r\n    const [loading,setLoading] = useState(true);\r\n\r\n    const handleMessage = async(event) => {\r\n        try {\r\n            const response = JSON.parse(event.data);\r\n            const { code } = response;\r\n            const networkId = localStorage.getItem('networkId');\r\n            const type = localStorage.getItem('connectionType');\r\n            if (event.origin.includes(\"tagshop.ai\") || event.origin.includes(\"localhost\")) {\r\n                if(type == 'connectAccount'){\r\n                    if (code) await addAccountFromId(parseInt(networkId), code, () => dispatch(TAGGSHOP_SOCIAL_ACCOUNT_DATA(atob(params.id).split(\"'\").join(''), setLoading)));\r\n                }\r\n            }\r\n        } catch (error) {\r\n            \r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const signal = controller.signal;\r\n        window.addEventListener(\"message\", handleMessage, { signal });\r\n        channel.addEventListener(\"message\", handleMessage);\r\n        dispatch(TAGGSHOP_SOCIAL_ACCOUNT_DATA(atob(params.id).split(\"'\").join(''), setLoading))\r\n        localStorage.setItem('ownerId', atob(params.id).split(\"'\").join(''))\r\n        localStorage.setItem('shareAccount', true)\r\n        localStorage.setItem('url_redirect', window.location.pathname.replace('/v2', ''))\r\n        return () => {\r\n            window.removeEventListener(\"message\", handleMessage, { signal });\r\n            channel.removeEventListener(\"message\", handleMessage);\r\n            controller.abort();\r\n            channel.close();\r\n        }\r\n    }, [])\r\n\r\n    return loading ? <Loader/> : <SocialAccount isSharing={true}/>\r\n    \r\n}\r\n\r\nexport default ShareAccount"],"names":["controller","AbortController","channel","BroadcastChannel","ShareAccount","params","useParams","dispatch","useDispatch","loading","setLoading","useState","handleMessage","async","response","JSON","parse","event","data","code","networkId","localStorage","getItem","type","origin","includes","addAccountFromId","parseInt","TAGGSHOP_SOCIAL_ACCOUNT_DATA","atob","id","split","join","error","useEffect","signal","window","addEventListener","setItem","location","pathname","replace","removeEventListener","abort","close","_jsx","Loader","SocialAccount","isSharing"],"sourceRoot":""}