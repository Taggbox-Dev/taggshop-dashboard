"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[1590],{81590:(e,s,a)=>{a.r(s),a.d(s,{default:()=>g});var t=a(65043),o=a(97508),n=a(35475),r=(a(24287),a(18278),a(19646)),i=a(36380),c=(a(92908),a(22030)),l=a(64706),d=a(7352),h=a(70579);new BroadcastChannel("socialLogin");const m=new l.A;class p extends t.Component{constructor(e){super(e),this.state={accountEmail:null,accountPassword:null,emailError:null,passwordError:null,loginLoader:!1,loginSuccessError:null,memberRemember:!0},this.handleMessage=async e=>{console.log(e);const{error:s,code:a}=e.data;if((e.origin.includes("tagshop.ai")||e.origin.includes("localhost"))&&a)try{const{data:{access_token:e}}=await(0,d.A8)(a),{data:s}=await(0,d.I9)(e);var t=s.picture?s.picture:"";const o={accountFullName:s.name,accountEmailId:s.email,createFrom:"google",picture:t,authId:s.sub};this.socialLogin(o)}catch(s){}},this.updateMemberData=()=>{const{accountEmail:e,accountPassword:s}=this.state;m.set("member_login",e,{path:"/",expires:new Date(Date.now()+2592e3)}),m.set("member_password",s,{path:"/",expires:new Date(Date.now()+2592e3)})},this.readAuthentication=e=>{console.log("event",e);const s=JSON.parse(e.data);this.socialLogin(s)},this.emailTextChange=e=>{this.setState({accountEmail:e.target.value,emailError:null})},this.passwordTextChange=e=>{this.setState({accountPassword:e.target.value,passwordError:null})},this.showPass=e=>{var s=document.getElementById("AccountPassword");document.getElementById("show_password_icon").classList.toggle("view_pass"),"password"===s.type?s.type="text":s.type="password"},this.clickOnLogin=e=>{const{accountEmail:s,accountPassword:a,memberRemember:t}=this.state;var o=this;const{prefix:n}=this.props;this.setState({loginLoader:!0});localStorage.setItem("socialLogin",0),s&&String(s).length>0&&a&&String(a).length>0?(t&&this.updateMemberData(),(0,r.yM)().then((e=>{const{data:t}=e;this.props.loginUser({emailId:s,password:a,countryCode:t.country},"",o.props.history,o.callBackError)}))):(s&&0!=String(s).length||this.setState({emailError:!0}),a&&0!=String(a).length||this.setState({passwordError:!0}),this.setState({loginLoader:!1}))},this.socialLogin=e=>{var{accountFullName:s,accountEmailId:a,createFrom:t,picture:o,authId:n,activeProduct:i}=e;const{prefix:l,history:d}=this.props;var h=this,i="0";localStorage.setItem("socialLogin",1),l&&String(l).includes("widget")?i="6":l&&String(l).includes("display")&&(i="4"),(0,r.yM)().then((e=>{const{data:r}=e,l=(0,c.UM)("tracking_URL"),d=(0,c.UM)("landing_URL");this.props.userSignUp({fullName:s,emailId:a,password:"",trackingPage:l,landingPage:d,activeProduct:i,createFrom:t,picture:o,oauth_uid:n,countryCode:r&&r.country?r.country:"US",utm_source:"facebook"==t?"facebook_ads":t},h.props.history,(()=>{}))}))},this.onFormSubmit=e=>{e.preventDefault()},this.callBackError=e=>this.setState({loginSuccessError:e,loginLoader:!1}),this.controller=new AbortController}componentDidMount(){const e=this.controller.signal;window.addEventListener("message",this.handleMessage,{signal:e})}componentWillUnmount(){this.controller.abort()}render(){const{prefix:e}=this.props,{accountEmail:s,accountPassword:a,emailError:t,passwordError:o,loginLoader:r,loginSuccessError:c,memberRemember:l}=this.state;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"loginFormSec formControlMin",children:(0,h.jsx)("div",{className:"loginBlock",children:(0,h.jsxs)("div",{className:"loginInnSec",children:[(0,h.jsxs)("div",{className:"loginWithSocials",children:[(0,h.jsx)("div",{className:"loginHead",children:(0,h.jsx)("h2",{children:"Login to Tagshop"})}),(0,h.jsx)(i.e,{socialLogin:this.socialLogin})]}),c?(0,h.jsx)("div",{id:"flashFlushMessage",className:"alert alert-block alert-danger fade show in flashNotification",children:(0,h.jsxs)("p",{className:"mb-0",children:[c," "]})}):null,(0,h.jsxs)("form",{className:"contact_form mainLogin",onSubmit:this.onFormSubmit,children:[(0,h.jsxs)("div",{className:"form-group labelPosition emailSecion",children:[(0,h.jsx)("label",{htmlFor:"AccountEmail",children:"Email"}),(0,h.jsx)("input",{name:"data[Account][email]",className:"form-control ".concat(t?"form-error":""),type:"text",value:s,id:"AccountEmail","data-factors-input-id":"form-0.field-0","data-gtm-form-interact-field-id":"0",onChange:this.emailTextChange}),t?(0,h.jsx)("span",{className:"errorMessage",children:"Email is required."}):null]}),(0,h.jsxs)("div",{className:"form-group labelPosition passwordSecion",children:[(0,h.jsx)("label",{htmlFor:"AccountPassword",children:"Password"}),(0,h.jsxs)("div",{className:"password_wrap",children:[(0,h.jsx)("input",{name:"data[Account][password]",className:"form-control placeholder-no-fix ".concat(o?"form-error":""),type:"password",id:"AccountPassword","data-gtm-form-interact-field-id":"1",onChange:this.passwordTextChange,value:a}),(0,h.jsx)("button",{id:"show_password_icon",type:"button",className:"show_password_icon",onClick:this.showPass,"data-factors-form-bind":"true","data-factors-click-bind":"true",children:(0,h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"18",viewBox:"0 0 24 15",children:[(0,h.jsx)("path",{id:"Path_5232","data-name":"Path 5232",d:"M21.87,11.5c-.64-1.11-4.16-6.68-10.14-6.5C6.2,5.14,3,10,2.13,11.5a1,1,0,0,0,0,1c.63,1.09,4,6.5,9.89,6.5h.25c5.53-.14,8.74-5,9.6-6.5A1,1,0,0,0,21.87,11.5ZM12.22,17c-4.31.1-7.12-3.59-8-5,1-1.61,3.61-4.9,7.61-5,4.29-.11,7.11,3.59,8,5-1.03,1.61-3.61,4.9-7.61,5Z",transform:"translate(-1.996 -4.996)",fill:"#d9d9d9"}),(0,h.jsx)("path",{id:"blank_path","data-name":"Path 5233",d:"M12,8.5A3.5,3.5,0,1,0,15.5,12,3.5,3.5,0,0,0,12,8.5Zm0,5A1.5,1.5,0,1,1,13.5,12,1.5,1.5,0,0,1,12,13.5Z",transform:"translate(-1.996 -4.996)",fill:"#d9d9d9"}),(0,h.jsx)("path",{xmlns:"http://www.w3.org/2000/svg",id:"filled_path","data-name":"Path 5233",d:"M12,8.5A3.5,3.5,0,1,0,15.5,12,3.5,3.5,0,0,0,12,8.5Z",transform:"translate(-1.996 -4.996)",fill:"#545454"})]})})]}),o?(0,h.jsx)("span",{className:"errorMessage",children:"Password is required."}):null]}),(0,h.jsxs)("div",{className:"form-group remember_check",children:[(0,h.jsxs)("label",{className:"loggedinIco checkbox-squre",children:[(0,h.jsx)("input",{type:"checkbox",name:"data[Account][remember]",checked:l,onChange:e=>this.setState({memberRemember:e.target.checked})}),(0,h.jsx)("span",{}),"Remember me"]}),(0,h.jsx)(n.N_,{className:"pull-right",to:"".concat(e,"accounts/forgotpassword"),children:"Forgot Password?"})]}),(0,h.jsx)("div",{className:"form-group",children:(0,h.jsxs)("button",{type:"submit",className:"btn btn-primary w-100".concat(r?" disabled":""),onClick:this.clickOnLogin,children:[(0,h.jsx)("span",{className:"indicator-label",style:{display:r?"none":"block"},children:"Login"}),(0,h.jsxs)("span",{className:"indicator-progress",style:{display:r?"block":"none"},children:[" Please wait...",(0,h.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})}),(0,h.jsx)("div",{className:"form-group mb-0",children:(0,h.jsxs)("p",{children:["Don't have an account? ",(0,h.jsx)(n.N_,{className:"btnSignUp",to:"".concat(e,"accounts/register"),children:"Sign Up"})]})})]})]})})})})}}const g=(0,o.Ng)((e=>({})),(e=>({userSignUp:(s,a,t)=>e((0,r.Ei)(s,a,t)),loginUser:(s,a,t,o)=>e((0,r.Lx)(s,a,t,o))})))(p)},36380:(e,s,a)=>{a.d(s,{e:()=>c});a(65043);var t=a(24287),o=(a(92908),a(40854)),n=a.n(o),r=(a(25218),a(19646),a(34458)),i=(a(89652),a(70579));const c=e=>{let{socialLogin:s}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"loginSocials",children:[(0,i.jsx)("p",{className:"text-center",children:"Sign in with:"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:(0,i.jsxs)("button",{className:"ladda-button socialButtons connect-google",id:"googleplusSignIn",onClick:r.jf,children:[(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 256 262",preserveAspectRatio:"xMidYMid",children:[(0,i.jsx)("path",{d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027",fill:"#4285F4"}),(0,i.jsx)("path",{d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1",fill:"#34A853"}),(0,i.jsx)("path",{d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782",fill:"#FBBC05"}),(0,i.jsx)("path",{d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251",fill:"#EB4335"})]}),(0,i.jsx)("span",{children:"Google"})]})}),(0,i.jsx)("li",{children:(0,i.jsx)(t.Lp,{appId:"117029975354072",onResolve:e=>{let{provider:a,data:t}=e;console.log("{ provider, data }",{provider:a,data:t}),(e=>{const a=(0,r.fz)(e.accessToken),t="https://graph.facebook.com/me?fields=id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender&limit=100&access_token="+e.accessToken+"&appsecret_proof="+a;n().get(t).then((e=>{const{id:a,name:t,email:o,picture:n}=e.data,r={accountFullName:t,accountEmailId:o,createFrom:"facebook",picture:n.data.url,authId:a};s(r)}))})(t)},onReject:e=>{},children:(0,i.jsxs)("button",{className:"ladda-button socialButtons connect-facebook",id:"facbookSignIn",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",version:"1.1",width:"23",height:"23",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 167.657 167.657",style:{enableBackground:"new 0 0 167.657 167.657"},space:"preserve",children:(0,i.jsx)("g",{children:(0,i.jsx)("path",{style:{fill:"#1777F2"},d:"M83.829,0.349C37.532,0.349,0,37.881,0,84.178c0,41.523,30.222,75.911,69.848,82.57v-65.081H49.626   v-23.42h20.222V60.978c0-20.037,12.238-30.956,30.115-30.956c8.562,0,15.92,0.638,18.056,0.919v20.944l-12.399,0.006   c-9.72,0-11.594,4.618-11.594,11.397v14.947h23.193l-3.025,23.42H94.026v65.653c41.476-5.048,73.631-40.312,73.631-83.154   C167.657,37.881,130.125,0.349,83.829,0.349z"})})}),(0,i.jsx)("span",{children:"Facebook"})]})})})]}),(0,i.jsx)("h2",{children:(0,i.jsx)("span",{children:"or"})})]})})}}}]);
//# sourceMappingURL=1590.4262031d.chunk.js.map