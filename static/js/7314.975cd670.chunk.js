(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[7314],{25660:()=>{},28239:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>S});var s=t(65043),i=t(66472),a=t(22030),r=t(90166),l=t(5727),n=t(97508),d=t(59982),u=t(42503),p=t.n(u),c=t(92908);const h=p()(`${c._QT}`,{transports:["websocket"],transport:["websocket"],upgrade:!0});t(37217);var v=t(58281),g=t(47610),m=t(70579);class I extends s.Component{constructor(){super(...arguments),this.state={init:!1,showFrePlan:!1,shopifyLogin:localStorage.getItem("shopifyLogin"),loading:!1,changePrice:!0,showContactUs:!1},this.SignUpPlanUpdate=async e=>{const{authorized:o}=this.props;this.setState({loading:!0});const t=(0,a.HA)(),s=new l.A;try{var r,n,d,u,p,g,m;if(200!==(await(0,i.yL)(e)).data.response_code)throw new Error("Plan update failed");const l=(null===o||void 0===o||null===(r=o.token)||void 0===r||null===(n=r.user)||void 0===n?void 0:n.id)||(null===o||void 0===o||null===(d=o.userData)||void 0===d||null===(u=d.user_data)||void 0===u?void 0:u.user.id)||localStorage.getItem("ownerId"),f="shopify"===(null===o||void 0===o||null===(p=o.userData)||void 0===p||null===(g=p.user_data)||void 0===g||null===(m=g.sessionData)||void 0===m?void 0:m.createFrom),w=()=>{this.setState({loading:!1,init:!0}),localStorage.removeItem("steps"),s.remove("shoponUrl"),setTimeout((()=>{this.props.history("/home")}),100)};if(f)localStorage.removeItem("shopifyLogin"),localStorage.removeItem("steps"),setTimeout((()=>{(0,v.Tn)(localStorage.getItem("shopId"),(()=>{this.props.getUserInfo(this.props.history,`${c.btP}init/index/shopify`)}))}),100);else{I="planUpdated",S={id:l,plan:""},h.emit(I,S);const e=(0,a.UM)("shoponUrl");await w(e)}(0,a.b)(t)}catch(f){this.setState({loading:!1}),(0,a.b)(t)}var I,S}}componentDidMount(){this.props.PLAN__DETAILS(!0),this.setState({shopifyLogin:localStorage.getItem("shopifyLogin")}),setTimeout((()=>{var e,o,t,s,i,a,r,l,n,d,u,p,c,v;c=`getPlanUpdated${null!=(null===(e=this.props.authorized)||void 0===e||null===(o=e.token)||void 0===o||null===(t=o.user)||void 0===t?void 0:t.id)?null===(s=this.props.authorized)||void 0===s||null===(i=s.token)||void 0===i||null===(a=i.user)||void 0===a?void 0:a.id:null!==(r=this.props.authorized)&&void 0!==r&&null!==(l=r.userData)&&void 0!==l&&null!==(n=l.user_data)&&void 0!==n&&n.user.id?null===(d=this.props.authorized)||void 0===d||null===(u=d.userData)||void 0===u||null===(p=u.user_data)||void 0===p?void 0:p.user.id:localStorage.getItem("ownerId")}`,v=e=>{localStorage.removeItem("steps"),this.props.history("/home")},h.on(c,v)}),1500),window.fpr("referral",{email:localStorage.getItem("emailId")})}render(){return(0,m.jsx)(d.A,{...this.props,signUpPlan:!0,loading:this.state.loading,SignUpPlanUpdate:this.SignUpPlanUpdate})}}const S=(0,n.Ng)((e=>{var o;return{authorized:e.authorized,priceDetail:null===(o=e.planPriceDetail)||void 0===o?void 0:o.planPrice}}),(e=>({PLAN__DETAILS:o=>e((0,i.mT)(o)),getUserInfo:(o,t)=>e((0,g.ug)(o,t))})))((0,r.A)(I))},37217:(e,o,t)=>{"use strict";t.d(o,{nH:()=>n});t(40854);var s=t(89652),i=t(92908),a=t(79319),r=t(30064),l=t.n(r);t(22030);const n=(e,o,t)=>r=>{(new s.A).post(`${i.SZr}/${e}`).then((e=>{const{responseData:s,response_code:n,response_message:d,user:u}=e.data;var p,c;(null!==s&&void 0!==s&&s.promotor_key&&Object.keys(s.promotor_key).forEach((e=>{document.cookie=`${e}=${s.promotor_key[e]};`})),s.user&&Object.keys(s.user).length>0&&t(s.user.id),200==n)?(localStorage.setItem("steps","1"),r({type:a.C01,payload:s}),localStorage.setItem("token",s.token),null!==s&&void 0!==s&&null!==(p=s.user)&&void 0!==p&&p.emailId&&localStorage.setItem("emailId",null===s||void 0===s||null===(c=s.user)||void 0===c?void 0:c.emailId),o("/accounts/price")):201==n&&l().fire({title:d,icon:"success",showCancelButton:!1,showConfirmButton:!0,confirmButtonText:"Go to Home"}).then((e=>{localStorage.removeItem("steps"),window.location=i.C1b}))}))}}}]);
//# sourceMappingURL=7314.975cd670.chunk.js.map