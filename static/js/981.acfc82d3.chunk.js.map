{"version":3,"file":"static/js/981.acfc82d3.chunk.js","mappings":"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","sources":["app/components/website/themes/themePreview/src/app/Components/UserComponents/SubmitPic/submitButton.js"],"sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { submitPostData, showPopUP } from '../../../../../../../../../../actions/themeActions/themeActions';\r\nimport QRCode from \"react-qr-code\";\r\n\r\nconst IMG_PATH = `https://test.taggbox.com/commerce/img/onsite-upload/`\r\n\r\nconst validateEmail = (email) => {\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n}\r\n\r\nclass SubmitButton extends Component {\r\n    state = { isOpen: false, step: 1, wall_id: null, name: null, email: null, upload_image: [], receiveMail: false, tandc: true, nameError: false, emailError: false }\r\n    onShowCloseSubmitPicPopUp = event => {\r\n        const { appendData, wall } = this.props;\r\n        this.props.showPopUP({ type: 'submit-pic', card: {}, personalization: wall?.Personalization, ThemeRule: wall.ThemeRule, UserRule: wall.UserRule, wall: wall })\r\n    }\r\n    updateImageWithData = (data) => {\r\n        const { upload_image } = this.state;\r\n        if (upload_image && upload_image.length < 5) { upload_image.push(data); this.setState({ upload_image }) }\r\n    }\r\n\r\n    onUpdateImageAddCaption = (index) => event => {\r\n        const { upload_image } = this.state;\r\n        if (upload_image && upload_image.length > 0 && upload_image[index]) {\r\n            upload_image[index].caption = event.target.value;\r\n            upload_image[index].review = \"\";\r\n            upload_image[index].rating = 0;\r\n            this.setState({ upload_image })\r\n        }\r\n    }\r\n    onUpdateImageAddReview = (index) => event => {\r\n        const { upload_image } = this.state;\r\n        if (upload_image && upload_image.length > 0 && upload_image[index]) {\r\n            upload_image[index].review = event.target.value;\r\n            upload_image[index].caption = \"\";\r\n            this.setState({ upload_image })\r\n        }\r\n    }\r\n\r\n    onUpdateImageAddRatings = (rating, index) => {\r\n        const { upload_image } = this.state;\r\n        if (upload_image && upload_image.length > 0 && upload_image[index]) {\r\n            upload_image[index].caption = \"\";\r\n            upload_image[index].rating = rating;\r\n            this.setState({ upload_image })\r\n        }\r\n    }\r\n    onUpdateStep = (step) => event => { this.setState({ step }) }\r\n    onTextName = event => {\r\n        this.setState({ name: event.target.value, nameError: false }, () => {\r\n            if (this.state.name == null || this.state.name.length == 0) this.setState({ nameError: true })\r\n        })\r\n    }\r\n    onTextEmail = event => {\r\n        this.setState({ email: event.target.value, emailError: false }, () => {\r\n            if (this.state.email == null || this.state.email.length == 0 || !validateEmail(this.state.email) || this.state.email.includes(\"mailinator\")) this.setState({ emailError: true })\r\n        })\r\n    }\r\n    onSubmitData = event => {\r\n        const { name, email, upload_image, tandc, receiveMail } = this.state;\r\n        const { wallId } = this.props;\r\n        if (tandc && (name && name.length > 0) && (email && email.length > 0 && validateEmail(email) && !email.includes(\"mailinator\")) && (upload_image && upload_image.length > 0) && tandc) {\r\n            submitPostData({ wall_id: wallId, name, email, upload_image, receive_mail: receiveMail }).then((response) => {\r\n                this.setState({ step: 3 })\r\n            }).catch((error) => { console.error(error); });\r\n        }\r\n        else {\r\n            if (this.state.name == null || this.state.name.length == 0) this.setState({ nameError: true })\r\n            if (this.state.email == null || this.state.email.length == 0 || !validateEmail(this.state.email) || email.includes(\"mailinator\")) this.setState({ emailError: true })\r\n        }\r\n    }\r\n    onUpdatereceiveMail = event => { const { receiveMail } = this.state; this.setState({ receiveMail: !receiveMail }) }\r\n    //onUpdatereceiveMail = event =>this.setState({ receiveMail: !this.state.receiveMail })\r\n    onUpdatetandc = event => { const { tandc } = this.state; this.setState({ tandc: !tandc }) }\r\n    removeProductImage = (removeIndex) => event => {\r\n        const { upload_image } = this.state;\r\n        if (upload_image && upload_image.length > 0) {\r\n            upload_image.splice(removeIndex, 1);\r\n        }\r\n        this.setState({ upload_image })\r\n    }\r\n\r\n    render() {\r\n\r\n        const { isOpen, upload_image, step, name, email, receiveMail, tandc, nameError, emailError } = this.state;\r\n        const { wall , onsite_status} = this.props;\r\n        const onsite = wall.UgcSettings;\r\n        const onsiteButton = onsite_status ? { backgroundColor: onsite.onsite_btn_color, borderColor: onsite.onsite_btn_color, color: onsite.onsite_btn_txt_color } : '';\r\n        const fontCss = { fontSize: wall.UgcSettings.btn_fontSize + 'px', fontFamily: wall.UgcSettings.onsite_css_font_btn }\r\n\r\n        return <>\r\n            {onsite_status !== 0 ?\r\n                <div id=\"tb_post_submit_container_button\" className={wall?.Personalization?.commerceTheme != `50` ? `tb_post_submit_container` : `ts_gst__post_submit_container_button`}>\r\n                    {wall?.Personalization?.commerceTheme != `50` ?\r\n                        <div className=\"btn-scan\">\r\n                            <div style={onsiteButton} className=\"tb_post_submit_btn\" onClick={this.onShowCloseSubmitPicPopUp}>\r\n                                {wall.UgcSettings.onsite_qr_code_status == 1 ? \r\n                                    <div className='qr-image'>\r\n                                        <QRCode level=\"L\" size={60} value={wall.UgcSettings.onsite_popup_url} />\r\n                                    </div> : null\r\n                                 }\r\n                                {onsite.onsite_qr_code_btn_text ? <>\r\n                                    {wall.UgcSettings.onsite_qr_code_status == 1 ? <div className='ts__qr_separator'><div></div></div> : ''}\r\n                                          <div className={`ts_qr-text  tb-cTSfont-${wall.UgcSettings.onsite_font_varient_btn}`} style={fontCss}>\r\n                                             <div className={`ts_qr-text_wrap tb-cTSfont-${wall.UgcSettings.onsite_font_varient_btn}`} style={fontCss}>\r\n                                                {onsite_status ? onsite.onsite_qr_code_btn_text : onsite.onsite_qr_code_status ? onsite.onsite_qr_code_btn_text : onsite_status ? onsite.onsite_btn_txt : 'Submit a Post'}\r\n                                             </div>\r\n                                         </div> \r\n                                  </> : ''\r\n                                }\r\n                            </div>\r\n                        </div> :\r\n\r\n\r\n\r\n                        <div className=\"ts_gst_btn-scan\" style={onsiteButton}>\r\n                            <div className=\"ts_gst_post_submit_btn\" onClick={this.onShowCloseSubmitPicPopUp}>\r\n                                <div className='ts_gst_qr-image'>\r\n                                    {wall.UgcSettings.onsite_qr_code_status == `1` ? <QRCode level=\"L\" size={60} value={wall.UgcSettings.onsite_popup_url} /> : ''}\r\n                                    <div className={`ts_gst_qr-text  tb-cTSfont-${wall.UgcSettings.font_varient}`} style={fontCss}>\r\n                                        <div className={`ts_gst_qr-text_wrap ${wall.UgcSettings.onsite_qr_code_status == `1` ? \"wt_qrcode\" : \"wo_qrcode\"}`} >\r\n                                            {onsite.onsite_qr_code_status && onsite_status ? onsite.onsite_qr_code_btn_text : onsite.onsite_qr_code_status ? onsite.onsite_qr_code_btn_text : onsite_status ? onsite.onsite_btn_txt : 'Submit a Post'}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='ts_gst_qr-image_mobile'> Add Your Photo </div>\r\n                            </div>\r\n                        </div>}\r\n\r\n                </div> : ''}\r\n\r\n        </>\r\n    }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = dispatch => { \r\n    return { showPopUP: (data) => dispatch(showPopUP(data)), } \r\n}; \r\n\r\nconst mapStateToProps = state => { \r\n    return { \r\n        wallId: state.appData.wallID, \r\n        onsite_status: state.appData.onsite_status, \r\n    } \r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SubmitButton);"],"names":["validateEmail","email","test","String","toLowerCase","SubmitButton","state","isOpen","step","wall_id","name","upload_image","receiveMail","tandc","nameError","emailError","onShowCloseSubmitPicPopUp","event","props","wall","appendData","showPopUP","type","card","personalization","Personalization","ThemeRule","UserRule","updateImageWithData","data","length","push","setState","onUpdateImageAddCaption","index","caption","target","value","review","rating","onUpdateImageAddReview","onUpdateImageAddRatings","onUpdateStep","onTextName","onTextEmail","includes","onSubmitData","wallId","submitPostData","receive_mail","then","response","catch","error","console","onUpdatereceiveMail","onUpdatetandc","removeProductImage","removeIndex","splice","this","onsite_status","onsite","UgcSettings","onsiteButton","backgroundColor","onsite_btn_color","borderColor","color","onsite_btn_txt_color","fontCss","fontSize","btn_fontSize","fontFamily","onsite_css_font_btn","id","className","commerceTheme","style","onClick","onsite_qr_code_status","level","size","onsite_popup_url","onsite_qr_code_btn_text","onsite_font_varient_btn","onsite_btn_txt","font_varient","Component","connect","appData","wallID","dispatch"],"sourceRoot":""}