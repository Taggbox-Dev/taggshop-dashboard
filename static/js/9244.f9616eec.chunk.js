"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[9244],{59244:(e,s,t)=>{t.r(s),t.d(s,{default:()=>O});var a=t(9950),n=t(28429),r=t(56463),l=t(40143),o=t(66345),c=t(28981),i=t(18633),h=t(47039),d=t(16522),m=t(85731),p=t(89379),x=t(73878),g=t(41181),w=t(44414);const j=new g.A;const u=e=>{let{history:s,isInstall:t}=e;const r=(()=>{const e=(0,n.zy)(),s=new URLSearchParams(e.search);return{app_load_id:s.get("app_load_id"),code:s.get("code"),embedded:s.get("embedded"),hmac:s.get("hmac"),host:s.get("host"),id_token:s.get("id_token"),link_source:s.get("link_source"),locale:s.get("locale"),session:s.get("session"),shop:s.get("shop"),timestamp:s.get("timestamp")}})(),l=(o=r,Object.fromEntries(Object.entries(o).filter((e=>{let[s,t]=e;return null!==t&&void 0!==t}))));var o;const h=(0,x.wA)();return(0,a.useEffect)((()=>{console.log(j.get("syncShopify"),"syncShopify"),t?l.embedded?h((0,c.AZ)((0,p.A)((0,p.A)({},l),{},{guestUseShopify:"guest",ownerId:localStorage.getItem("ownerId")}),s)):(console.log(r,"paramsparamsparamsparamsparams-555555",l),(0,c.cW)(l.shop)):h((0,c.AZ)((0,p.A)((0,p.A)({},l),{},{guestUseShopify:"guest",ownerId:localStorage.getItem("ownerId")}),s))}),[]),(0,w.jsxs)("div",{className:"h-100vh w-100 f-center",children:[(0,w.jsx)(i.a,{}),"Test taggshop"]})};var b=t(7751),f=t(7103),y=t(17595),S=t(97937),k=t(52867),P=t(9638),v=t(77314),q=t(54810);class N extends a.Component{constructor(e){super(e),this.state={pwd:"",showPass:!1,pwdError:!1,strength:0,isRequesting:!1,rePwd:"",showRePass:!1},this.checkPassStrength=e=>{const s=e.target.value,{strength:t}=(0,k.Oj)(s);this.setState({pwd:s,strength:t,pwdError:!1})},this.onPasswordReTextChange=e=>{this.setState({rePwd:e.target.value},(()=>{this.state.pwd!=this.state.rePwd?this.setState({rePwdError:!0}):this.setState({rePwdError:!1})}))},this.onSetPwd=e=>{const{pwd:s,rePwd:t,pwdError:a,rePwdError:n,strength:r}=this.state;if(4==r){s&&String(s).length>=8&&t&&String(t).length==String(s).length&&!a&&!n?(this.setState({isRequesting:!0}),(0,c.wM)({userId:localStorage.getItem("ownerId"),token:localStorage.getItem("token"),password:s}).then((e=>{this.setState({isRequesting:!1}),this.props.history("/accounts/otherinfo")})).catch((()=>{this.setState({isRequesting:!1}),(0,k.r$)("Some Error occured, please try again later.")}))):!s||String(s).length<8?this.setState({pwdError:!0}):s!=t&&this.setState({rePwdError:!0})}else this.setState({pwdError:!0})}}render(){const{pwdError:e,showPass:s,strength:t,pwd:a,isRequesting:n,rePwd:r,rePwdError:l,showRePass:o}=this.state;return(0,w.jsx)("div",{className:"w-100 mb-lg-0 mb-3",children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"text-start mb-5",children:[(0,w.jsx)("h1",{className:"mb-0 display-2 fw-bold mb-3",children:"Set Password"}),(0,w.jsx)("div",{className:"text-gray-500 fs-8",children:"Create a new password for accessing the platform."})]}),(0,w.jsxs)("div",{className:"mb-8",children:[(0,w.jsxs)(y.A.Group,{className:"mb-4 mb-xl-5",children:[(0,w.jsx)(y.A.Label,{className:"fw-bold ",htmlFor:"password_",children:"Password"}),(0,w.jsxs)("div",{className:"position-relative d-block mb-1 ".concat(e?"is-invalid mb-1":""),children:[(0,w.jsx)(y.A.Control,{type:s?"text":"password",placeholder:"Password",id:"password_",size:"lg",maxLength:"24",onChange:this.checkPassStrength,value:a}),(0,w.jsx)("span",{className:"view_pass fs-6 btn btn-icon bg-transparent border-0 text-gray-500 position-absolute translate-middle top-50",onClick:e=>this.setState({showPass:!s}),children:(0,w.jsx)(q.gc,{icon:s?"eye":"eye-slash"})})]}),e?(0,w.jsx)("span",{className:"invalid-feedback mb-1",children:"Enter valid password."}):null,(0,w.jsx)("span",{className:e?"text-danger":"text-muted",children:"Use 8 or more characters with a mix of letters, numbers & symbols."})]}),(0,w.jsx)(v.A,{strength:t}),(0,w.jsx)("div",{className:"fv-row mb-3 pt-1",children:(0,w.jsxs)(y.A.Group,{className:"mb-4 mb-xl-5",children:[(0,w.jsx)(y.A.Label,{className:"fw-bold ",htmlFor:"re-password_",children:"Confirm Password"}),(0,w.jsxs)("span",{className:"position-relative d-block mb-2  ".concat(l?"is-invalid":""," "),children:[(0,w.jsx)(y.A.Control,{type:o?"text":"password",id:"re-password_",size:"lg",placeholder:"Repeat Password",minLength:"8",maxLength:"24",onChange:this.onPasswordReTextChange,value:r||""}),(0,w.jsx)("span",{className:"view_pass fs-6 btn btn-icon bg-transparent border-0 text-gray-500 position-absolute translate-middle top-50",onClick:()=>this.setState({showRePass:!o}),children:(0,w.jsx)(q.gc,{icon:o?"eye":"eye-slash"})})]}),l?(0,w.jsx)("div",{className:"invalid-feedback",children:"Password does not match"}):null]})})]}),(0,w.jsx)("div",{className:"d-grid mb-4 w-100",children:(0,w.jsxs)(S.A,{variant:"primary",size:"lg",type:"submit",className:"".concat(n?" disabled":""),onClick:()=>this.onSetPwd(),children:[(0,w.jsx)("span",{className:"indicator-label",style:{display:n?"none":"block"},children:"Get Started!"}),(0,w.jsxs)("span",{className:"indicator-progress",style:{display:n?"block":"none"},children:[" Please wait...",(0,w.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})}),(0,w.jsx)(P.A,{})]})})}}const A=N,_=a.lazy((()=>t.e(3887).then(t.bind(t,73887)))),E=a.lazy((()=>t.e(7562).then(t.bind(t,57562)))),R=a.lazy((()=>t.e(7996).then(t.bind(t,67996)))),I=a.lazy((()=>Promise.all([t.e(6957),t.e(899)]).then(t.bind(t,60899)))),C=a.lazy((()=>Promise.all([t.e(8894),t.e(6447)]).then(t.bind(t,76447)))),z=a.lazy((()=>t.e(1978).then(t.bind(t,61978)))),L=a.lazy((()=>Promise.all([t.e(3035),t.e(5312)]).then(t.bind(t,46615)))),U=e=>{const s=(0,n.g)();return(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(R,{prefix:e.prefix,params:s})})},T=e=>{const s=(0,n.zy)(),t=new URLSearchParams(s.search).get("token"),a=new URLSearchParams(s.search).get("callback");return t&&(localStorage.setItem("token",t),window.location.href=a),(0,w.jsx)("div",{className:"h-100vh w-100 f-center",children:(0,w.jsx)(i.a,{})})},G=e=>{localStorage.clear();const s=(0,n.g)();return window.location.href.includes("admin")?localStorage.setItem("isAdmin",1):localStorage.setItem("isAdmin",0),s.token&&(localStorage.setItem("token",atob(s.token)),window.location.href="".concat(o.btP,"home")),(0,w.jsx)("div",{className:"h-100vh w-100 f-center",children:(0,w.jsx)(i.a,{})})},B=e=>{let{history:s}=e;const t=(0,n.zy)(),r=new URLSearchParams(t.search).get("code"),l=new URLSearchParams(t.search).get("account_uuid"),o=new URLSearchParams(t.search).get("context"),h=new URLSearchParams(t.search).get("scope");return(0,a.useEffect)((()=>{(0,c.bG)({code:r,account_uuid:l,context:o,scope:h},s)}),[]),(0,w.jsx)("div",{className:"h-100vh w-100 f-center",children:(0,w.jsx)(i.a,{})})},F=()=>{const e=(0,n.zy)(),s=new URLSearchParams(e.search).get("signed_payload"),t=new URLSearchParams(e.search).get("signed_payload_jwt");return(0,a.useEffect)((()=>{(0,c.HN)({signed_payload:s,signed_payload_jwt:t})}),[]),(0,w.jsx)("div",{className:"h-100vh w-100 f-center",children:(0,w.jsx)(i.a,{})})};function O(e){const s=(0,n.Zp)();return(0,a.useEffect)((()=>{localStorage.getItem("token")||window.location.pathname.includes("/accounts")||window.location.pathname.includes("/connection")||window.location.pathname.includes("/bigcommerce")||window.location.pathname.includes("/Shopify")||window.location.pathname.includes("/autologin")||window.location.pathname.includes("/redirectlogin")||window.location.pathname.includes("/ugc_right")||window.location.pathname.includes("/feeds/authCallback")||window.location.pathname.includes("/collaborator/request")||s("/")}),[]),(0,w.jsxs)(l.A,{children:[(0,w.jsx)(h.A,{}),(0,w.jsxs)(n.BV,{children:[(0,w.jsx)(n.qh,{exact:!0,path:"/autologin",element:(0,w.jsx)(T,{history:e.history})}),(0,w.jsx)(n.qh,{exact:!0,path:"/redirectlogin/:token/:isAdmin",element:(0,w.jsx)(G,{})}),(0,w.jsx)(n.qh,{exact:!0,path:"/redirectlogin/:token",element:(0,w.jsx)(G,{})}),(0,w.jsx)(n.qh,{exact:!0,path:"/",element:(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(z,{children:(0,w.jsx)(_,{prefix:"/",history:s})})})}),(0,w.jsx)(n.qh,{exact:!0,path:"/accounts/login",element:(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(z,{children:(0,w.jsx)(_,{prefix:"/",history:s})})})}),(0,w.jsx)(n.qh,{exact:!0,path:"/accounts/forgotpassword",element:(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(z,{children:(0,w.jsx)(E,{prefix:"/",activeProduct:"0"})})})}),(0,w.jsx)(n.qh,{exact:!0,path:"/accounts/temp-pwd",element:(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(z,{children:(0,w.jsx)(A,{prefix:"/",activeProduct:"0",history:s})})})}),(0,w.jsx)(n.qh,{exact:!0,path:"/accounts/resetpassword/:userId/:token",element:(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(z,{children:(0,w.jsx)(U,{prefix:"/"})})})}),(0,w.jsx)(n.qh,{exact:!0,path:"/accounts/otherinfo",element:(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(z,{children:(0,w.jsx)(I,{prefix:"/",addEmail:!1,history:e.history,getBack:e.getBack})})})}),(0,w.jsx)(n.qh,{exact:!0,path:"/accounts/extemail",element:(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(z,{children:(0,w.jsx)(I,{addEmail:!0,prefix:"/",history:e.history})})})}),(0,w.jsx)(n.qh,{exact:!0,path:"/accounts/price",element:(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(C,{history:e.history})})}),(0,w.jsx)(n.qh,{exact:!0,path:"/feeds/authCallback",element:(0,w.jsx)(d.A,{})}),(0,w.jsx)(n.qh,{exact:!0,path:"/accounts/paymentPaidCallback",element:(0,w.jsx)(r.A,{})}),(0,w.jsx)(n.qh,{exact:!0,path:"/ugc_right/:id",element:(0,w.jsx)(m.A,{})}),(0,w.jsx)(n.qh,{path:"/Shopify/token",element:(0,w.jsx)(u,{history:s,isInstall:!1})}),(0,w.jsx)(n.qh,{path:"/Shopify/install",element:(0,w.jsx)(u,{history:s,isInstall:!0})}),(0,w.jsx)(n.qh,{path:"/bigcommerce/oauth",element:(0,w.jsx)(B,{history:s})}),(0,w.jsx)(n.qh,{path:"/bigcommerce/load",element:(0,w.jsx)(F,{})}),(0,w.jsx)(n.qh,{exact:!0,path:"/connection/:id",element:(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(L,{})})}),(0,w.jsx)(n.qh,{path:"*",element:(0,w.jsx)(n.C5,{to:"/accounts/login"})}),(0,w.jsx)(n.qh,{exact:!0,path:"/accounts/shopifypaymentcomplete",element:(0,w.jsx)(b.A,{})}),(0,w.jsx)(n.qh,{path:"/collaborator/request/:ownerToken/:collaboratorToken",element:(0,w.jsx)(z,{children:(0,w.jsx)(f.A,{history:s})})})]})]})}}}]);