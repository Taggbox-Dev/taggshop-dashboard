/*! For license information please see 1122.c93e2529.chunk.js.LICENSE.txt */
(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[1122],{20138:function(e){e.exports=function(e){if("number"!==typeof e||isNaN(e))throw new TypeError("Expected a number, got ".concat(typeof e));var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return"".concat((t?"-":"")+e," B");var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,r));var i=n[r];return e>=10||e%1===0?"".concat((t?"-":"")+e.toFixed(0)," ").concat(i):"".concat((t?"-":"")+e.toFixed(1)," ").concat(i)}},62410:function(e){e.exports=function(e){if("number"!==typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,r));var i=n[r];return e>=10||e%1===0?(t?"-":"")+e.toFixed(0)+" "+i:(t?"-":"")+e.toFixed(1)+" "+i}},20548:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],p=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(l=1,u=new Array(p-1);l<p;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),p){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,i);break;default:if(!u)for(h=1,u=new Array(p-1);h<p;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},89400:function(e){e.exports=function(e,t){if(e===t)return!0;for(var n in e)if(!(n in t))return!1;for(var n in t)if(e[n]!==t[n])return!1;return!0}},80936:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),p=Object.prototype.toString,h=Math.max,d=Math.min,f=function(){return c.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,u,l=0,c=!1,p=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function b(e){return l=e,s=setTimeout(k,t),c?g(e):a}function w(e){var n=e-u;return void 0===u||n>=t||n<0||p&&e-l>=o}function k(){var e=f();if(w(e))return _(e);s=setTimeout(k,function(e){var n=t-(e-u);return p?d(n,o-(e-l)):n}(e))}function _(e){return s=void 0,m&&r?g(e):(r=i=void 0,a)}function P(){var e=f(),n=w(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return b(u);if(p)return s=setTimeout(k,t),g(u)}return void 0===s&&(s=setTimeout(k,t)),a}return t=y(t)||0,v(n)&&(c=!!n.leading,o=(p="maxWait"in n)?h(y(n.maxWait)||0,t):o,m="trailing"in n?!!n.trailing:m),P.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},P.flush=function(){return void 0===s?a:_(f())},P}},82061:function(e,t,n){var r="Expected a function",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,p=l||c||Function("return this")(),h=Object.prototype.toString,d=Math.max,f=Math.min,v=function(){return p.Date.now()};function y(e,t,n){var i,o,a,s,u,l,c=0,p=!1,h=!1,y=!0;if("function"!=typeof e)throw new TypeError(r);function b(t){var n=i,r=o;return i=o=void 0,c=t,s=e.apply(r,n)}function w(e){return c=e,u=setTimeout(_,t),p?b(e):s}function k(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=a}function _(){var e=v();if(k(e))return P(e);u=setTimeout(_,function(e){var n=t-(e-l);return h?f(n,a-(e-c)):n}(e))}function P(e){return u=void 0,y&&i?b(e):(i=o=void 0,s)}function Z(){var e=v(),n=k(e);if(i=arguments,o=this,l=e,n){if(void 0===u)return w(l);if(h)return u=setTimeout(_,t),b(l)}return void 0===u&&(u=setTimeout(_,t)),s}return t=g(t)||0,m(n)&&(p=!!n.leading,a=(h="maxWait"in n)?d(g(n.maxWait)||0,t):a,y="trailing"in n?!!n.trailing:y),Z.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=o=u=void 0},Z.flush=function(){return void 0===u?s:P(v())},Z}function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=a.test(e);return n||s.test(e)?u(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return m(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),y(e,t,{leading:i,maxWait:t,trailing:o})}},16912:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function i(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(i=e[n],o=t[n],!(i===o||r(i)&&r(o)))return!1;var i,o;return!0}function o(e,t){void 0===t&&(t=i);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var o=e.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}},1784:function(e,t,n){var r=n(72973),i=/[\/\+\.]/;e.exports=function(e,t){function n(t){var n=r(t,e,i);return n&&n.length>=2}return t?n(t.split(";")[0]):n}},64281:function(e){e.exports=function(){var e={},t=e._fns={};return e.emit=function(e,n,r,i,o,a,s){var u=function(e){var n=t[e]?t[e]:[],r=e.indexOf(":"),i=-1===r?[e]:[e.substring(0,r),e.substring(r+1)],o=Object.keys(t),a=0,s=o.length;for(;a<s;a++){var u=o[a];if("*"===u&&(n=n.concat(t[u])),2===i.length&&i[0]===u){n=n.concat(t[u]);break}}return n}(e);u.length&&function(e,t,n){var r=0,i=t.length;for(;r<i&&t[r];r++)t[r].event=e,t[r].apply(t[r],n)}(e,u,[n,r,i,o,a,s])},e.on=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.once=function(t,n){this.on(t,(function r(){n.apply(this,arguments),e.off(t,r)}))},e.off=function(e,t){var n=[];if(e&&t)for(var r=this._fns[e],i=0,o=r?r.length:0;i<o;i++)r[i]!==t&&n.push(r[i]);n.length?this._fns[e]=n:delete this._fns[e]},e}},73856:function(e,t,n){"use strict";n.d(t,{HY:function(){return g},Tm:function(){return M},Vf:function(){return m},YM:function(){return i},bR:function(){return C},h:function(){return v},sY:function(){return L},wA:function(){return b}});var r,i,o,a,s,u,l,c={},p=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function d(e,t){for(var n in t)e[n]=t[n];return e}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n){var i,o,a,s={};for(a in t)"key"==a?i=t[a]:"ref"==a?o=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return y(e,s,i,o,null)}function y(e,t,n,r,a){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==a?++o:a};return null==a&&null!=i.vnode&&i.vnode(s),s}function m(){return{current:null}}function g(e){return e.children}function b(e,t){this.props=e,this.context=t}function w(e,t){if(null==t)return e.__?w(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?w(e):null}function k(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return k(e)}}function _(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!P.__r++||s!==i.debounceRendering)&&((s=i.debounceRendering)||u)(P)}function P(){var e,t,n,r,i,o,s,u;for(a.sort(l);e=a.shift();)e.__d&&(t=a.length,r=void 0,i=void 0,s=(o=(n=e).__v).__e,(u=n.__P)&&(r=[],(i=d({},o)).__v=o.__v+1,U(u,o,i,n.__n,void 0!==u.ownerSVGElement,null!=o.__h?[s]:null,r,null==s?w(o):s,o.__h),R(r,o),o.__e!=s&&k(o)),a.length>t&&a.sort(l));P.__r=0}function Z(e,t,n,r,i,o,a,s,u,l){var h,d,f,v,m,b,k,_=r&&r.__k||p,P=_.length;for(n.__k=[],h=0;h<t.length;h++)if(null!=(v=n.__k[h]=null==(v=t[h])||"boolean"==typeof v||"function"==typeof v?null:"string"==typeof v||"number"==typeof v||"bigint"==typeof v?y(null,v,null,null,v):Array.isArray(v)?y(g,{children:v},null,null,null):v.__b>0?y(v.type,v.props,v.key,v.ref?v.ref:null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(f=_[h])||f&&v.key==f.key&&v.type===f.type)_[h]=void 0;else for(d=0;d<P;d++){if((f=_[d])&&v.key==f.key&&v.type===f.type){_[d]=void 0;break}f=null}U(e,v,f=f||c,i,o,a,s,u,l),m=v.__e,(d=v.ref)&&f.ref!=d&&(k||(k=[]),f.ref&&k.push(f.ref,null,v),k.push(d,v.__c||m,v)),null!=m?(null==b&&(b=m),"function"==typeof v.type&&v.__k===f.__k?v.__d=u=S(v,u,e):u=F(e,v,f,_,m,u),"function"==typeof n.type&&(n.__d=u)):u&&f.__e==u&&u.parentNode!=e&&(u=w(f))}for(n.__e=b,h=P;h--;)null!=_[h]&&("function"==typeof n.type&&null!=_[h].__e&&_[h].__e==n.__d&&(n.__d=x(r).nextSibling),I(_[h],_[h]));if(k)for(h=0;h<k.length;h++)N(k[h],k[++h],k[++h])}function S(e,t,n){for(var r,i=e.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=e,t="function"==typeof r.type?S(r,t,n):F(n,r,r,i,r.__e,t));return t}function C(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){C(e,t)})):t.push(e)),t}function F(e,t,n,r,i,o){var a,s,u;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||i!=o||null==i.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(i),a=null;else{for(s=o,u=0;(s=s.nextSibling)&&u<r.length;u+=1)if(s==i)break e;e.insertBefore(i,o),a=o}return void 0!==a?a:i.nextSibling}function x(e){var t,n,r;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(r=x(n)))return r;return null}function O(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||h.test(t)?n:n+"px"}function E(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||O(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||O(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?A:T,o):e.removeEventListener(t,o?A:T,o);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function T(e){return this.l[e.type+!1](i.event?i.event(e):e)}function A(e){return this.l[e.type+!0](i.event?i.event(e):e)}function U(e,t,n,r,o,a,s,u,l){var c,p,h,f,v,y,m,w,k,_,P,S,C,F,x,O=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,u=t.__e=n.__e,t.__h=null,a=[u]),(c=i.__b)&&c(t);try{e:if("function"==typeof O){if(w=t.props,k=(c=O.contextType)&&r[c.__c],_=c?k?k.props.value:c.__:r,n.__c?m=(p=t.__c=n.__c).__=p.__E:("prototype"in O&&O.prototype.render?t.__c=p=new O(w,_):(t.__c=p=new b(w,_),p.constructor=O,p.render=B),k&&k.sub(p),p.props=w,p.state||(p.state={}),p.context=_,p.__n=r,h=p.__d=!0,p.__h=[],p._sb=[]),null==p.__s&&(p.__s=p.state),null!=O.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=d({},p.__s)),d(p.__s,O.getDerivedStateFromProps(w,p.__s))),f=p.props,v=p.state,p.__v=t,h)null==O.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==O.getDerivedStateFromProps&&w!==f&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(w,_),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(w,p.__s,_)||t.__v===n.__v){for(t.__v!==n.__v&&(p.props=w,p.state=p.__s,p.__d=!1),p.__e=!1,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),P=0;P<p._sb.length;P++)p.__h.push(p._sb[P]);p._sb=[],p.__h.length&&s.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(w,p.__s,_),null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(f,v,y)}))}if(p.context=_,p.props=w,p.__P=e,S=i.__r,C=0,"prototype"in O&&O.prototype.render){for(p.state=p.__s,p.__d=!1,S&&S(t),c=p.render(p.props,p.state,p.context),F=0;F<p._sb.length;F++)p.__h.push(p._sb[F]);p._sb=[]}else do{p.__d=!1,S&&S(t),c=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++C<25);p.state=p.__s,null!=p.getChildContext&&(r=d(d({},r),p.getChildContext())),h||null==p.getSnapshotBeforeUpdate||(y=p.getSnapshotBeforeUpdate(f,v)),x=null!=c&&c.type===g&&null==c.key?c.props.children:c,Z(e,Array.isArray(x)?x:[x],t,n,r,o,a,s,u,l),p.base=t.__e,t.__h=null,p.__h.length&&s.push(p),m&&(p.__E=p.__=null),p.__e=!1}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=D(n.__e,t,n,r,o,a,s,l);(c=i.diffed)&&c(t)}catch(e){t.__v=null,(l||null!=a)&&(t.__e=u,t.__h=!!l,a[a.indexOf(u)]=null),i.__e(e,t,n)}}function R(e,t){i.__c&&i.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){i.__e(e,t.__v)}}))}function D(e,t,n,i,o,a,s,u){var l,p,h,d=n.props,v=t.props,y=t.type,m=0;if("svg"===y&&(o=!0),null!=a)for(;m<a.length;m++)if((l=a[m])&&"setAttribute"in l==!!y&&(y?l.localName===y:3===l.nodeType)){e=l,a[m]=null;break}if(null==e){if(null===y)return document.createTextNode(v);e=o?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,v.is&&v),a=null,u=!1}if(null===y)d===v||u&&e.data===v||(e.data=v);else{if(a=a&&r.call(e.childNodes),p=(d=n.props||c).dangerouslySetInnerHTML,h=v.dangerouslySetInnerHTML,!u){if(null!=a)for(d={},m=0;m<e.attributes.length;m++)d[e.attributes[m].name]=e.attributes[m].value;(h||p)&&(h&&(p&&h.__html==p.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(function(e,t,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in t||E(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||E(e,o,t[o],n[o],r)}(e,v,d,o,u),h)t.__k=[];else if(m=t.props.children,Z(e,Array.isArray(m)?m:[m],t,n,i,o&&"foreignObject"!==y,a,s,a?a[0]:n.__k&&w(n,0),u),null!=a)for(m=a.length;m--;)null!=a[m]&&f(a[m]);u||("value"in v&&void 0!==(m=v.value)&&(m!==e.value||"progress"===y&&!m||"option"===y&&m!==d.value)&&E(e,"value",m,d.value,!1),"checked"in v&&void 0!==(m=v.checked)&&m!==e.checked&&E(e,"checked",m,d.checked,!1))}return e}function N(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){i.__e(e,n)}}function I(e,t,n){var r,o;if(i.unmount&&i.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||N(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){i.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&I(r[o],t,n||"function"!=typeof e.type);n||null==e.__e||f(e.__e),e.__=e.__e=e.__d=void 0}function B(e,t,n){return this.constructor(e,n)}function L(e,t,n){var o,a,s;i.__&&i.__(e,t),a=(o="function"==typeof n)?null:n&&n.__k||t.__k,s=[],U(t,e=(!o&&n||t).__k=v(g,null,[e]),a||c,c,void 0!==t.ownerSVGElement,!o&&n?[n]:a?null:t.firstChild?r.call(t.childNodes):null,s,!o&&n?n:a?a.__e:t.firstChild,o),R(s,e)}function M(e,t,n){var i,o,a,s=d({},e.props);for(a in t)"key"==a?i=t[a]:"ref"==a?o=t[a]:s[a]=t[a];return arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),y(e.type,s,i||e.key,o||e.ref,null)}r=p.slice,i={__e:function(e,t,n,r){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},o=0,b.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=d({},this.state),"function"==typeof e&&(e=e(d({},n),this.props)),e&&d(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),_(this))},b.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_(this))},b.prototype.render=g,a=[],u="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function(e,t){return e.__v.__b-t.__v.__b},P.__r=0},98944:function(e,t,n){"use strict";n.d(t,{I4:function(){return w},Ye:function(){return b},d4:function(){return g},eJ:function(){return m}});var r,i,o,a,s=n(73856),u=0,l=[],c=[],p=s.YM.__b,h=s.YM.__r,d=s.YM.diffed,f=s.YM.__c,v=s.YM.unmount;function y(e,t){s.YM.__h&&s.YM.__h(i,e,u||t),u=0;var n=i.__H||(i.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:c}),n.__[e]}function m(e){return u=1,function(e,t,n){var o=y(r++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):F(void 0,t),function(e){var t=o.__N?o.__N[0]:o.__[0],n=o.t(t,e);t!==n&&(o.__N=[n,o.__[1]],o.__c.setState({}))}],o.__c=i,!i.u)){var a=function(e,t,n){if(!o.__c.__H)return!0;var r=o.__c.__H.__.filter((function(e){return e.__c}));if(r.every((function(e){return!e.__N})))return!s||s.call(this,e,t,n);var i=!1;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}})),!(!i&&o.__c.props===e)&&(!s||s.call(this,e,t,n))};i.u=!0;var s=i.shouldComponentUpdate,u=i.componentWillUpdate;i.componentWillUpdate=function(e,t,n){if(this.__e){var r=s;s=void 0,a(e,t,n),s=r}u&&u.call(this,e,t,n)},i.shouldComponentUpdate=a}return o.__N||o.__}(F,e)}function g(e,t){var n=y(r++,3);!s.YM.__s&&C(n.__H,t)&&(n.__=e,n.i=t,i.__H.__h.push(n))}function b(e,t){var n=y(r++,7);return C(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function w(e,t){return u=8,b((function(){return e}),t)}function k(){for(var e;e=l.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Z),e.__H.__h.forEach(S),e.__H.__h=[]}catch(i){e.__H.__h=[],s.YM.__e(i,e.__v)}}s.YM.__b=function(e){i=null,p&&p(e)},s.YM.__r=function(e){h&&h(e),r=0;var t=(i=e.__c).__H;t&&(o===i?(t.__h=[],i.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=c,e.__N=e.i=void 0}))):(t.__h.forEach(Z),t.__h.forEach(S),t.__h=[])),o=i},s.YM.diffed=function(e){d&&d(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==l.push(t)&&a===s.YM.requestAnimationFrame||((a=s.YM.requestAnimationFrame)||P)(k)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==c&&(e.__=e.__V),e.i=void 0,e.__V=c}))),o=i=null},s.YM.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Z),e.__h=e.__h.filter((function(e){return!e.__||S(e)}))}catch(o){t.some((function(e){e.__h&&(e.__h=[])})),t=[],s.YM.__e(o,e.__v)}})),f&&f(e,t)},s.YM.unmount=function(e){v&&v(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Z(e)}catch(e){t=e}})),n.__H=void 0,t&&s.YM.__e(t,n.__v))};var _="function"==typeof requestAnimationFrame;function P(e){var t,n=function(){clearTimeout(r),_&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);_&&(t=requestAnimationFrame(n))}function Z(e){var t=i,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),i=t}function S(e){var t=i;e.__c=e.__(),i=t}function C(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function F(e,t){return"function"==typeof t?t(e):t}},35998:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function i(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){t=t||"";var r,o,a=[];for(o in"string"!==typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!==r&&undefined!==r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;a.push(o+"="+r)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),a=r(t[2]);null===o||null===a||o in i||(i[o]=a)}return i}},67011:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},34395:function(e,t,n){"use strict";var r=n(67011),i=n(35998),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(o,"")}var h=[["#","hash"],["?","query"],function(e,t){return v(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function f(e){var t,r=("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new m(unescape(e.pathname),{});else if("string"===o)for(t in i=new m(e,{}),d)delete i[t];else if("object"===o){for(t in e)t in d||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=s.test(e.href))}return i}function v(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function y(e,t){e=(e=p(e)).replace(a,""),t=t||{};var n,r=l.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],s=!!r[3],u=0;return o?s?(n=r[2]+r[3]+r[4],u=r[2].length+r[3].length):(n=r[2]+r[4],u=r[2].length):s?(n=r[3]+r[4],u=r[3].length):n=r[4],"file:"===i?u>=2&&(n=n.slice(2)):v(i)?n=r[4]:i?o&&(n=n.slice(2)):u>=2&&v(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||v(i),slashesCount:u,rest:n}}function m(e,t,n){if(e=(e=p(e)).replace(a,""),!(this instanceof m))return new m(e,t,n);var o,s,u,l,d,g,b=h.slice(),w=typeof t,k=this,_=0;for("object"!==w&&"string"!==w&&(n=t,t=null),n&&"function"!==typeof n&&(n=i.parse),o=!(s=y(e||"",t=f(t))).protocol&&!s.slashes,k.slashes=s.slashes||o&&t.slashes,k.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||c.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!v(k.protocol)))&&(b[3]=[/(.*)/,"pathname"]);_<b.length;_++)"function"!==typeof(l=b[_])?(u=l[0],g=l[1],u!==u?k[g]=e:"string"===typeof u?~(d="@"===u?e.lastIndexOf(u):e.indexOf(u))&&("number"===typeof l[2]?(k[g]=e.slice(0,d),e=e.slice(d+l[2])):(k[g]=e.slice(d),e=e.slice(0,d))):(d=u.exec(e))&&(k[g]=d[1],e=e.slice(0,d.index)),k[g]=k[g]||o&&l[3]&&t[g]||"",l[4]&&(k[g]=k[g].toLowerCase())):e=l(e,k);n&&(k.query=n(k.query)),o&&t.slashes&&"/"!==k.pathname.charAt(0)&&(""!==k.pathname||""!==t.pathname)&&(k.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(k.pathname,t.pathname)),"/"!==k.pathname.charAt(0)&&v(k.protocol)&&(k.pathname="/"+k.pathname),r(k.port,k.protocol)||(k.host=k.hostname,k.port=""),k.username=k.password="",k.auth&&(~(d=k.auth.indexOf(":"))?(k.username=k.auth.slice(0,d),k.username=encodeURIComponent(decodeURIComponent(k.username)),k.password=k.auth.slice(d+1),k.password=encodeURIComponent(decodeURIComponent(k.password))):k.username=encodeURIComponent(decodeURIComponent(k.auth)),k.auth=k.password?k.username+":"+k.password:k.username),k.origin="file:"!==k.protocol&&v(k.protocol)&&k.host?k.protocol+"//"+k.host:"null",k.href=k.toString()}m.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,u.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(o.username=t.slice(0,s),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(s+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<h.length;l++){var c=h[l];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&v(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"===typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var a=o+(n.protocol&&n.slashes||v(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&v(n.protocol)&&!r&&"/"!==n.pathname&&(a+="@"),(":"===r[r.length-1]||u.test(n.hostname)&&!n.port)&&(r+=":"),a+=r+n.pathname,(t="object"===typeof n.query?e(n.query):n.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(a+=n.hash),a}},m.extractProtocol=y,m.location=f,m.trimLeft=p,m.qs=i,e.exports=m},72973:function(e){"use strict";function t(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}t.prototype.match=function(e){var t,n,r=!0,i=this.parts,o=i.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(n=(e||"").split(this.separator),t=0;r&&t<o;t++)"*"!==i[t]&&(r=t<n.length&&i[t]===n[t]);r=r&&n}else r=!1;else if("function"==typeof e.splice)for(r=[],t=e.length;t--;)this.match(e[t])&&(r[r.length]=e[t]);else if("object"==typeof e)for(var a in r={},e)this.match(a)&&(r[a]=e[a]);return r},e.exports=function(e,n,r){var i=new t(e,r||/[\/\.]/);return"undefined"!=typeof n?i.match(n):i}},26868:function(){},35535:function(){},98737:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(61120),i=n(89611);var o=n(78814);function a(e,t,n){return a=(0,o.Z)()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,i.Z)(o,n.prototype),o},a.apply(null,arguments)}function s(e){var t="function"===typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return a(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(o,e)},s(e)}},51280:function(e,t,n){"use strict";n.d(t,{zt:function(){return R},C$:function(){return S},sk:function(){return H}});var r={};n.r(r),n.d(r,{getItem:function(){return A},removeItem:function(){return U},setItem:function(){return T}});var i=n(70885),o=n(4942),a=n(74165),s=n(1413),u=n(15671),l=n(43144),c=n(15861),p=n(57096),h=n(69549),d=n(60136),f=n(29388),v=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this,"Authorization required")).name="AuthError",e.isAuthError=!0,e}return(0,l.Z)(n)}((0,n(98737).Z)(Error));function y(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var m=0;function g(e){return"__private_"+m+++"_"+e}function b(e){return w.apply(this,arguments)}function w(){return(w=(0,c.Z)((0,a.Z)().mark((function e(t){var n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=2;break}throw new v;case 2:if(n=t.json(),!t.ok){e.next=5;break}return e.abrupt("return",n);case 5:return r="Failed request with status: ".concat(t.status,". ").concat(t.statusText),e.prev=6,e.next=9,n;case 9:i=e.sent,r=i.message?"".concat(r," message: ").concat(i.message):r,r=i.requestId?"".concat(r," request-Id: ").concat(i.requestId):r,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(6);case 16:throw new Error(r);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}var k=new Map,_=g("companionHeaders"),P=g("getUrl"),Z=g("request"),S=function(e){function t(e,n){(0,u.Z)(this,t),Object.defineProperty(this,Z,{value:F}),Object.defineProperty(this,P,{value:C}),Object.defineProperty(this,_,{writable:!0,value:void 0}),this.uppy=e,this.opts=n,this.onReceiveResponse=this.onReceiveResponse.bind(this),y(this,_)[_]=null==n?void 0:n.companionHeaders}return(0,l.Z)(t,[{key:"setCompanionHeaders",value:function(e){y(this,_)[_]=e}},{key:e,value:function(){return y(this,_)[_]}},{key:"hostname",get:function(){var e=this.uppy.getState().companion,t=this.opts.companionUrl;return(e&&e[t]?e[t]:t).replace(/\/$/,"")}},{key:"headers",value:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Accept:"application/json","Content-Type":"application/json","Uppy-Versions":"@uppy/companion-client=".concat(t.VERSION)},e.abrupt("return",(0,s.Z)((0,s.Z)({},n),y(this,_)[_]));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onReceiveResponse",value:function(e){var t=e.headers,n=this.uppy.getState().companion||{},r=this.opts.companionUrl;t.has("i-am")&&t.get("i-am")!==n[r]&&this.uppy.setState({companion:(0,s.Z)((0,s.Z)({},n),{},(0,o.Z)({},r,t.get("i-am")))})}},{key:"preflight",value:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var n,r,i,o=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=k.get(this.hostname))){e.next=3;break}return e.abrupt("return",n);case 3:return r=["accept","content-type","uppy-auth-token"],i=(0,c.Z)((0,a.Z)().mark((function e(){var n,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(y(o,P)[P](t),{method:"OPTIONS"});case 3:if(n=e.sent,null!=(i=n.headers.get("access-control-allow-headers"))&&"*"!==i){e.next=8;break}return k.set(o.hostname,r),e.abrupt("return",r);case 8:return o.uppy.log("[CompanionClient] adding allowed preflight headers to companion cache: ".concat(o.hostname," ").concat(i)),s=i.split(",").map((function(e){return e.trim().toLowerCase()})),k.set(o.hostname,s),e.abrupt("return",s);case 14:return e.prev=14,e.t0=e.catch(0),o.uppy.log("[CompanionClient] unable to make preflight request ".concat(e.t0),"warning"),k.delete(o.hostname),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))(),k.set(this.hostname,i),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"preflightAndHeaders",value:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var n,r,o,s,u=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.preflight(t),this.headers()]);case 2:return n=e.sent,r=(0,i.Z)(n,2),o=r[0],s=r[1],e.abrupt("return",Object.fromEntries(Object.entries(s).filter((function(e){var t=(0,i.Z)(e,1)[0];return!!o.includes(t.toLowerCase())||(u.uppy.log("[CompanionClient] excluding disallowed header ".concat(t)),!1)}))));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=void 0),"boolean"===typeof n&&(n={skipPostResponse:n}),e.abrupt("return",y(this,Z)[Z]((0,s.Z)((0,s.Z)({},n),{},{path:t})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=void 0),"boolean"===typeof r&&(r={skipPostResponse:r}),e.abrupt("return",y(this,Z)[Z]((0,s.Z)((0,s.Z)({},r),{},{path:t,method:"POST",data:n})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=void 0),"boolean"===typeof r&&(r={skipPostResponse:r}),e.abrupt("return",y(this,Z)[Z]((0,s.Z)((0,s.Z)({},r),{},{path:t,method:"DELETE",data:n})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(Symbol.for("uppy test: getCompanionHeaders"));function C(e){return/^(https?:|)\/\//.test(e)?e:"".concat(this.hostname,"/").concat(e)}function F(e){return x.apply(this,arguments)}function x(){return(x=(0,c.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,u,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,r=t.method,i=void 0===r?"GET":r,o=t.data,s=t.skipPostResponse,u=t.signal,e.prev=1,e.next=4,this.preflightAndHeaders(n);case 4:return l=e.sent,e.next=7,(0,p.Z)(y(this,P)[P](n),{method:i,signal:u,headers:l,credentials:this.opts.companionCookiesRule||"same-origin",body:o?JSON.stringify(o):null});case 7:return c=e.sent,s||this.onReceiveResponse(c),e.abrupt("return",b(c));case 12:if(e.prev=12,e.t0=e.catch(1),null==e.t0||!e.t0.isAuthError){e.next=16;break}throw e.t0;case 16:throw new h.Z("Could not ".concat(i," ").concat(y(this,P)[P](n)),{cause:e.t0});case 17:case"end":return e.stop()}}),e,this,[[1,12]])})))).apply(this,arguments)}S.VERSION="3.1.3";var O=n(11752),E=n(61120);function T(e,t){return new Promise((function(n){localStorage.setItem(e,t),n()}))}function A(e){return Promise.resolve(localStorage.getItem(e))}function U(e){return new Promise((function(t){localStorage.removeItem(e),t()}))}var R=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).provider=r.provider,i.id=i.provider,i.name=i.opts.name||function(e){return e.split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}(i.id),i.pluginId=i.opts.pluginId,i.tokenKey="companion-".concat(i.pluginId,"-auth-token"),i.companionKeysParams=i.opts.companionKeysParams,i.preAuthToken=null,i}return(0,l.Z)(n,[{key:"headers",value:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,r,o,u,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,O.Z)((0,E.Z)(n.prototype),"headers",this).call(this),this.getAuthToken()]);case 2:return t=e.sent,r=(0,i.Z)(t,2),o=r[0],u=r[1],l={},u&&(l["uppy-auth-token"]=u),this.companionKeysParams&&(l["uppy-credentials-params"]=btoa(JSON.stringify({params:this.companionKeysParams}))),e.abrupt("return",(0,s.Z)((0,s.Z)({},o),l));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onReceiveResponse",value:function(e){(0,O.Z)((0,E.Z)(n.prototype),"onReceiveResponse",this).call(this,e);var t=this.uppy.getPlugin(this.pluginId),r=t.getPluginState().authenticated?401!==e.status:e.status<400;return t.setPluginState({authenticated:r}),e}},{key:"setAuthToken",value:function(e){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,e)}},{key:"getAuthToken",value:function(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)}},{key:"ensurePreAuth",value:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.companionKeysParams||this.preAuthToken){e.next=5;break}return e.next=3,this.fetchPreAuthToken();case 3:if(this.preAuthToken){e.next=5;break}throw new Error("Could not load authentication data required for third-party login. Please try again later.");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authUrl",value:function(e){void 0===e&&(e={});var t=new URLSearchParams(e);return this.preAuthToken&&t.set("uppyPreAuthToken",this.preAuthToken),"".concat(this.hostname,"/").concat(this.id,"/connect?").concat(t)}},{key:"fileUrl",value:function(e){return"".concat(this.hostname,"/").concat(this.id,"/get/").concat(e)}},{key:"fetchPreAuthToken",value:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.companionKeysParams){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.post("".concat(this.id,"/preauth/"),{params:this.companionKeysParams});case 5:t=e.sent,this.preAuthToken=t.token,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.uppy.log("[CompanionClient] unable to fetch preAuthToken ".concat(e.t0),"warning");case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"list",value:function(e){return this.get("".concat(this.id,"/list/").concat(e||""))}},{key:"logout",value:function(){var e=this;return this.get("".concat(this.id,"/logout")).then((function(t){return Promise.all([t,e.uppy.getPlugin(e.pluginId).storage.removeItem(e.tokenKey)])})).then((function(e){return(0,i.Z)(e,1)[0]}))}}],[{key:"initPlugin",value:function(e,t,n){if(e.type="acquirer",e.files=[],n&&(e.opts=(0,s.Z)((0,s.Z)({},n),t)),t.serverUrl||t.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(t.companionAllowedHosts){var i=t.companionAllowedHosts;if("string"!==typeof i&&!Array.isArray(i)&&!(i instanceof RegExp))throw new TypeError("".concat(e.id,': the option "companionAllowedHosts" must be one of string, Array, RegExp'));e.opts.companionAllowedHosts=i}else/^(?!https?:\/\/).*$/i.test(t.companionUrl)?e.opts.companionAllowedHosts="https://".concat(t.companionUrl.replace(/^\/\//,"")):e.opts.companionAllowedHosts=new URL(t.companionUrl).origin;e.storage=e.opts.storage||r}}]),n}(S),D=n(64281);function N(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var I=0;function B(e){return"__private_"+I+++"_"+e}var L=B("queued"),M=B("emitter"),j=B("isOpen"),z=B("socket"),q=B("handleMessage"),H=function(e,t){function n(e){var t=this;(0,u.Z)(this,n),Object.defineProperty(this,L,{writable:!0,value:[]}),Object.defineProperty(this,M,{writable:!0,value:D()}),Object.defineProperty(this,j,{writable:!0,value:!1}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:function(e){try{var n=JSON.parse(e.data);t.emit(n.action,n.payload)}catch(r){console.log(r)}}}),this.opts=e,e&&!1===e.autoOpen||this.open()}return(0,l.Z)(n,[{key:"isOpen",get:function(){return N(this,j)[j]}},{key:e,value:function(){return N(this,z)[z]}},{key:t,value:function(){return N(this,L)[L]}},{key:"open",value:function(){var e=this;null==N(this,z)[z]&&(N(this,z)[z]=new WebSocket(this.opts.target),N(this,z)[z].onopen=function(){for(N(e,j)[j]=!0;N(e,L)[L].length>0&&N(e,j)[j];){var t=N(e,L)[L].shift();e.send(t.action,t.payload)}},N(this,z)[z].onclose=function(){N(e,j)[j]=!1,N(e,z)[z]=null},N(this,z)[z].onmessage=N(this,q)[q])}},{key:"close",value:function(){var e;null==(e=N(this,z)[z])||e.close()}},{key:"send",value:function(e,t){N(this,j)[j]?N(this,z)[z].send(JSON.stringify({action:e,payload:t})):N(this,L)[L].push({action:e,payload:t})}},{key:"on",value:function(e,t){N(this,M)[M].on(e,t)}},{key:"emit",value:function(e,t){N(this,M)[M].emit(e,t)}},{key:"once",value:function(e,t){N(this,M)[M].once(e,t)}}]),n}(Symbol.for("uppy test: getSocket"),Symbol.for("uppy test: getQueued"))},98339:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(4942),i=n(1413),o=n(15671),a=n(43144),s=n(25429),u=function(){function e(t,n){(0,o.Z)(this,e),void 0===n&&(n={}),this.uppy=t,this.opts=n}return(0,a.Z)(e,[{key:"getPluginState",value:function(){return this.uppy.getState().plugins[this.id]||{}}},{key:"setPluginState",value:function(e){var t=this.uppy.getState().plugins;this.uppy.setState({plugins:(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},this.id,(0,i.Z)((0,i.Z)({},t[this.id]),e)))})}},{key:"setOptions",value:function(e){this.opts=(0,i.Z)((0,i.Z)({},this.opts),e),this.setPluginState(),this.i18nInit()}},{key:"i18nInit",value:function(){var e=new s.Z([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState()}},{key:"addTarget",value:function(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}},{key:"install",value:function(){}},{key:"uninstall",value:function(){}},{key:"render",value:function(){throw new Error("Extend the render method to add your plugin to a DOM element")}},{key:"update",value:function(){}},{key:"afterUpdate",value:function(){}}]),e}()},3737:function(e,t,n){"use strict";n.d(t,{di:function(){return Ie},hS:function(){return Ce},ZP:function(){return Ce}});var r=n(74165),i=n(15861),o=n(45987),a=n(37762),s=n(42982),u=n(4942),l=n(70885),c=n(1413),p=n(15671),h=n(43144),d=n(25429),f=n(64281),v="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",y=n(82061);function m(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var g=0;function b(e){return"__private_"+g+++"_"+e}var w=b("callbacks"),k=b("publish"),_=function(){function e(){(0,p.Z)(this,e),Object.defineProperty(this,k,{value:P}),Object.defineProperty(this,w,{writable:!0,value:new Set}),this.state={}}return(0,h.Z)(e,[{key:"getState",value:function(){return this.state}},{key:"setState",value:function(e){var t=(0,c.Z)({},this.state),n=(0,c.Z)((0,c.Z)({},this.state),e);this.state=n,m(this,k)[k](t,n,e)}},{key:"subscribe",value:function(e){var t=this;return m(this,w)[w].add(e),function(){m(t,w)[w].delete(e)}}}]),e}();function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];m(this,w)[w].forEach((function(e){e.apply(void 0,t)}))}_.VERSION="3.0.3";var Z=_,S=n(37162),C=n(61904),F=n(13829);function x(e){if(null==e&&"undefined"!==typeof navigator&&(e=navigator.userAgent),!e)return!0;var t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;var n=t[1].split("."),r=(0,l.Z)(n,2),i=r[0],o=r[1];return i=parseInt(i,10),o=parseInt(o,10),i<15||15===i&&o<15063||(i>18||18===i&&o>=18218)}function O(e){return e<10?"0".concat(e):e.toString()}function E(){var e=new Date,t=O(e.getHours()),n=O(e.getMinutes()),r=O(e.getSeconds());return"".concat(t,":").concat(n,":").concat(r)}var T={debug:function(){},warn:function(){},error:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["[Uppy] [".concat(E(),"]")].concat(n))}},A={debug:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).debug.apply(e,["[Uppy] [".concat(E(),"]")].concat(n))},warn:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).warn.apply(e,["[Uppy] [".concat(E(),"]")].concat(n))},error:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["[Uppy] [".concat(E(),"]")].concat(n))}},U=n(60136),R=n(29388),D=n(98737),N=n(20138),I=n(1784),B={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},L=function(e){(0,U.Z)(n,e);var t=(0,R.Z)(n);function n(e,r){var i;(0,p.Z)(this,n);var o=void 0===r?{}:r,a=o.isUserFacing,s=void 0===a||a,u=o.file;return(i=t.call(this,e)).isRestriction=!0,i.isUserFacing=s,null!=u&&(i.file=u),i}return(0,h.Z)(n)}((0,D.Z)(Error)),M=function(){function e(t,n){(0,p.Z)(this,e),this.i18n=n,this.getOpts=function(){var e=t();if(null!=e.restrictions.allowedFileTypes&&!Array.isArray(e.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return e}}return(0,h.Z)(e,[{key:"validateAggregateRestrictions",value:function(e,t){var n=this.getOpts().restrictions,r=n.maxTotalFileSize,i=n.maxNumberOfFiles;if(i&&e.filter((function(e){return!e.isGhost})).length+t.length>i)throw new L("".concat(this.i18n("youCanOnlyUploadX",{smart_count:i})));if(r){var o,s=e.reduce((function(e,t){return e+t.size}),0),u=(0,a.Z)(t);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(null!=l.size&&(s+=l.size)>r)throw new L(this.i18n("exceedsSize",{size:N(r),file:l.name}))}}catch(c){u.e(c)}finally{u.f()}}}},{key:"validateSingleFile",value:function(e){var t=this.getOpts().restrictions,n=t.maxFileSize,r=t.minFileSize,i=t.allowedFileTypes;if(i&&!i.some((function(t){return t.includes("/")?!!e.type&&I(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.slice(1).toLowerCase()}))){var o=i.join(", ");throw new L(this.i18n("youCanOnlyUploadFileTypes",{types:o}),{file:e})}if(n&&null!=e.size&&e.size>n)throw new L(this.i18n("exceedsSize",{size:N(n),file:e.name}),{file:e});if(r&&null!=e.size&&e.size<r)throw new L(this.i18n("inferiorSize",{size:N(r)}),{file:e})}},{key:"validate",value:function(e,t){var n=this;t.forEach((function(e){n.validateSingleFile(e)})),this.validateAggregateRestrictions(e,t)}},{key:"validateMinNumberOfFiles",value:function(e){var t=this.getOpts().restrictions.minNumberOfFiles;if(Object.keys(e).length<t)throw new L(this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))}},{key:"getMissingRequiredMetaFields",value:function(e){var t,n=new L(this.i18n("missingRequiredMetaFieldOnFile",{fileName:e.name})),r=this.getOpts().restrictions.requiredMetaFields,i=[],o=(0,a.Z)(r);try{for(o.s();!(t=o.n()).done;){var s=t.value;Object.hasOwn(e.meta,s)&&""!==e.meta[s]||i.push(s)}}catch(u){o.e(u)}finally{o.f()}return{missingFields:i,error:n}}}]),e}(),j={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled"}},z=["isGhost"];function q(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var H=0;function V(e){return"__private_"+H+++"_"+e}var W=V("plugins"),K=V("restricter"),Y=V("storeUnsubscribe"),G=V("emitter"),X=V("preProcessors"),Q=V("uploaders"),$=V("postProcessors"),J=V("informAndEmit"),ee=V("checkRequiredMetaFieldsOnFile"),te=V("checkRequiredMetaFields"),ne=V("assertNewUploadAllowed"),re=V("transformFile"),ie=V("startIfAutoProceed"),oe=V("checkAndUpdateFileState"),ae=V("addListeners"),se=V("updateOnlineStatus"),ue=V("createUpload"),le=V("getUpload"),ce=V("removeUpload"),pe=V("runUpload"),he=function(e,t){function n(e){var t=this;(0,p.Z)(this,n),Object.defineProperty(this,pe,{value:Ze}),Object.defineProperty(this,ce,{value:Pe}),Object.defineProperty(this,le,{value:_e}),Object.defineProperty(this,ue,{value:ke}),Object.defineProperty(this,ae,{value:we}),Object.defineProperty(this,oe,{value:be}),Object.defineProperty(this,ie,{value:ge}),Object.defineProperty(this,re,{value:me}),Object.defineProperty(this,ne,{value:ye}),Object.defineProperty(this,te,{value:ve}),Object.defineProperty(this,ee,{value:fe}),Object.defineProperty(this,J,{value:de}),Object.defineProperty(this,W,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:f()}),Object.defineProperty(this,X,{writable:!0,value:new Set}),Object.defineProperty(this,Q,{writable:!0,value:new Set}),Object.defineProperty(this,$,{writable:!0,value:new Set}),Object.defineProperty(this,se,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=j;var r={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:B,meta:{},onBeforeFileAdded:function(e){return e},onBeforeUpload:function(e){return e},store:new Z,logger:T,infoTimeout:5e3};this.opts=(0,c.Z)((0,c.Z)((0,c.Z)({},r),e),{},{restrictions:(0,c.Z)((0,c.Z)({},r.restrictions),e&&e.restrictions)}),e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=A),this.log("Using Core v".concat(this.constructor.VERSION)),this.i18nInit(),this.calculateProgress=y(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:x(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:(0,c.Z)({},this.opts.meta),info:[],recoveredState:null}),q(this,K)[K]=new M((function(){return t.opts}),this.i18n),q(this,Y)[Y]=this.store.subscribe((function(e,n,r){t.emit("state-update",e,n,r),t.updateAll(n)})),this.opts.debug&&"undefined"!==typeof window&&(window[this.opts.id]=this),q(this,ae)[ae]()}return(0,h.Z)(n,[{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=q(this,G)[G]).emit.apply(t,[e].concat(r))}},{key:"on",value:function(e,t){return q(this,G)[G].on(e,t),this}},{key:"once",value:function(e,t){return q(this,G)[G].once(e,t),this}},{key:"off",value:function(e,t){return q(this,G)[G].off(e,t),this}},{key:"updateAll",value:function(e){this.iteratePlugins((function(t){t.update(e)}))}},{key:"setState",value:function(e){this.store.setState(e)}},{key:"getState",value:function(){return this.store.getState()}},{key:"patchFilesState",value:function(e){var t=this.getState().files;this.setState({files:(0,c.Z)((0,c.Z)({},t),Object.fromEntries(Object.entries(e).map((function(e){var n=(0,l.Z)(e,2),r=n[0],i=n[1];return[r,(0,c.Z)((0,c.Z)({},t[r]),i)]}))))})}},{key:"setFileState",value:function(e,t){if(!this.getState().files[e])throw new Error("Can\u2019t set state for ".concat(e," (the file could have been removed)"));this.patchFilesState((0,u.Z)({},e,t))}},{key:"i18nInit",value:function(){var e=new d.Z([this.defaultLocale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}},{key:"setOptions",value:function(e){this.opts=(0,c.Z)((0,c.Z)((0,c.Z)({},this.opts),e),{},{restrictions:(0,c.Z)((0,c.Z)({},this.opts.restrictions),e&&e.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins((function(t){t.setOptions(e)})),this.setState()}},{key:"resetProgress",value:function(){var e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t=(0,c.Z)({},this.getState().files),n={};Object.keys(t).forEach((function(r){n[r]=(0,c.Z)((0,c.Z)({},t[r]),{},{progress:(0,c.Z)((0,c.Z)({},t[r].progress),e)})})),this.setState({files:n,totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null}),this.emit("reset-progress")}},{key:"addPreProcessor",value:function(e){q(this,X)[X].add(e)}},{key:"removePreProcessor",value:function(e){return q(this,X)[X].delete(e)}},{key:"addPostProcessor",value:function(e){q(this,$)[$].add(e)}},{key:"removePostProcessor",value:function(e){return q(this,$)[$].delete(e)}},{key:"addUploader",value:function(e){q(this,Q)[Q].add(e)}},{key:"removeUploader",value:function(e){return q(this,Q)[Q].delete(e)}},{key:"setMeta",value:function(e){var t=(0,c.Z)((0,c.Z)({},this.getState().meta),e),n=(0,c.Z)({},this.getState().files);Object.keys(n).forEach((function(t){n[t]=(0,c.Z)((0,c.Z)({},n[t]),{},{meta:(0,c.Z)((0,c.Z)({},n[t].meta),e)})})),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})}},{key:"setFileMeta",value:function(e,t){var n=(0,c.Z)({},this.getState().files);if(n[e]){var r=(0,c.Z)((0,c.Z)({},n[e].meta),t);n[e]=(0,c.Z)((0,c.Z)({},n[e]),{},{meta:r}),this.setState({files:n})}else this.log("Was trying to set metadata for a file that has been removed: ",e)}},{key:"getFile",value:function(e){return this.getState().files[e]}},{key:"getFiles",value:function(){var e=this.getState().files;return Object.values(e)}},{key:"getFilesByIds",value:function(e){var t=this;return e.map((function(e){return t.getFile(e)}))}},{key:"getObjectOfFilesPerState",value:function(){var e=this.getState(),t=e.files,n=e.totalProgress,r=e.error,i=Object.values(t),o=i.filter((function(e){var t=e.progress;return!t.uploadComplete&&t.uploadStarted})),a=i.filter((function(e){return!e.progress.uploadStarted})),s=i.filter((function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess})),u=i.filter((function(e){return e.progress.uploadStarted})),l=i.filter((function(e){return e.isPaused})),c=i.filter((function(e){return e.progress.uploadComplete})),p=i.filter((function(e){return e.error})),h=o.filter((function(e){return!e.isPaused})),d=i.filter((function(e){return e.progress.preprocess||e.progress.postprocess}));return{newFiles:a,startedFiles:s,uploadStartedFiles:u,pausedFiles:l,completeFiles:c,erroredFiles:p,inProgressFiles:o,inProgressNotPausedFiles:h,processingFiles:d,isUploadStarted:u.length>0,isAllComplete:100===n&&c.length===i.length&&0===d.length,isAllErrored:!!r&&p.length===i.length,isAllPaused:0!==o.length&&l.length===o.length,isUploadInProgress:o.length>0,isSomeGhost:i.some((function(e){return e.isGhost}))}}},{key:"validateRestrictions",value:function(e,t){void 0===t&&(t=this.getFiles());try{q(this,K)[K].validate(t,[e])}catch(n){return n}return null}},{key:"checkIfFileAlreadyExists",value:function(e){var t=this.getState().files;return!(!t[e]||t[e].isGhost)}},{key:"addFile",value:function(e){q(this,ne)[ne](e);var t=q(this,oe)[oe]([e]),n=t.nextFilesState,r=t.validFilesToAdd,i=t.errors,o=i.filter((function(e){return e.isRestriction}));if(q(this,J)[J](o),i.length>0)throw i[0];this.setState({files:n});var a=(0,l.Z)(r,1)[0];return this.emit("file-added",a),this.emit("files-added",r),this.log("Added file: ".concat(a.name,", ").concat(a.id,", mime type: ").concat(a.type)),q(this,ie)[ie](),a.id}},{key:"addFiles",value:function(e){var t=this;q(this,ne)[ne]();var n=q(this,oe)[oe](e),r=n.nextFilesState,i=n.validFilesToAdd,o=n.errors,a=o.filter((function(e){return e.isRestriction}));q(this,J)[J](a);var s=o.filter((function(e){return!e.isRestriction}));if(s.length>0){var u="Multiple errors occurred while adding files:\n";if(s.forEach((function(e){u+="\n * ".concat(e.message)})),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:s.length}),details:u},"error",this.opts.infoTimeout),"function"===typeof AggregateError)throw new AggregateError(s,u);var l=new Error(u);throw l.errors=s,l}this.setState({files:r}),i.forEach((function(e){t.emit("file-added",e)})),this.emit("files-added",i),i.length>5?this.log("Added batch of ".concat(i.length," files")):Object.values(i).forEach((function(e){t.log("Added file: ".concat(e.name,"\n id: ").concat(e.id,"\n type: ").concat(e.type))})),i.length>0&&q(this,ie)[ie]()}},{key:"removeFiles",value:function(e,t){var n=this,r=this.getState(),i=r.files,o=r.currentUploads,a=(0,c.Z)({},i),s=(0,c.Z)({},o),u=Object.create(null);function l(e){return void 0===u[e]}e.forEach((function(e){i[e]&&(u[e]=i[e],delete a[e])})),Object.keys(s).forEach((function(e){var t=o[e].fileIDs.filter(l);if(0!==t.length){var r=n.getState().capabilities;if(t.length!==o[e].fileIDs.length&&!r.individualCancellation)throw new Error("individualCancellation is disabled");s[e]=(0,c.Z)((0,c.Z)({},o[e]),{},{fileIDs:t})}else delete s[e]}));var p={currentUploads:s,files:a};0===Object.keys(a).length&&(p.allowNewUpload=!0,p.error=null,p.recoveredState=null),this.setState(p),this.calculateTotalProgress();var h=Object.keys(u);h.forEach((function(e){n.emit("file-removed",u[e],t)})),h.length>5?this.log("Removed ".concat(h.length," files")):this.log("Removed files: ".concat(h.join(", ")))}},{key:"removeFile",value:function(e,t){void 0===t&&(t=null),this.removeFiles([e],t)}},{key:"pauseResume",value:function(e){if(this.getState().capabilities.resumableUploads&&!this.getFile(e).uploadComplete){var t=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}}},{key:"pauseAll",value:function(){var e=(0,c.Z)({},this.getState().files);Object.keys(e).filter((function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted})).forEach((function(t){var n=(0,c.Z)((0,c.Z)({},e[t]),{},{isPaused:!0});e[t]=n})),this.setState({files:e}),this.emit("pause-all")}},{key:"resumeAll",value:function(){var e=(0,c.Z)({},this.getState().files);Object.keys(e).filter((function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted})).forEach((function(t){var n=(0,c.Z)((0,c.Z)({},e[t]),{},{isPaused:!1,error:null});e[t]=n})),this.setState({files:e}),this.emit("resume-all")}},{key:"retryAll",value:function(){var e=(0,c.Z)({},this.getState().files),t=Object.keys(e).filter((function(t){return e[t].error}));if(t.forEach((function(t){var n=(0,c.Z)((0,c.Z)({},e[t]),{},{isPaused:!1,error:null});e[t]=n})),this.setState({files:e,error:null}),this.emit("retry-all",t),0===t.length)return Promise.resolve({successful:[],failed:[]});var n=q(this,ue)[ue](t,{forceAllowNewUpload:!0});return q(this,pe)[pe](n)}},{key:"cancelAll",value:function(e){var t=(void 0===e?{}:e).reason,n=void 0===t?"user":t;if(this.emit("cancel-all",{reason:n}),"user"===n){var r=this.getState().files,i=Object.keys(r);i.length&&this.removeFiles(i,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}}},{key:"retryUpload",value:function(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);var t=q(this,ue)[ue]([e],{forceAllowNewUpload:!0});return q(this,pe)[pe](t)}},{key:"logout",value:function(){this.iteratePlugins((function(e){e.provider&&e.provider.logout&&e.provider.logout()}))}},{key:"calculateProgress",value:function(e,t){if(null!=e&&this.getFile(e.id)){var n=Number.isFinite(t.bytesTotal)&&t.bytesTotal>0;this.setFileState(e.id,{progress:(0,c.Z)((0,c.Z)({},this.getFile(e.id).progress),{},{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:n?Math.round(t.bytesUploaded/t.bytesTotal*100):0})}),this.calculateTotalProgress()}else this.log("Not setting progress for a file that has been removed: ".concat(null==e?void 0:e.id))}},{key:"calculateTotalProgress",value:function(){var e=this.getFiles().filter((function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess}));if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});var t=e.filter((function(e){return null!=e.progress.bytesTotal})),n=e.filter((function(e){return null==e.progress.bytesTotal}));if(0!==t.length){var r=t.reduce((function(e,t){return e+t.progress.bytesTotal}),0),i=r/t.length;r+=i*n.length;var o=0;t.forEach((function(e){o+=e.progress.bytesUploaded})),n.forEach((function(e){o+=i*(e.progress.percentage||0)/100}));var a=0===r?0:Math.round(o/r*100);a>100&&(a=100),this.setState({totalProgress:a}),this.emit("progress",a)}else{var s=100*e.length,u=n.reduce((function(e,t){return e+t.progress.percentage}),0),l=Math.round(u/s*100);this.setState({totalProgress:l})}}},{key:"updateOnlineStatus",value:function(){"undefined"===typeof window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}},{key:"getID",value:function(){return this.opts.id}},{key:"use",value:function(e,t){if("function"!==typeof e){var n="Expected a plugin class, but got ".concat(null===e?"null":typeof e,".")+" Please verify that the plugin was imported and spelled correctly.";throw new TypeError(n)}var r=new e(this,t),i=r.id;if(!i)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");var o=this.getPlugin(i);if(o){var a="Already found a plugin named '".concat(o.id,"'. ")+"Tried to use: '".concat(i,"'.\n")+"Uppy plugins must have unique `id` options. See https://uppy.io/docs/plugins/#id.";throw new Error(a)}return e.VERSION&&this.log("Using ".concat(i," v").concat(e.VERSION)),r.type in q(this,W)[W]?q(this,W)[W][r.type].push(r):q(this,W)[W][r.type]=[r],r.install(),this}},{key:"getPlugin",value:function(e){for(var t=0,n=Object.values(q(this,W)[W]);t<n.length;t++){var r=n[t].find((function(t){return t.id===e}));if(null!=r)return r}}},{key:e,value:function(e){return q(this,W)[W][e]}},{key:"iteratePlugins",value:function(e){Object.values(q(this,W)[W]).flat(1).forEach(e)}},{key:"removePlugin",value:function(e){this.log("Removing plugin ".concat(e.id)),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();var t=q(this,W)[W][e.type],n=t.findIndex((function(t){return t.id===e.id}));-1!==n&&t.splice(n,1);var r=this.getState(),i={plugins:(0,c.Z)((0,c.Z)({},r.plugins),{},(0,u.Z)({},e.id,void 0))};this.setState(i)}},{key:"close",value:function(e){var t=this,n=(void 0===e?{}:e).reason;this.log("Closing Uppy instance ".concat(this.opts.id,": removing all files and uninstalling plugins")),this.cancelAll({reason:n}),q(this,Y)[Y](),this.iteratePlugins((function(e){t.removePlugin(e)})),"undefined"!==typeof window&&window.removeEventListener&&(window.removeEventListener("online",q(this,se)[se]),window.removeEventListener("offline",q(this,se)[se]))}},{key:"hideInfo",value:function(){var e=this.getState().info;this.setState({info:e.slice(1)}),this.emit("info-hidden")}},{key:"info",value:function(e,t,n){var r=this;void 0===t&&(t="info"),void 0===n&&(n=3e3);var i="object"===typeof e;this.setState({info:[].concat((0,s.Z)(this.getState().info),[{type:t,message:i?e.message:e,details:i?e.details:null}])}),setTimeout((function(){return r.hideInfo()}),n),this.emit("info-visible")}},{key:"log",value:function(e,t){var n=this.opts.logger;switch(t){case"error":n.error(e);break;case"warning":n.warn(e);break;default:n.debug(e)}}},{key:"restore",value:function(e){return this.log('Core: attempting to restore upload "'.concat(e,'"')),this.getState().currentUploads[e]?q(this,pe)[pe](e):(q(this,ce)[ce](e),Promise.reject(new Error("Nonexistent upload")))}},{key:t,value:function(){var e;return(e=q(this,ue))[ue].apply(e,arguments)}},{key:"addResultData",value:function(e,t){if(q(this,le)[le](e)){var n=this.getState().currentUploads,r=(0,c.Z)((0,c.Z)({},n[e]),{},{result:(0,c.Z)((0,c.Z)({},n[e].result),t)});this.setState({currentUploads:(0,c.Z)((0,c.Z)({},n),{},(0,u.Z)({},e,r))})}else this.log("Not setting result for an upload that has been removed: ".concat(e))}},{key:"upload",value:function(){var e,t=this;null!=(e=q(this,W)[W].uploader)&&e.length||this.log("No uploader type plugins are used","warning");var n=this.getState().files,r=this.opts.onBeforeUpload(n);return!1===r?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&"object"===typeof r&&(n=r,this.setState({files:n})),Promise.resolve().then((function(){return q(t,K)[K].validateMinNumberOfFiles(n)})).catch((function(e){throw q(t,J)[J]([e]),e})).then((function(){if(!q(t,te)[te](n))throw new L(t.i18n("missingRequiredMetaField"))})).catch((function(e){throw e})).then((function(){var e=t.getState().currentUploads,r=Object.values(e).flatMap((function(e){return e.fileIDs})),i=[];Object.keys(n).forEach((function(e){var n=t.getFile(e);n.progress.uploadStarted||-1!==r.indexOf(e)||i.push(n.id)}));var o=q(t,ue)[ue](i);return q(t,pe)[pe](o)})).catch((function(e){throw t.emit("error",e),t.log(e,"error"),e})))}}]),n}(Symbol.for("uppy test: getPlugins"),Symbol.for("uppy test: createUpload"));function de(e){var t,n=this,r=(0,a.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.file;i.isRestriction?this.emit("restriction-failed",o,i):this.emit("error",i),this.log(i,"warning")}}catch(c){r.e(c)}finally{r.f()}var s=e.filter((function(e){return e.isUserFacing})),u=s.slice(0,4),l=s.slice(4);u.forEach((function(e){var t=e.message,r=e.details,i=void 0===r?"":r;n.info({message:t,details:i},"error",n.opts.infoTimeout)})),l.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:l.length})})}function fe(e){var t=q(this,K)[K].getMissingRequiredMetaFields(e),n=t.missingFields,r=t.error;return!(n.length>0)||(this.setFileState(e.id,{missingRequiredMetaFields:n}),this.log(r.message),this.emit("restriction-failed",e,r),!1)}function ve(e){for(var t=!0,n=0,r=Object.values(e);n<r.length;n++){var i=r[n];q(this,ee)[ee](i)||(t=!1)}return t}function ye(e){if(!1===this.getState().allowNewUpload){var t=new L(this.i18n("noMoreFilesAllowed"),{file:e});throw q(this,J)[J]([t]),t}}function me(e){var t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,n=(0,S.Z)(t),r=function(e,t){return t.name?t.name:"image"===e.split("/")[0]?"".concat(e.split("/")[0],".").concat(e.split("/")[1]):"noname"}(n,t),i=(0,C.Z)(r).extension,o=Boolean(t.isRemote),a=(0,F.H)(t),s=t.meta||{};s.name=r,s.type=n;var u=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:a,name:r,extension:i||"",meta:(0,c.Z)((0,c.Z)({},this.getState().meta),s),type:n,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:u,uploadComplete:!1,uploadStarted:null},size:u,isRemote:o,remote:t.remote||"",preview:t.preview}}function ge(){var e=this;this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout((function(){e.scheduledAutoProceed=null,e.upload().catch((function(t){t.isRestriction||e.log(t.stack||t.message||t)}))}),4))}function be(e){var t,n=this.getState().files,r=(0,c.Z)({},n),i=[],s=[],u=(0,a.Z)(e);try{for(u.s();!(t=u.n()).done;){var l=t.value;try{var p,h=q(this,re)[re](l);if(null!=(p=n[h.id])&&p.isGhost){var d=n[h.id],f=(d.isGhost,(0,o.Z)(d,z));h=(0,c.Z)((0,c.Z)({},f),{},{data:l.data}),this.log("Replaced the blob in the restored ghost file: ".concat(h.name,", ").concat(h.id))}if(this.checkIfFileAlreadyExists(h.id))throw new L(this.i18n("noDuplicates",{fileName:h.name}),{file:l});var v=this.opts.onBeforeFileAdded(h,r);if(!1===v)throw new L("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:l});"object"===typeof v&&null!==v&&(h=v),q(this,K)[K].validateSingleFile(h),r[h.id]=h,i.push(h)}catch(y){s.push(y)}}}catch(y){u.e(y)}finally{u.f()}try{q(this,K)[K].validateAggregateRestrictions(Object.values(n),i)}catch(y){return s.push(y),{nextFilesState:n,validFilesToAdd:[],errors:s}}return{nextFilesState:r,validFilesToAdd:i,errors:s}}function we(){var e,t=this,n=function(e,n,r){var i=e.message||"Unknown error";e.details&&(i+=" ".concat(e.details)),t.setState({error:i}),null!=n&&n.id in t.getState().files&&t.setFileState(n.id,{error:i,response:r})};this.on("error",n),this.on("upload-error",(function(e,r,i){if(n(r,e,i),"object"===typeof r&&r.message){var o=new Error(r.message);o.isUserFacing=!0,o.details=r.message,r.details&&(o.details+=" ".concat(r.details)),o.message=t.i18n("failedToUpload",{file:null==e?void 0:e.name}),q(t,J)[J]([o])}else q(t,J)[J]([r])})),this.on("upload-stalled",(function(n,r){var i=n.message,o=r.map((function(e){return e.meta.name})).join(", ");e||(t.info({message:i,details:o},"warning",t.opts.infoTimeout),e=setTimeout((function(){e=null}),t.opts.infoTimeout)),t.log("".concat(i," ").concat(o).trim(),"warning")})),this.on("upload",(function(){t.setState({error:null})}));this.on("upload-start",(function(e){e.forEach((function(e){t.emit("upload-started",e)})),function(e){var n=e.filter((function(e){var n=null!=e&&t.getFile(e.id);return n||t.log("Not setting progress for a file that has been removed: ".concat(null==e?void 0:e.id)),n})),r=Object.fromEntries(n.map((function(e){return[e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}}]})));t.patchFilesState(r)}(e)})),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(function(e,n){if(null!=e&&t.getFile(e.id)){var r=t.getFile(e.id).progress;t.setFileState(e.id,{progress:(0,c.Z)((0,c.Z)({},r),{},{postprocess:q(t,$)[$].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:r.bytesTotal}),response:n,uploadURL:n.uploadURL,isPaused:!1}),null==e.size&&t.setFileState(e.id,{size:n.bytesUploaded||r.bytesTotal}),t.calculateTotalProgress()}else t.log("Not setting progress for a file that has been removed: ".concat(null==e?void 0:e.id))})),this.on("preprocess-progress",(function(e,n){null!=e&&t.getFile(e.id)?t.setFileState(e.id,{progress:(0,c.Z)((0,c.Z)({},t.getFile(e.id).progress),{},{preprocess:n})}):t.log("Not setting progress for a file that has been removed: ".concat(null==e?void 0:e.id))})),this.on("preprocess-complete",(function(e){if(null!=e&&t.getFile(e.id)){var n=(0,c.Z)({},t.getState().files);n[e.id]=(0,c.Z)((0,c.Z)({},n[e.id]),{},{progress:(0,c.Z)({},n[e.id].progress)}),delete n[e.id].progress.preprocess,t.setState({files:n})}else t.log("Not setting progress for a file that has been removed: ".concat(null==e?void 0:e.id))})),this.on("postprocess-progress",(function(e,n){null!=e&&t.getFile(e.id)?t.setFileState(e.id,{progress:(0,c.Z)((0,c.Z)({},t.getState().files[e.id].progress),{},{postprocess:n})}):t.log("Not setting progress for a file that has been removed: ".concat(null==e?void 0:e.id))})),this.on("postprocess-complete",(function(e){if(null!=e&&t.getFile(e.id)){var n=(0,c.Z)({},t.getState().files);n[e.id]=(0,c.Z)((0,c.Z)({},n[e.id]),{},{progress:(0,c.Z)({},n[e.id].progress)}),delete n[e.id].progress.postprocess,t.setState({files:n})}else t.log("Not setting progress for a file that has been removed: ".concat(null==e?void 0:e.id))})),this.on("restored",(function(){t.calculateTotalProgress()})),this.on("dashboard:file-edit-complete",(function(e){e&&q(t,ee)[ee](e)})),"undefined"!==typeof window&&window.addEventListener&&(window.addEventListener("online",q(this,se)[se]),window.addEventListener("offline",q(this,se)[se]),setTimeout(q(this,se)[se],3e3))}function ke(e,t){void 0===t&&(t={});var n=t.forceAllowNewUpload,r=void 0!==n&&n,i=this.getState(),o=i.allowNewUpload,a=i.currentUploads;if(!o&&!r)throw new Error("Cannot create a new upload: already uploading.");var s=function(){for(var e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;t--;)e+=v[64*Math.random()|0];return e}();return this.emit("upload",{id:s,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:(0,c.Z)((0,c.Z)({},a),{},(0,u.Z)({},s,{fileIDs:e,step:0,result:{}}))}),s}function _e(e){return this.getState().currentUploads[e]}function Pe(e){var t=(0,c.Z)({},this.getState().currentUploads);delete t[e],this.setState({currentUploads:t})}function Ze(e){return Se.apply(this,arguments)}function Se(){return(Se=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,a,l,p,h,d,f,v,y=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(n=function(){return y.getState().currentUploads[t]})(),o=[].concat((0,s.Z)(q(this,X)[X]),(0,s.Z)(q(this,Q)[Q]),(0,s.Z)(q(this,$)[$])),e.prev=3,a=i.step||0;case 5:if(!(a<o.length)){e.next=17;break}if(i){e.next=8;break}return e.abrupt("break",17);case 8:return l=o[a],this.setState({currentUploads:(0,c.Z)((0,c.Z)({},this.getState().currentUploads),{},(0,u.Z)({},t,(0,c.Z)((0,c.Z)({},i),{},{step:a})))}),p=i.fileIDs,e.next=13,l(p,t);case 13:i=n();case 14:a++,e.next=5;break;case 17:e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(3),q(this,ce)[ce](t),e.t0;case 23:if(!i){e.next=31;break}return i.fileIDs.forEach((function(e){var t=y.getFile(e);t&&t.progress.postprocess&&y.emit("postprocess-complete",t)})),h=i.fileIDs.map((function(e){return y.getFile(e)})),d=h.filter((function(e){return!e.error})),f=h.filter((function(e){return e.error})),e.next=30,this.addResultData(t,{successful:d,failed:f,uploadID:t});case 30:i=n();case 31:return i&&(v=i.result,this.emit("complete",v),q(this,ce)[ce](t)),null==v&&this.log("Not setting result for an upload that has been removed: ".concat(t)),e.abrupt("return",v);case 34:case"end":return e.stop()}}),e,this,[[3,19]])})))).apply(this,arguments)}he.VERSION="3.2.0";var Ce=he,Fe=n(97326),xe=n(73856),Oe=n(89377);var Ee=n(72602),Te=n(98339);function Ae(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ue=0;function Re(e){return"__private_"+Ue+++"_"+e}var De=Re("updateUI"),Ne=function(e){(0,U.Z)(n,e);var t=(0,R.Z)(n);function n(){var e;return(0,p.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,Fe.Z)(e),De,{writable:!0,value:void 0}),e}return(0,h.Z)(n,[{key:"getTargetPlugin",value:function(e){var t;if("object"===typeof e&&e instanceof n)t=e;else if("function"===typeof e){var r=e;this.uppy.iteratePlugins((function(e){e instanceof r&&(t=e)}))}return t}},{key:"mount",value:function(e,t){var n,r,i=this,o=t.id,a=(n=e,void 0===r&&(r=document),"string"===typeof n?r.querySelector(n):(0,Oe.Z)(n)?n:null);if(a){this.isTargetDOMEl=!0;var u=document.createElement("div");return u.classList.add("uppy-Root"),Ae(this,De)[De]=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=i,t||(t=Promise.resolve().then((function(){return t=null,e.apply(void 0,(0,s.Z)(n))}))),t}}((function(e){i.uppy.getPlugin(i.id)&&((0,xe.sY)(i.render(e),u),i.afterUpdate())})),this.uppy.log("Installing ".concat(o," to a DOM element '").concat(e,"'")),this.opts.replaceTargetContent&&(a.innerHTML=""),(0,xe.sY)(this.render(this.uppy.getState()),u),this.el=u,a.appendChild(u),u.dir=this.opts.direction||(0,Ee.Z)(u)||"ltr",this.onMount(),this.el}var l=this.getTargetPlugin(e);if(l)return this.uppy.log("Installing ".concat(o," to ").concat(l.id)),this.parent=l,this.el=l.addTarget(t),this.onMount(),this.el;this.uppy.log("Not installing ".concat(o));var c="Invalid target option given to ".concat(o,".");throw c+="function"===typeof e?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(c)}},{key:"update",value:function(e){var t,n;null!=this.el&&(null==(t=(n=Ae(this,De))[De])||t.call(n,e))}},{key:"unmount",value:function(){var e;this.isTargetDOMEl&&(null==(e=this.el)||e.remove());this.onUnmount()}},{key:"onMount",value:function(){}},{key:"onUnmount",value:function(){}}]),n}(Te.Z),Ie=Ne},17861:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(15671),i=n(43144),o=n(97326),a=n(60136),s=n(29388),u=n(3737),l=n(51280),c=n(73856),p=n(11752),h=n(61120),d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toggleCheckbox",value:function(e,t){e.stopPropagation(),e.preventDefault(),t.custom.isSharedDrive||(0,p.Z)((0,h.Z)(n.prototype),"toggleCheckbox",this).call(this,e,t)}}]),n}(n(66966).h),f={strings:{pluginNameGoogleDrive:"Google Drive"}},v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var a;return(0,r.Z)(this,n),(a=t.call(this,e,i)).id=a.opts.id||"GoogleDrive",a.title=a.opts.title||"Google Drive",l.zt.initPlugin((0,o.Z)(a),i),a.title=a.opts.title||"Google Drive",a.icon=function(){return(0,c.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,c.h)("g",{fillRule:"nonzero",fill:"none"},(0,c.h)("path",{d:"M6.663 22.284l.97 1.62c.202.34.492.609.832.804l3.465-5.798H5c0 .378.1.755.302 1.096l1.361 2.278z",fill:"#0066DA"}),(0,c.h)("path",{d:"M16 12.09l-3.465-5.798c-.34.195-.63.463-.832.804l-6.4 10.718A2.15 2.15 0 005 18.91h6.93L16 12.09z",fill:"#00AC47"}),(0,c.h)("path",{d:"M23.535 24.708c.34-.195.63-.463.832-.804l.403-.67 1.928-3.228c.201-.34.302-.718.302-1.096h-6.93l1.474 2.802 1.991 2.996z",fill:"#EA4335"}),(0,c.h)("path",{d:"M16 12.09l3.465-5.798A2.274 2.274 0 0018.331 6h-4.662c-.403 0-.794.11-1.134.292L16 12.09z",fill:"#00832D"}),(0,c.h)("path",{d:"M20.07 18.91h-8.14l-3.465 5.798c.34.195.73.292 1.134.292h12.802c.403 0 .794-.11 1.134-.292L20.07 18.91z",fill:"#2684FC"}),(0,c.h)("path",{d:"M23.497 12.455l-3.2-5.359a2.252 2.252 0 00-.832-.804L16 12.09l4.07 6.82h6.917c0-.377-.1-.755-.302-1.096l-3.188-5.359z",fill:"#FFBA00"})))},a.provider=new l.zt(e,{companionUrl:a.opts.companionUrl,companionHeaders:a.opts.companionHeaders,companionKeysParams:a.opts.companionKeysParams,companionCookiesRule:a.opts.companionCookiesRule,provider:"drive",pluginId:a.id}),a.defaultLocale=f,a.i18nInit(),a.title=a.i18n("pluginNameGoogleDrive"),a.onFirstRender=a.onFirstRender.bind((0,o.Z)(a)),a.render=a.render.bind((0,o.Z)(a)),a}return(0,i.Z)(n,[{key:"install",value:function(){this.view=new d(this,{provider:this.provider});var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.view.tearDown(),this.unmount()}},{key:"onFirstRender",value:function(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder("root","/")])}},{key:"render",value:function(e){return this.view.render(e)}}]),n}(u.di);v.VERSION="3.1.1"},66966:function(e,t,n){"use strict";n.d(t,{h:function(){return Ae}});var r=n(37762),i=n(74165),o=n(15861),a=n(1413),s=n(15671),u=n(43144),l=n(97326),c=n(60136),p=n(29388),h=n(73856),d=n(98737),f=n(20548),v=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).name="TimeoutError",r}return(0,u.Z)(n)}((0,d.Z)(Error)),y=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).name="AbortError",r.message=e,r}return(0,u.Z)(n)}((0,d.Z)(Error)),m=function(e){return void 0===globalThis.DOMException?new y(e):new DOMException(e)},g=function(e){var t=void 0===e.reason?m("This operation was aborted."):e.reason;return t instanceof Error?t:m(t)};function b(e,t,n,r){var s,u=new Promise((function(u,l){if("number"!==typeof t||1!==Math.sign(t))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(t,"`"));if(t!==Number.POSITIVE_INFINITY){if((r=(0,a.Z)({customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout}},r)).signal){var c=r.signal;c.aborted&&l(g(c)),c.addEventListener("abort",(function(){l(g(c))}))}s=r.customTimers.setTimeout.call(void 0,(function(){if("function"!==typeof n){var r="string"===typeof n?n:"Promise timed out after ".concat(t," milliseconds"),i=n instanceof Error?n:new v(r);"function"===typeof e.cancel&&e.cancel(),l(i)}else try{u(n())}catch(o){l(o)}}),t),(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=u,t.next=4,e;case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),l(t.t2);case 11:return t.prev=11,r.customTimers.clearTimeout.call(void 0,s),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}else u(e)}));return u.clear=function(){clearTimeout(s),s=void 0},u}var w,k=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},_=function(){function e(){(0,s.Z)(this,e),w.set(this,[])}return(0,u.Z)(e,[{key:"enqueue",value:function(e,t){var n={priority:(t=(0,a.Z)({priority:0},t)).priority,run:e};if(this.size&&k(this,w,"f")[this.size-1].priority>=t.priority)k(this,w,"f").push(n);else{var r=function(e,t,n){for(var r=0,i=e.length;i>0;){var o=Math.trunc(i/2),a=r+o;n(e[a],t)<=0?(r=++a,i-=o+1):i=o}return r}(k(this,w,"f"),n,(function(e,t){return t.priority-e.priority}));k(this,w,"f").splice(r,0,n)}}},{key:"dequeue",value:function(){var e=k(this,w,"f").shift();return null===e||void 0===e?void 0:e.run}},{key:"filter",value:function(e){return k(this,w,"f").filter((function(t){return t.priority===e.priority})).map((function(e){return e.run}))}},{key:"size",get:function(){return k(this,w,"f").length}}]),e}();w=new WeakMap;var P,Z,S,C,F,x,O,E,T,A,U,R,D,N,I,B,L,M,j,z,q,H,V,W,K,Y,G=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},X=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Q=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n)}((0,d.Z)(Error)),$=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r,i,o,u,c;if((0,s.Z)(this,n),r=t.call(this),P.add((0,l.Z)(r)),Z.set((0,l.Z)(r),void 0),S.set((0,l.Z)(r),void 0),C.set((0,l.Z)(r),0),F.set((0,l.Z)(r),void 0),x.set((0,l.Z)(r),void 0),O.set((0,l.Z)(r),0),E.set((0,l.Z)(r),void 0),T.set((0,l.Z)(r),void 0),A.set((0,l.Z)(r),void 0),U.set((0,l.Z)(r),void 0),R.set((0,l.Z)(r),0),D.set((0,l.Z)(r),void 0),N.set((0,l.Z)(r),void 0),I.set((0,l.Z)(r),void 0),Object.defineProperty((0,l.Z)(r),"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"===typeof(e=(0,a.Z)({carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:_},e)).intervalCap&&e.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null!==(o=null===(i=e.intervalCap)||void 0===i?void 0:i.toString())&&void 0!==o?o:"","` (").concat(typeof e.intervalCap,")"));if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null!==(c=null===(u=e.interval)||void 0===u?void 0:u.toString())&&void 0!==c?c:"","` (").concat(typeof e.interval,")"));return G((0,l.Z)(r),Z,e.carryoverConcurrencyCount,"f"),G((0,l.Z)(r),S,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),G((0,l.Z)(r),F,e.intervalCap,"f"),G((0,l.Z)(r),x,e.interval,"f"),G((0,l.Z)(r),A,new e.queueClass,"f"),G((0,l.Z)(r),U,e.queueClass,"f"),r.concurrency=e.concurrency,r.timeout=e.timeout,G((0,l.Z)(r),I,!0===e.throwOnTimeout,"f"),G((0,l.Z)(r),N,!1===e.autoStart,"f"),r}return(0,u.Z)(n,[{key:"concurrency",get:function(){return X(this,D,"f")},set:function(e){if(!("number"===typeof e&&e>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e,"` (").concat(typeof e,")"));G(this,D,e,"f"),X(this,P,"m",W).call(this)}},{key:"add",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r=this,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},n=(0,a.Z)({timeout:this.timeout,throwOnTimeout:X(this,I,"f")},n),e.abrupt("return",new Promise((function(e,a){X(r,A,"f").enqueue((0,o.Z)((0,i.Z)().mark((function o(){var s,u,l,c,p;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(G(r,R,(u=X(r,R,"f"),++u),"f"),G(r,C,(l=X(r,C,"f"),++l),"f"),i.prev=2,!(null===(s=n.signal)||void 0===s?void 0:s.aborted)){i.next=5;break}throw new Q("The task was aborted.");case 5:return c=t({signal:n.signal}),n.timeout&&(c=b(Promise.resolve(c),n.timeout)),n.signal&&(c=Promise.race([c,X(r,P,"m",K).call(r,n.signal)])),i.next=10,c;case 10:p=i.sent,e(p),r.emit("completed",p),i.next=22;break;case 15:if(i.prev=15,i.t0=i.catch(2),!(i.t0 instanceof v)||n.throwOnTimeout){i.next=20;break}return e(),i.abrupt("return");case 20:a(i.t0),r.emit("error",i.t0);case 22:return i.prev=22,X(r,P,"m",M).call(r),i.finish(22);case 25:case"end":return i.stop()}}),o,null,[[2,15,22,25]])}))),n),r.emit("add"),X(r,P,"m",q).call(r)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAll",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.add(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"start",value:function(){return X(this,N,"f")?(G(this,N,!1,"f"),X(this,P,"m",W).call(this),this):this}},{key:"pause",value:function(){G(this,N,!0,"f")}},{key:"clear",value:function(){G(this,A,new(X(this,U,"f")),"f")}},{key:"onEmpty",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==X(this,A,"f").size){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,X(this,P,"m",Y).call(this,"empty");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSizeLessThan",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(X(this,A,"f").size<t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,X(this,P,"m",Y).call(this,"next",(function(){return X(n,A,"f").size<t}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onIdle",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==X(this,R,"f")||0!==X(this,A,"f").size){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,X(this,P,"m",Y).call(this,"idle");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"size",get:function(){return X(this,A,"f").size}},{key:"sizeBy",value:function(e){return X(this,A,"f").filter(e).length}},{key:"pending",get:function(){return X(this,R,"f")}},{key:"isPaused",get:function(){return X(this,N,"f")}}]),n}(f);Z=new WeakMap,S=new WeakMap,C=new WeakMap,F=new WeakMap,x=new WeakMap,O=new WeakMap,E=new WeakMap,T=new WeakMap,A=new WeakMap,U=new WeakMap,R=new WeakMap,D=new WeakMap,N=new WeakMap,I=new WeakMap,P=new WeakSet,B=function(){return X(this,S,"f")||X(this,C,"f")<X(this,F,"f")},L=function(){return X(this,R,"f")<X(this,D,"f")},M=function(){var e;G(this,R,(e=X(this,R,"f"),--e),"f"),X(this,P,"m",q).call(this),this.emit("next")},j=function(){X(this,P,"m",V).call(this),X(this,P,"m",H).call(this),G(this,T,void 0,"f")},z=function(){var e=this,t=Date.now();if(void 0===X(this,E,"f")){var n=X(this,O,"f")-t;if(!(n<0))return void 0===X(this,T,"f")&&G(this,T,setTimeout((function(){X(e,P,"m",j).call(e)}),n),"f"),!0;G(this,C,X(this,Z,"f")?X(this,R,"f"):0,"f")}return!1},q=function(){if(0===X(this,A,"f").size)return X(this,E,"f")&&clearInterval(X(this,E,"f")),G(this,E,void 0,"f"),this.emit("empty"),0===X(this,R,"f")&&this.emit("idle"),!1;if(!X(this,N,"f")){var e=!X(this,P,"a",z);if(X(this,P,"a",B)&&X(this,P,"a",L)){var t=X(this,A,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&X(this,P,"m",H).call(this),!0)}}return!1},H=function(){var e=this;X(this,S,"f")||void 0!==X(this,E,"f")||(G(this,E,setInterval((function(){X(e,P,"m",V).call(e)}),X(this,x,"f")),"f"),G(this,O,Date.now()+X(this,x,"f"),"f"))},V=function(){0===X(this,C,"f")&&0===X(this,R,"f")&&X(this,E,"f")&&(clearInterval(X(this,E,"f")),G(this,E,void 0,"f")),G(this,C,X(this,Z,"f")?X(this,R,"f"):0,"f"),X(this,P,"m",W).call(this)},W=function(){for(;X(this,P,"m",q).call(this););},K=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.addEventListener("abort",(function(){n(new Q("The task was aborted."))}),{once:!0})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){r.on(t,(function i(){n&&!n()||(r.off(t,i),e())}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var J=n(13829);function ee(){return(0,h.h)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},(0,h.h)("g",{fill:"none","fill-rule":"evenodd"},(0,h.h)("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),(0,h.h)("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),(0,h.h)("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),(0,h.h)("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),(0,h.h)("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),(0,h.h)("path",{d:"M4 4h18v18H4z"})))}var te=function(e){var t=e.pluginName,n=e.pluginIcon,r=e.i18nArray,i=e.handleAuth,o="Google Drive"===t,a=(0,h.h)("span",{className:"uppy-Provider-authTitleName"},t,(0,h.h)("br",null));return(0,h.h)("div",{className:"uppy-Provider-auth"},(0,h.h)("div",{className:"uppy-Provider-authIcon"},n()),(0,h.h)("div",{className:"uppy-Provider-authTitle"},r("authenticateWithTitle",{pluginName:a})),o?(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google",onClick:i,"data-uppy-super-focusable":!0},(0,h.h)(ee,null),r("signInWithGoogle")):(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onClick:i,"data-uppy-super-focusable":!0},r("authenticateWith",{pluginName:t})))},ne=function(e){var t=e.getFolder,n=e.title,r=e.isLast;return(0,h.h)(h.HY,null,(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn",onClick:t},n),r?"":" / ")},re=function(e){var t=[];return e.showBreadcrumbs&&t.push(function(e){var t=e.getFolder,n=e.title,r=e.breadcrumbsIcon,i=e.directories;return(0,h.h)("div",{className:"uppy-Provider-breadcrumbs"},(0,h.h)("div",{className:"uppy-Provider-breadcrumbsIcon"},r),i.map((function(e,r){return(0,h.h)(ne,{key:e.id,getFolder:function(){return t(e.id)},title:0===r?n:e.title,isLast:r+1===i.length})})))}({getFolder:e.getFolder,directories:e.directories,breadcrumbsIcon:e.pluginIcon&&e.pluginIcon(),title:e.title})),t.push(function(e){var t=e.i18n,n=e.logout,r=e.username;return[(0,h.h)("span",{className:"uppy-ProviderBrowser-user",key:"username"},r),(0,h.h)("button",{type:"button",onClick:n,className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout",key:"logout"},t("logOut"))]}({logout:e.logout,username:e.username,i18n:e.i18n})),t},ie=n(42982),oe=n(46123),ae=n(61904);function se(e){return(0,a.Z)((0,a.Z)({},e),{},{type:e.mimeType,extension:e.name?(0,ae.Z)(e.name).extension:null})}var ue=n(70885),le=n(98944),ce="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";function pe(e){var t=e.search,n=e.searchOnInput,r=e.searchTerm,i=e.showButton,o=e.inputLabel,a=e.clearSearchLabel,s=e.buttonLabel,u=e.clearSearch,l=e.inputClassName,c=e.buttonCSSClassName,p=(0,le.eJ)(null!=r?r:""),d=(0,ue.Z)(p,2),f=d[0],v=d[1],y=(0,le.I4)((function(e){e.preventDefault(),t(f)}),[t,f]),m=(0,le.I4)((function(e){var r=e.target.value;v(r),n&&t(r)}),[v,n,t]),g=(0,le.eJ)((function(){var e=document.createElement("form");return e.setAttribute("tabindex","-1"),e.id=function(){for(var e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;t--;)e+=ce[64*Math.random()|0];return e}(),e})),b=(0,ue.Z)(g,1)[0];return(0,le.d4)((function(){return document.body.appendChild(b),b.addEventListener("submit",y),function(){b.removeEventListener("submit",y),document.body.removeChild(b)}}),[b,y]),(0,h.h)(h.HY,null,(0,h.h)("input",{className:"uppy-u-reset ".concat(l),type:"search","aria-label":o,placeholder:o,value:f,onInput:m,form:b.id,"data-uppy-super-focusable":!0}),!i&&(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",class:"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon",width:"12",height:"12",viewBox:"0 0 12 12"},(0,h.h)("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),!i&&f&&(0,h.h)("button",{className:"uppy-u-reset uppy-ProviderBrowser-searchFilterReset",type:"button","aria-label":a,title:a,onClick:function(){v(""),u&&u()}},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19"},(0,h.h)("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))),i&&(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary ".concat(c),type:"submit",form:b.id},s))}var he=function(e){var t=e.cancel,n=e.done,r=e.i18n,i=e.selected;return(0,h.h)("div",{className:"uppy-ProviderBrowser-footer"},(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary",onClick:n,type:"button"},r("selectX",{smart_count:i})),(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:t,type:"button"},r("cancel")))};function de(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58"},(0,h.h)("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function fe(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157"},(0,h.h)("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function ve(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58"},(0,h.h)("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),(0,h.h)("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}var ye=function(e){var t=e.itemIconString;if(null!==t)switch(t){case"file":return(0,h.h)(de,null);case"folder":return(0,h.h)(fe,null);case"video":return(0,h.h)(ve,null);default:var n=e.alt;return(0,h.h)("img",{src:t,alt:n})}};var me=function(e){var t=e.className,n=e.isDisabled,r=e.restrictionError,i=e.isChecked,o=e.title,a=e.itemIconEl,s=e.showTitles,u=e.toggleCheckbox,l=e.recordShiftKeyPress,c=e.id,p=e.children,d=oe("uppy-u-reset","uppy-ProviderBrowserItem-checkbox","uppy-ProviderBrowserItem-checkbox--grid",{"uppy-ProviderBrowserItem-checkbox--is-checked":i});return(0,h.h)("li",{className:t,title:n?null==r?void 0:r.message:null},(0,h.h)("input",{type:"checkbox",className:d,onChange:u,onKeyDown:l,name:"listitem",id:c,checked:i,disabled:n,"data-uppy-super-focusable":!0}),(0,h.h)("label",{htmlFor:c,"aria-label":o,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},a,s&&o,p))};var ge=function(e){var t=e.className,n=e.isDisabled,r=e.restrictionError,i=e.isCheckboxDisabled,o=e.isChecked,a=e.toggleCheckbox,s=e.recordShiftKeyPress,u=e.type,l=e.id,c=e.itemIconEl,p=e.title,d=e.handleFolderClick,f=e.showTitles,v=e.i18n;return(0,h.h)("li",{className:t,title:n?null==r?void 0:r.message:null},i?null:(0,h.h)("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox ".concat(o?"uppy-ProviderBrowserItem-checkbox--is-checked":""),onChange:a,onKeyDown:s,name:"listitem",id:l,checked:o,"aria-label":"file"===u?null:v("allFilesFromFolderNamed",{name:p}),disabled:n,"data-uppy-super-focusable":!0}),"file"===u?(0,h.h)("label",{htmlFor:l,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},(0,h.h)("div",{className:"uppy-ProviderBrowserItem-iconWrap"},c),f&&p):(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner",onClick:d,"aria-label":v("openFolderNamed",{name:p})},(0,h.h)("div",{className:"uppy-ProviderBrowserItem-iconWrap"},c),f&&(0,h.h)("span",null,p)))};function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}var we=function(e){var t=e.author,n=e.getItemIcon,r=e.isChecked,i=e.isDisabled,o=e.viewType,a=n(),s=oe("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--selected":r},{"uppy-ProviderBrowserItem--disabled":i},{"uppy-ProviderBrowserItem--noPreview":"video"===a}),u=(0,h.h)(ye,{itemIconString:a});switch(o){case"grid":return(0,h.h)(me,be({},e,{className:s,itemIconEl:u}));case"list":return(0,h.h)(ge,be({},e,{className:s,itemIconEl:u}));case"unsplash":return(0,h.h)(me,be({},e,{className:s,itemIconEl:u}),(0,h.h)("a",{href:"".concat(t.url,"?utm_source=Companion&utm_medium=referral"),target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author",tabIndex:"-1"},t.name));default:throw new Error("There is no such type ".concat(o))}};var ke=function(e){var t=e.currentSelection,n=e.folders,r=e.files,i=e.uppyFiles,o=e.viewType,a=e.headerComponent,s=e.showBreadcrumbs,u=e.isChecked,l=e.toggleCheckbox,c=e.recordShiftKeyPress,p=e.handleScroll,d=e.showTitles,f=e.i18n,v=e.validateRestrictions,y=e.isLoading,m=e.showSearchFilter,g=e.search,b=e.searchTerm,w=e.clearSearch,k=e.searchOnInput,_=e.searchInputLabel,P=e.clearSearchLabel,Z=e.getNextFolder,S=e.cancel,C=e.done,F=e.columns,x=e.noResultsLabel,O=t.length;return(0,h.h)("div",{className:oe("uppy-ProviderBrowser","uppy-ProviderBrowser-viewType--".concat(o))},a&&(0,h.h)("div",{className:"uppy-ProviderBrowser-header"},(0,h.h)("div",{className:oe("uppy-ProviderBrowser-headerBar",!s&&"uppy-ProviderBrowser-headerBar--simple")},a)),m&&(0,h.h)("div",{class:"uppy-ProviderBrowser-searchFilter"},(0,h.h)(pe,{search:g,searchTerm:b,clearSearch:w,inputLabel:_,clearSearchLabel:P,inputClassName:"uppy-ProviderBrowser-searchFilterInput",searchOnInput:k})),y?(0,h.h)("div",{className:"uppy-Provider-loading"},(0,h.h)("span",null,f("loading"))):n.length||r.length?(0,h.h)("div",{className:"uppy-ProviderBrowser-body"},(0,h.h)("ul",{className:"uppy-ProviderBrowser-list",onScroll:p,role:"listbox",tabIndex:"-1"},n.map((function(e){var t;return we({columns:F,showTitles:d,viewType:o,i18n:f,id:e.id,title:e.name,getItemIcon:function(){return e.icon},isChecked:u(e),toggleCheckbox:function(t){return l(t,e)},recordShiftKeyPress:c,type:"folder",isDisabled:null==(t=u(e))?void 0:t.loading,isCheckboxDisabled:"shared-with-me"===e.id,handleFolderClick:function(){return Z(e)}})})),r.map((function(e){var n=v(se(e),[].concat((0,ie.Z)(i),(0,ie.Z)(t)));return we({id:e.id,title:e.name,author:e.author,getItemIcon:function(){return e.icon},isChecked:u(e),toggleCheckbox:function(t){return l(t,e)},recordShiftKeyPress:c,columns:F,showTitles:d,viewType:o,i18n:f,type:"file",isDisabled:n&&!u(e),restrictionError:n})})))):(0,h.h)("div",{className:"uppy-Provider-empty"},x),O>0&&(0,h.h)(he,{selected:O,done:C,cancel:S,i18n:f}))},_e=function(e){var t=e.i18n,n=e.loading;return(0,h.h)("div",{className:"uppy-Provider-loading"},(0,h.h)("span",null,t("loading")),"string"===typeof n&&(0,h.h)("span",{style:{marginTop:".7em"}},n))},Pe=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"componentWillUnmount",value:function(){(0,this.props.onUnmount)()}},{key:"render",value:function(){var e=this.props.children;return(0,h.bR)(e)[0]}}]),n}(h.wA),Ze=n(37162),Se=n(88170),Ce=function(){function e(t,n){var i=this;(0,s.Z)(this,e),this.filterItems=function(e){var t=i.plugin.getPluginState();return t.filterInput&&""!==t.filterInput?e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.filterInput.toLowerCase())})):e},this.recordShiftKeyPress=function(e){i.isShiftKeyPressed=e.shiftKey},this.toggleCheckbox=function(e,t){e.stopPropagation(),e.preventDefault(),e.currentTarget.focus();var n=i.plugin.getPluginState(),o=n.folders,a=n.files,s=i.filterItems(o.concat(a));if(i.lastCheckbox&&i.isShiftKeyPressed){var u,l=s.indexOf(i.lastCheckbox),c=s.indexOf(t),p=l<c?s.slice(l,c+1):s.slice(c,l+1),h=[],d=(0,r.Z)(p);try{for(d.s();!(u=d.n()).done;){var f=u.value,v=i.plugin.uppy,y=v.validateRestrictions(se(f),[].concat((0,ie.Z)(v.getFiles()),h));y?v.info({message:y.message},"error",v.opts.infoTimeout):h.push(f)}}catch(g){d.e(g)}finally{d.f()}i.plugin.setPluginState({currentSelection:h})}else{i.lastCheckbox=t;var m=i.plugin.getPluginState().currentSelection;i.isChecked(t)?i.plugin.setPluginState({currentSelection:m.filter((function(e){return e.id!==t.id}))}):i.plugin.setPluginState({currentSelection:m.concat([t])})}},this.isChecked=function(e){return i.plugin.getPluginState().currentSelection.some((function(t){return t.id===e.id}))},this.plugin=t,this.provider=n.provider,this.isHandlingScroll=!1,this.preFirstRender=this.preFirstRender.bind(this),this.handleError=this.handleError.bind(this),this.clearSelection=this.clearSelection.bind(this),this.cancelPicking=this.cancelPicking.bind(this)}return(0,u.Z)(e,[{key:"preFirstRender",value:function(){this.plugin.setPluginState({didFirstRender:!0}),this.plugin.onFirstRender()}},{key:"shouldHandleScroll",value:function(e){var t=e.target;return t.scrollHeight-(t.scrollTop+t.offsetHeight)<50&&!this.isHandlingScroll}},{key:"clearSelection",value:function(){this.plugin.setPluginState({currentSelection:[],filterInput:""})}},{key:"cancelPicking",value:function(){this.clearSelection();var e=this.plugin.uppy.getPlugin("Dashboard");e&&e.hideAllPanels()}},{key:"handleError",value:function(e){var t=this.plugin.uppy,n=t.i18n("companionError");t.log(e.toString()),e.isAuthError||t.info({message:n,details:e.toString()},"error",5e3)}},{key:"getTagFile",value:function(e){var t={id:e.id,source:this.plugin.id,data:e,name:e.name||e.id,type:e.mimeType,isRemote:!0,meta:{},body:{fileId:e.id},remote:{companionUrl:this.plugin.opts.companionUrl,url:"".concat(this.provider.fileUrl(e.requestPath)),body:{fileId:e.id},providerOptions:this.provider.opts,providerName:this.provider.name,provider:this.provider.provider}},n=(0,Ze.Z)(t);return n&&(0,Se.Z)(n)&&(t.preview=e.thumbnail),e.author&&(null!=e.author.name&&(t.meta.authorName=String(e.author.name)),e.author.url&&(t.meta.authorUrl=e.author.url)),t}},{key:"setLoading",value:function(e){this.plugin.setPluginState({loading:e})}}]),e}();function Fe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var xe=0;function Oe(e){return"__private_"+xe+++"_"+e}function Ee(e){return"string"===typeof e?new RegExp("^".concat(e,"$")):e instanceof RegExp?e:void 0}var Te=Oe("updateFilesAndFolders"),Ae=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;(0,s.Z)(this,n),i=t.call(this,e,r),Object.defineProperty((0,l.Z)(i),Te,{value:Ue});return i.opts=(0,a.Z)((0,a.Z)({},{viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0}),r),i.filterQuery=i.filterQuery.bind((0,l.Z)(i)),i.clearFilter=i.clearFilter.bind((0,l.Z)(i)),i.getFolder=i.getFolder.bind((0,l.Z)(i)),i.getNextFolder=i.getNextFolder.bind((0,l.Z)(i)),i.logout=i.logout.bind((0,l.Z)(i)),i.handleAuth=i.handleAuth.bind((0,l.Z)(i)),i.handleScroll=i.handleScroll.bind((0,l.Z)(i)),i.donePicking=i.donePicking.bind((0,l.Z)(i)),i.render=i.render.bind((0,l.Z)(i)),i.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[],filterInput:"",isSearchVisible:!1,currentSelection:[]}),i}return(0,u.Z)(n,[{key:"tearDown",value:function(){}},{key:"getFolder",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,a,s,u,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoading(!0),e.prev=1,e.next=4,this.provider.list(t);case 4:r=e.sent,o=[],a=[],u=this.plugin.getPluginState(),l=u.directories.findIndex((function(e){return t===e.id})),s=-1!==l?u.directories.slice(0,l+1):u.directories.concat([{id:t,title:n}]),this.username=r.username||this.username,Fe(this,Te)[Te](r,a,o),this.plugin.setPluginState({directories:s,filterInput:""}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.handleError(e.t0);case 18:return e.prev=18,this.setLoading(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[1,15,18,21]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNextFolder",value:function(e){this.getFolder(e.requestPath,e.name),this.lastCheckbox=void 0}},{key:"logout",value:function(){var e=this;this.provider.logout().then((function(t){if(t.ok){if(!t.revoked){var n=e.plugin.uppy.i18n("companionUnauthorizeHint",{provider:e.plugin.title,url:t.manual_revoke_url});e.plugin.uppy.info(n,"info",7e3)}e.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[],filterInput:""})}})).catch(this.handleError)}},{key:"filterQuery",value:function(e){this.plugin.setPluginState({filterInput:e})}},{key:"clearFilter",value:function(){this.plugin.setPluginState({filterInput:""})}},{key:"handleAuth",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r,o,a,s,u=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.ensurePreAuth();case 2:t=btoa(JSON.stringify({origin:location.origin})),r="@uppy/provider-views=".concat(n.VERSION),o=this.provider.authUrl({state:t,uppyVersions:r}),a=window.open(o,"_blank"),s=function e(t){if(t.source===a){var n,r;n=t.origin,r=u.plugin.opts.companionAllowedHosts,(Array.isArray(r)?r.map(Ee):[Ee(r)]).some((function(e){return(null==e?void 0:e.test(n))||(null==e?void 0:e.test("".concat(n,"/")))}))&&t.source===a||u.plugin.uppy.log("rejecting event from ".concat(t.origin," vs allowed pattern ").concat(u.plugin.opts.companionAllowedHosts));var i="string"===typeof t.data?JSON.parse(t.data):t.data;if(i.error){u.plugin.uppy.log("auth aborted","warning");var o=u.plugin.uppy,s=o.i18n("authAborted");o.info({message:s},"warning",5e3)}else i.token?(a.close(),window.removeEventListener("message",e),u.provider.setAuthToken(i.token),u.preFirstRender()):u.plugin.uppy.log("did not receive token from auth window","error")}else u.plugin.uppy.log("rejecting event from unknown source")},window.addEventListener("message",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleScroll",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.nextPagePath||null,!this.shouldHandleScroll(t)||!n){e.next=17;break}return this.isHandlingScroll=!0,e.prev=3,e.next=6,this.provider.list(n);case 6:r=e.sent,o=this.plugin.getPluginState(),a=o.files,s=o.folders,Fe(this,Te)[Te](r,a,s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.handleError(e.t0);case 14:return e.prev=14,this.isHandlingScroll=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"recursivelyListAllFiles",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,r){var a,s,u,l,c,p=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t;case 1:if(!a){e.next=14;break}return e.next=4,this.provider.list(a);case 4:return s=e.sent,a=s.nextPagePath,u=s.items.filter((function(e){return!e.isFolder})),l=s.items.filter((function(e){return e.isFolder})),r(u),c=l.map(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.add((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.recursivelyListAllFiles(t.requestPath,n,r));case 1:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=12,Promise.all(c);case 12:e.next=1;break;case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"donePicking",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,o,a,s,u,l,c=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setLoading(!0),e.prev=1,t=this.plugin.getPluginState(),n=t.currentSelection,o=[],a=[],s=(0,r.Z)(n),e.prev=6,l=(0,i.Z)().mark((function e(){var t,n,s,l,p,h,d,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=u.value).isFolder){e.next=15;break}return n=t.requestPath,s=t.name,l=!0,p=0,h=new $({concurrency:6}),d=function(e){var t,n=(0,r.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=c.getTagFile(i),s=(0,J.H)(o);c.plugin.uppy.checkIfFileAlreadyExists(s)||(a.push(i),p++,c.setLoading(c.plugin.uppy.i18n("addedNumFiles",{numFiles:p}))),l=!1}}catch(u){n.e(u)}finally{n.f()}},e.next=9,c.recursivelyListAllFiles(n,h,d);case 9:return e.next=11,h.onIdle();case 11:f=l?c.plugin.uppy.i18n("emptyFolderAdded"):0===p?c.plugin.uppy.i18n("folderAlreadyAdded",{folder:s}):c.plugin.uppy.i18n("folderAdded",{smart_count:p,folder:s}),o.push(f),e.next=16;break;case 15:a.push(t);case 16:case"end":return e.stop()}}),e)})),s.s();case 9:if((u=s.n()).done){e.next=13;break}return e.delegateYield(l(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),s.e(e.t1);case 18:return e.prev=18,s.f(),e.finish(18);case 21:this.plugin.uppy.log("Adding remote provider files"),this.plugin.uppy.addFiles(a.map((function(e){return c.getTagFile(e)}))),this.plugin.setPluginState({filterInput:""}),o.forEach((function(e){return c.plugin.uppy.info(e)})),this.clearSelection(),e.next=31;break;case 28:e.prev=28,e.t2=e.catch(1),this.handleError(e.t2);case 31:return e.prev=31,this.setLoading(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[1,28,31,34],[6,15,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(e,t){var n=this;void 0===t&&(t={});var r=this.plugin.getPluginState(),i=r.authenticated,o=r.didFirstRender,s=this.plugin.uppy.i18n;o||this.preFirstRender();var u=(0,a.Z)((0,a.Z)({},this.opts),t),l=this.plugin.getPluginState(),c=l.files,p=l.folders,d=l.filterInput,f=l.loading,v=l.currentSelection,y=this.isChecked,m=this.toggleCheckbox,g=this.recordShiftKeyPress,b=this.filterItems,w=""!==d,k={showBreadcrumbs:u.showBreadcrumbs,getFolder:this.getFolder,directories:this.plugin.getPluginState().directories,pluginIcon:this.plugin.icon,title:this.plugin.title,logout:this.logout,username:this.username,i18n:s},_={isChecked:y,toggleCheckbox:m,recordShiftKeyPress:g,currentSelection:v,files:w?b(c):c,folders:w?b(p):p,username:this.username,getNextFolder:this.getNextFolder,getFolder:this.getFolder,showSearchFilter:u.showFilter,search:this.filterQuery,clearSearch:this.clearFilter,searchTerm:d,searchOnInput:!0,searchInputLabel:s("filter"),clearSearchLabel:s("resetFilter"),noResultsLabel:s("noFilesFound"),logout:this.logout,handleScroll:this.handleScroll,done:this.donePicking,cancel:this.cancelPicking,headerComponent:re(k),title:this.plugin.title,viewType:u.viewType,showTitles:u.showTitles,showBreadcrumbs:u.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:function(){var e;return(e=n.plugin.uppy).validateRestrictions.apply(e,arguments)}};return f?(0,h.h)(Pe,{onUnmount:this.clearSelection},(0,h.h)(_e,{i18n:this.plugin.uppy.i18n,loading:f})):i?(0,h.h)(Pe,{onUnmount:this.clearSelection},(0,h.h)(ke,_)):(0,h.h)(Pe,{onUnmount:this.clearSelection},(0,h.h)(te,{pluginName:this.plugin.title,pluginIcon:this.plugin.icon,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,i18nArray:this.plugin.uppy.i18nArray}))}}]),n}(Ce);function Ue(e,t,n){this.nextPagePath=e.nextPagePath,e.items.forEach((function(e){e.isFolder?n.push(e):t.push(e)})),this.plugin.setPluginState({folders:n,files:t})}function Re(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Ae.VERSION="3.3.0";var De=0;function Ne(e){return"__private_"+De+++"_"+e}var Ie=Ne("updateFilesAndInputMode"),Be=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;(0,s.Z)(this,n),i=t.call(this,e,r),Object.defineProperty((0,l.Z)(i),Ie,{value:Le});return i.opts=(0,a.Z)((0,a.Z)({},{viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1}),r),i.search=i.search.bind((0,l.Z)(i)),i.clearSearch=i.clearSearch.bind((0,l.Z)(i)),i.resetPluginState=i.resetPluginState.bind((0,l.Z)(i)),i.handleScroll=i.handleScroll.bind((0,l.Z)(i)),i.donePicking=i.donePicking.bind((0,l.Z)(i)),i.render=i.render.bind((0,l.Z)(i)),i.defaultState={isInputMode:!0,files:[],folders:[],directories:[],filterInput:"",currentSelection:[],searchTerm:null},i.plugin.setPluginState(i.defaultState),i}return(0,u.Z)(n,[{key:"tearDown",value:function(){}},{key:"resetPluginState",value:function(){this.plugin.setPluginState(this.defaultState)}},{key:"search",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.plugin.getPluginState(),r=n.searchTerm,!t||t!==r){e.next=3;break}return e.abrupt("return");case 3:return this.setLoading(!0),e.prev=4,e.next=7,this.provider.search(t);case 7:o=e.sent,Re(this,Ie)[Ie](o,[]),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.handleError(e.t0);case 14:return e.prev=14,this.setLoading(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[4,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"clearSearch",value:function(){this.plugin.setPluginState({currentSelection:[],files:[],searchTerm:null})}},{key:"handleScroll",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.nextPageQuery||null,!this.shouldHandleScroll(t)||!n){e.next=17;break}return this.isHandlingScroll=!0,e.prev=3,r=this.plugin.getPluginState(),o=r.files,a=r.searchTerm,e.next=7,this.provider.search(a,n);case 7:s=e.sent,Re(this,Ie)[Ie](s,o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.handleError(e.t0);case 14:return e.prev=14,this.isHandlingScroll=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"donePicking",value:function(){var e=this,t=this.plugin.getPluginState().currentSelection;this.plugin.uppy.log("Adding remote search provider files"),this.plugin.uppy.addFiles(t.map((function(t){return e.getTagFile(t)}))),this.resetPluginState()}},{key:"render",value:function(e,t){var n=this;void 0===t&&(t={});var r=this.plugin.getPluginState(),i=r.didFirstRender,o=r.isInputMode,s=r.searchTerm,u=this.plugin.uppy.i18n;i||this.preFirstRender();var l=(0,a.Z)((0,a.Z)({},this.opts),t),c=this.plugin.getPluginState(),p=c.files,d=c.folders,f=c.filterInput,v=c.loading,y=c.currentSelection,m=this.isChecked,g=this.toggleCheckbox,b=this.filterItems,w=""!==f,k={isChecked:m,toggleCheckbox:g,currentSelection:y,files:w?b(p):p,folders:w?b(d):d,handleScroll:this.handleScroll,done:this.donePicking,cancel:this.cancelPicking,showSearchFilter:l.showFilter,search:this.search,clearSearch:this.clearSearch,searchTerm:s,searchOnInput:!1,searchInputLabel:u("search"),clearSearchLabel:u("resetSearch"),noResultsLabel:u("noSearchResults"),title:this.plugin.title,viewType:l.viewType,showTitles:l.showTitles,showFilter:l.showFilter,isLoading:v,showBreadcrumbs:l.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:u,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:function(){var e;return(e=n.plugin.uppy).validateRestrictions.apply(e,arguments)}};return o?(0,h.h)(Pe,{onUnmount:this.resetPluginState},(0,h.h)("div",{className:"uppy-SearchProvider"},(0,h.h)(pe,{search:this.search,clearSelection:this.clearSelection,inputLabel:u("enterTextToSearch"),buttonLabel:u("searchImages"),inputClassName:"uppy-c-textInput uppy-SearchProvider-input",buttonCSSClassName:"uppy-SearchProvider-searchButton",showButton:!0}))):(0,h.h)(Pe,{onUnmount:this.resetPluginState},(0,h.h)(ke,k))}}]),n}(Ce);function Le(e,t){this.nextPageQuery=e.nextPageQuery,e.items.forEach((function(e){t.push(e)})),this.plugin.setPluginState({currentSelection:[],isInputMode:!1,files:t,searchTerm:e.searchedFor})}Be.VERSION="3.3.0"},86757:function(e,t,n){"use strict";n.d(t,{A:function(){return Yr},j6:function(){return Xr},v0:function(){return ei}});var r=n(1413),i=n(15671),o=n(43144),a=n(60136),s=n(29388),u=n(47313),l=n(74165),c=n(15861),p=n(4942),h=n(37762),d=n(97326),f=n(73856),v=n(3737);var y=n(72602),m="error",g="waiting",b="preprocessing",w="uploading",k="postprocessing",_="complete",P=n(46123);function Z(e){for(var t,n,r=[],i=0,o=Object.values(e);i<o.length;i++){var a=o[i].progress,s=a.preprocess,u=a.postprocess;if(null==n&&(s||u)){var l=s||u;t=l.mode,n=l.message}"determinate"===(null==s?void 0:s.mode)&&r.push(s.value),"determinate"===(null==u?void 0:u.mode)&&r.push(u.value)}return{mode:t,message:n,value:r.reduce((function(e,t){return e+t/r.length}),0)}}var S=n(82061),C=n(20138);function F(e){var t,n=(t=e,{hours:Math.floor(t/3600)%24,minutes:Math.floor(t/60)%60,seconds:Math.floor(t%60)}),r=0===n.hours?"":"".concat(n.hours,"h"),i=0===n.minutes?"":"".concat(0===n.hours?n.minutes:" ".concat(n.minutes.toString(10).padStart(2,"0")),"m"),o=0!==n.hours?"":"".concat(0===n.minutes?n.seconds:" ".concat(n.seconds.toString(10).padStart(2,"0")),"s");return"".concat(r).concat(i).concat(o)}var x=function(){return" ".concat("\xb7"," ")};function O(e){var t=e.newFiles,n=e.isUploadStarted,r=e.recoveredState,i=e.i18n,o=e.uploadState,a=e.isSomeGhost,s=e.startUpload,u=P("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":o===g},{"uppy-StatusBar-actionBtn--disabled":a}),l=i(t&&n&&!r?"uploadXNewFiles":"uploadXFiles",{smart_count:t});return(0,f.h)("button",{type:"button",className:u,"aria-label":i("uploadXFiles",{smart_count:t}),onClick:s,disabled:a,"data-uppy-super-focusable":!0},l)}function E(e){var t=e.i18n,n=e.uppy;return(0,f.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:function(){return n.retryAll()},"data-uppy-super-focusable":!0},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},(0,f.h)("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),t("retry"))}function T(e){var t=e.i18n,n=e.uppy;return(0,f.h)("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:function(){return n.cancelAll()},"data-cy":"cancel","data-uppy-super-focusable":!0},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},(0,f.h)("g",{fill:"none",fillRule:"evenodd"},(0,f.h)("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),(0,f.h)("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function A(e){var t=e.isAllPaused,n=e.i18n,r=e.isAllComplete,i=e.resumableUploads,o=e.uppy,a=n(t?"resume":"pause");return(0,f.h)("button",{title:a,"aria-label":a,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:function(){return r?null:i?t?o.resumeAll():o.pauseAll():o.cancelAll()},"data-uppy-super-focusable":!0},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},(0,f.h)("g",{fill:"none",fillRule:"evenodd"},(0,f.h)("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),(0,f.h)("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function U(e){var t=e.i18n,n=e.doneButtonHandler;return(0,f.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:n,"data-uppy-super-focusable":!0},t("done"))}function R(){return(0,f.h)("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},(0,f.h)("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function D(e){var t=e.progress,n=t.value,r=t.mode,i=t.message,o=Math.round(100*n);return(0,f.h)("div",{className:"uppy-StatusBar-content"},(0,f.h)(R,null),"determinate"===r?"".concat(o,"% ").concat("\xb7"," "):"",i)}function N(e){var t=e.i18n,n=e.complete,r=e.numUploads;return(0,f.h)("div",{className:"uppy-StatusBar-statusSecondary"},t("filesUploadedOfTotal",{complete:n,smart_count:r}))}function I(e){var t=e.i18n,n=e.newFiles,r=e.startUpload,i=P("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return(0,f.h)("div",{className:"uppy-StatusBar-statusSecondary"},(0,f.h)("div",{className:"uppy-StatusBar-statusSecondaryHint"},t("xMoreFilesAdded",{smart_count:n})),(0,f.h)("button",{type:"button",className:i,"aria-label":t("uploadXFiles",{smart_count:n}),onClick:r},t("upload")))}var B=S((function(e){var t=e.numUploads,n=e.complete,r=e.totalUploadedSize,i=e.totalSize,o=e.totalETA,a=e.i18n,s=t>1;return(0,f.h)("div",{className:"uppy-StatusBar-statusSecondary"},s&&a("filesUploadedOfTotal",{complete:n,smart_count:t}),(0,f.h)("span",{className:"uppy-StatusBar-additionalInfo"},s&&x(),a("dataUploadedOfTotal",{complete:C(r),total:C(i)}),x(),a("xTimeLeft",{time:F(o)})))}),500,{leading:!0,trailing:!0});function L(e){var t=e.i18n,n=e.supportsUploadProgress,r=e.totalProgress,i=e.showProgressDetails,o=e.isUploadStarted,a=e.isAllComplete,s=e.isAllPaused,u=e.newFiles,l=e.numUploads,c=e.complete,p=e.totalUploadedSize,h=e.totalSize,d=e.totalETA,v=e.startUpload,y=u&&o;if(!o||a)return null;var m=t(s?"paused":"uploading");return(0,f.h)("div",{className:"uppy-StatusBar-content","aria-label":m,title:m},s?null:(0,f.h)(R,null),(0,f.h)("div",{className:"uppy-StatusBar-status"},(0,f.h)("div",{className:"uppy-StatusBar-statusPrimary"},n?"".concat(m,": ").concat(r,"%"):m),s||y||!i?null:n?(0,f.h)(B,{numUploads:l,complete:c,totalUploadedSize:p,totalSize:h,totalETA:d,i18n:t}):(0,f.h)(N,{i18n:t,complete:c,numUploads:l}),y?(0,f.h)(I,{i18n:t,newFiles:u,startUpload:v}):null))}function M(e){var t=e.i18n;return(0,f.h)("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete")},(0,f.h)("div",{className:"uppy-StatusBar-status"},(0,f.h)("div",{className:"uppy-StatusBar-statusPrimary"},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},(0,f.h)("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),t("complete"))))}function j(e){var t=e.error,n=e.i18n,r=e.complete,i=e.numUploads;return(0,f.h)("div",{className:"uppy-StatusBar-content",title:n("uploadFailed")},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},(0,f.h)("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),(0,f.h)("div",{className:"uppy-StatusBar-status"},(0,f.h)("div",{className:"uppy-StatusBar-statusPrimary"},n("uploadFailed"),(0,f.h)("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":n("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:function(){var e="".concat(n("uploadFailed")," \n\n ").concat(t);alert(e)},type:"button"},"?")),(0,f.h)(N,{i18n:n,complete:r,numUploads:i})))}var z=m,q=g,H=b,V=w,W=k,K=_;var Y={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function G(e){var t=0;return e.forEach((function(e){t+=function(e){if(!e.bytesUploaded)return 0;var t=Date.now()-e.uploadStarted;return e.bytesUploaded/(t/1e3)}(e.progress)})),t}function X(e,t,n,r){if(e)return m;if(t)return _;if(n)return g;for(var i=g,o=Object.keys(r),a=0;a<o.length;a++){var s=r[o[a]].progress;if(s.uploadStarted&&!s.uploadComplete)return w;s.preprocess&&i!==w&&(i=b),s.postprocess&&i!==w&&i!==b&&(i=k)}return i}var Q=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o){var a;(0,i.Z)(this,n),(a=t.call(this,e,o)).startUpload=function(){if(!a.uppy.getState().recoveredState)return a.uppy.upload().catch((function(){}));a.uppy.emit("restore-confirmed")},a.id=a.opts.id||"StatusBar",a.title="StatusBar",a.type="progressindicator",a.defaultLocale=Y;return a.opts=(0,r.Z)((0,r.Z)({},{target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null}),o),a.i18nInit(),a.render=a.render.bind((0,d.Z)(a)),a.install=a.install.bind((0,d.Z)(a)),a}return(0,o.Z)(n,[{key:"render",value:function(e){var t=e.capabilities,n=e.files,r=e.allowNewUpload,i=e.totalProgress,o=e.error,a=e.recoveredState,s=this.uppy.getObjectOfFilesPerState(),u=s.newFiles,l=s.startedFiles,c=s.completeFiles,p=s.inProgressNotPausedFiles,h=s.isUploadStarted,d=s.isAllComplete,v=s.isAllErrored,y=s.isAllPaused,m=s.isUploadInProgress,g=s.isSomeGhost,b=a?Object.values(n):u,w=function(e){var t=G(e);if(0===t)return 0;var n=e.reduce((function(e,t){return e+((n=t.progress).bytesTotal-n.bytesUploaded);var n}),0);return Math.round(n/t*10)/10}(p),k=!!t.resumableUploads,_=!1!==t.uploadProgress,S=0,C=0;return l.forEach((function(e){S+=e.progress.bytesTotal||0,C+=e.progress.bytesUploaded||0})),function(e){var t=e.newFiles,n=e.allowNewUpload,r=e.isUploadInProgress,i=e.isAllPaused,o=e.resumableUploads,a=e.error,s=e.hideUploadButton,u=e.hidePauseResumeButton,l=e.hideCancelButton,c=e.hideRetryButton,p=e.recoveredState,h=e.uploadState,d=e.totalProgress,v=e.files,y=e.supportsUploadProgress,m=e.hideAfterFinish,g=e.isSomeGhost,b=e.doneButtonHandler,w=e.isUploadStarted,k=e.i18n,_=e.startUpload,S=e.uppy,C=e.isAllComplete,F=e.showProgressDetails,x=e.numUploads,R=e.complete,N=e.totalSize,I=e.totalETA,B=e.totalUploadedSize,Y=function(){switch(h){case W:case H:var e=Z(v);return"determinate"===e.mode?100*e.value:d;case z:return null;case V:return y?d:null;default:return d}}(),G=function(){if(p)return!1;switch(h){case q:return s||0===t;case K:return m;default:return!1}}(),X=null!=Y?Y:100,Q=!a&&t&&!r&&!i&&n&&!s,$=!l&&h!==q&&h!==K,J=o&&!u&&h===V,ee=a&&!C&&!c,te=b&&h===K,ne=P("uppy-StatusBar-progress",{"is-indeterminate":function(){switch(h){case W:case H:return"indeterminate"===Z(v).mode;case V:return!y;default:return!1}}()}),re=P("uppy-StatusBar","is-".concat(h),{"has-ghosts":g});return(0,f.h)("div",{className:re,"aria-hidden":G},(0,f.h)("div",{className:ne,style:{width:"".concat(X,"%")},role:"progressbar","aria-label":"".concat(X,"%"),"aria-valuetext":"".concat(X,"%"),"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":Y}),function(){switch(h){case H:case W:return(0,f.h)(D,{progress:Z(v)});case K:return(0,f.h)(M,{i18n:k});case z:return(0,f.h)(j,{error:a,i18n:k,numUploads:x,complete:R});case V:return(0,f.h)(L,{i18n:k,supportsUploadProgress:y,totalProgress:d,showProgressDetails:F,isUploadStarted:w,isAllComplete:C,isAllPaused:i,newFiles:t,numUploads:x,complete:R,totalUploadedSize:B,totalSize:N,totalETA:I,startUpload:_});default:return null}}(),(0,f.h)("div",{className:"uppy-StatusBar-actions"},p||Q?(0,f.h)(O,{newFiles:t,isUploadStarted:w,recoveredState:p,i18n:k,isSomeGhost:g,startUpload:_,uploadState:h}):null,ee?(0,f.h)(E,{i18n:k,uppy:S}):null,J?(0,f.h)(A,{isAllPaused:i,i18n:k,isAllComplete:C,resumableUploads:o,uppy:S}):null,$?(0,f.h)(T,{i18n:k,uppy:S}):null,te?(0,f.h)(U,{i18n:k,doneButtonHandler:b}):null))}({error:o,uploadState:X(o,d,a,e.files||{}),allowNewUpload:r,totalProgress:i,totalSize:S,totalUploadedSize:C,isAllComplete:!1,isAllPaused:y,isAllErrored:v,isUploadStarted:h,isUploadInProgress:m,isSomeGhost:g,recoveredState:a,complete:c.length,newFiles:b.length,numUploads:l.length,totalETA:w,files:n,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:k,supportsUploadProgress:_,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})}},{key:"onMount",value:function(){var e=this.el;(0,y.Z)(e)||(e.dir="ltr")}},{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}]),n}(v.di);Q.VERSION="3.1.1";var $=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).ref=(0,f.Vf)(),e}return(0,o.Z)(n,[{key:"componentWillEnter",value:function(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,300)}},{key:"componentWillLeave",value:function(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,300)}},{key:"render",value:function(){var e=this.props.children;return(0,f.h)("div",{className:"uppy-Informer-animated",ref:this.ref},e)}}]),n}(f.wA),J=n(70885),ee=n(45987),te=["childFactory","transitionLeave","transitionName","transitionAppear","transitionEnter","transitionLeaveTimeout","transitionEnterTimeout","transitionAppearTimeout","component"];function ne(e,t){var n;return null!=(n=null==e?void 0:e.key)?n:t}function re(e){for(var t={},n=0;n<e.length;n++){if(null!=e[n])t[ne(e[n],n.toString(36))]=e[n]}return t}function ie(e,t){e=e||{},t=t||{};var n=function(n){return t.hasOwnProperty(n)?t[n]:e[n]},r={},i=[];for(var o in e)t.hasOwnProperty(o)?i.length&&(r[o]=i,i=[]):i.push(o);var a={};for(var s in t){if(r.hasOwnProperty(s))for(var u=0;u<r[s].length;u++){var l=r[s][u];a[r[s][u]]=n(l)}a[s]=n(s)}for(var c=0;c<i.length;c++)a[i[c]]=n(i[c]);return a}var oe=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var o;return(0,i.Z)(this,n),(o=t.call(this,e,r)).refs={},o.state={children:re((0,f.bR)((0,f.bR)(o.props.children))||[])},o.performAppear=o.performAppear.bind((0,d.Z)(o)),o.performEnter=o.performEnter.bind((0,d.Z)(o)),o.performLeave=o.performLeave.bind((0,d.Z)(o)),o}return(0,o.Z)(n,[{key:"componentWillMount",value:function(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}},{key:"componentDidMount",value:function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)}},{key:"componentWillReceiveProps",value:function(e){var t,n=re((0,f.bR)(e.children)||[]),r=this.state.children;for(t in this.setState((function(e){return{children:ie(e.children,n)}})),n)if(n.hasOwnProperty(t)){var i=r&&r.hasOwnProperty(t);n[t]&&i&&this.currentlyTransitioningKeys[t]?(this.keysToEnter.push(t),this.keysToAbortLeave.push(t)):!n[t]||i||this.currentlyTransitioningKeys[t]||this.keysToEnter.push(t)}for(t in r)if(r.hasOwnProperty(t)){var o=n&&n.hasOwnProperty(t);!r[t]||o||this.currentlyTransitioningKeys[t]||this.keysToLeave.push(t)}}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"_finishAbort",value:function(e){var t=this.keysToAbortLeave.indexOf(e);-1!==t&&this.keysToAbortLeave.splice(t,1)}},{key:"performAppear",value:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];null!=t&&t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}},{key:"_handleDoneAppearing",value:function(e){var t=this.refs[e];null!=t&&t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);var n=re((0,f.bR)(this.props.children)||[]);n&&n.hasOwnProperty(e)||this.performLeave(e)}},{key:"performEnter",value:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];null!=t&&t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}},{key:"_handleDoneEntering",value:function(e){var t=this.refs[e];null!=t&&t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);var n=re((0,f.bR)(this.props.children)||[]);n&&n.hasOwnProperty(e)||this.performLeave(e)}},{key:"performLeave",value:function(e){if(-1===this.keysToAbortLeave.indexOf(e)){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];null!=t&&t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}}},{key:"_handleDoneLeaving",value:function(e){if(-1===this.keysToAbortLeave.indexOf(e)){var t=this.refs[e];null!=t&&t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n,r,i=re((0,f.bR)(this.props.children)||[]);if(i&&i.hasOwnProperty(e))this.performEnter(e);else{var o=(n={},r=this.state.children,Object.assign(n,r));delete o[e],this.setState({children:o})}}}},{key:"render",value:function(e,t){var n=this,r=e.childFactory,i=(e.transitionLeave,e.transitionName,e.transitionAppear,e.transitionEnter,e.transitionLeaveTimeout,e.transitionEnterTimeout,e.transitionAppearTimeout,e.component),o=(0,ee.Z)(e,te),a=t.children,s=Object.entries(a).map((function(e){var t=(0,J.Z)(e,2),i=t[0],o=t[1];if(o){var a=function(e,t){var n=e._ptgLinkedRefs||(e._ptgLinkedRefs={});return n[t]||(n[t]=function(n){e.refs[t]=n})}(n,i);return(0,f.Tm)(r(o),{ref:a,key:i})}})).filter(Boolean);return(0,f.h)(i,o,s)}}]),n}(f.wA);oe.defaultProps={component:"span",childFactory:function(e){return e}};var ae=oe,se=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o){var a;(0,i.Z)(this,n),(a=t.call(this,e,o)).render=function(e){return(0,f.h)("div",{className:"uppy uppy-Informer"},(0,f.h)(ae,null,e.info.map((function(e){return(0,f.h)($,{key:e.message},(0,f.h)("p",{role:"alert"},e.message," ",e.details&&(0,f.h)("span",{"aria-label":e.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:function(){return alert("".concat(e.message," \n\n ").concat(e.details))}},"?")))}))))},a.type="progressindicator",a.id=a.opts.id||"Informer",a.title="Informer";return a.opts=(0,r.Z)((0,r.Z)({},{}),o),a}return(0,o.Z)(n,[{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}}]),n}(v.di);se.VERSION="3.0.2";var ue=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function le(e){return e.startsWith("blob:")}var ce=n(88170),pe=n(82963),he=n(42982),de=n(11752),fe=n(61120),ve=n(98737);function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me="undefined"!=typeof self?self:global,ge=(Rt="undefined"!=typeof navigator)&&"undefined"==typeof HTMLImageElement,be=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),we=me.Buffer,ke=!!we,_e=function(e){return void 0!==e};function Pe(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(_e).length)}function Ze(e){var t=new Error(e);throw delete t.stack,t}function Se(e){var t=function(e){var t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}var Ce=function(e){return String.fromCharCode.apply(null,e)},Fe="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0,xe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if((0,i.Z)(this,e),"boolean"==typeof o&&(this.le=o),Array.isArray(t)&&(t=new Uint8Array(t)),0===t)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){void 0===r&&(r=t.byteLength-n);var a=new DataView(t,n,r);this._swapDataView(a)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof e){void 0===r&&(r=t.byteLength-n),(n+=t.byteOffset)+r>t.byteOffset+t.byteLength&&Ze("Creating view outside of available memory in ArrayBuffer");var s=new DataView(t.buffer,n,r);this._swapDataView(s)}else if("number"==typeof t){var u=new DataView(new ArrayBuffer(t));this._swapDataView(u)}else Ze("Invalid input argument for BufferView: "+t)}return(0,o.Z)(e,[{key:"_swapArrayBuffer",value:function(e){this._swapDataView(new DataView(e))}},{key:"_swapBuffer",value:function(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}},{key:"_swapDataView",value:function(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}},{key:"_lengthToEnd",value:function(e){return this.byteLength-e}},{key:"set",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return t instanceof DataView||t instanceof e?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Ze("BufferView.set(): Invalid data argument."),this.toUint8().set(t,n),new r(this,n,t.byteLength)}},{key:"subarray",value:function(t,n){return new e(this,t,n=n||this._lengthToEnd(t))}},{key:"toUint8",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}},{key:"getUint8Array",value:function(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}},{key:"getString",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,r=this.getUint8Array(t,n);return e=r,Fe?Fe.decode(e):ke?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Ce(e)))}},{key:"getLatin1String",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=this.getUint8Array(e,t);return Ce(n)}},{key:"getUnicodeString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=[],r=0;r<t&&e+r<this.byteLength;r+=2)n.push(this.getUint16(e+r));return Ce(n)}},{key:"getInt8",value:function(e){return this.dataView.getInt8(e)}},{key:"getUint8",value:function(e){return this.dataView.getUint8(e)}},{key:"getInt16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt16(e,t)}},{key:"getInt32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt32(e,t)}},{key:"getUint16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint16(e,t)}},{key:"getUint32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint32(e,t)}},{key:"getFloat32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getFloat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getDouble",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getUintBytes",value:function(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}},{key:"getUint",value:function(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}},{key:"toString",value:function(e){return this.dataView.toString(e,this.constructor.name)}},{key:"ensureChunk",value:function(){}}],[{key:"from",value:function(t,n){return t instanceof this&&t.le===n?t:new e(t,void 0,void 0,n)}}]),e}();function Oe(e,t){Ze("".concat(e," '").concat(t,"' was not loaded, try using full build of exifr."))}var Ee=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this)).kind=e,r}return(0,o.Z)(n,[{key:"get",value:function(e,t){return this.has(e)||Oe(this.kind,e),t&&(e in t||function(e,t){Ze("Unknown ".concat(e," '").concat(t,"'."))}(this.kind,e),t[e].enabled||Oe(this.kind,e)),(0,de.Z)((0,fe.Z)(n.prototype),"get",this).call(this,e)}},{key:"keyList",value:function(){return Array.from(this.keys())}}]),n}((0,ve.Z)(Map)),Te=new Ee("file parser"),Ae=new Ee("segment parser"),Ue=new Ee("file reader"),Re=me.fetch;function De(e,t){return(n=e).startsWith("data:")||n.length>1e4?Be(e,t,"base64"):be&&e.includes("://")?Ne(e,t,"url",Me):be?Be(e,t,"fs"):Rt?Ne(e,t,"url",Me):void Ze("Invalid input argument");var n}function Ne(e,t,n,r){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,c.Z)((0,l.Z)().mark((function e(t,n,r,i){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ue.has(r)?Be(t,n,r):i?function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t,n){var r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return r=e.sent,e.abrupt("return",new xe(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,i):void Ze("Parser ".concat(r," is not loaded")));case 1:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}function Be(e,t,n){return Le.apply(this,arguments)}function Le(){return Le=(0,c.Z)((0,l.Z)().mark((function e(t,n,r){var i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new(Ue.get(r))(t,n),e.next=3,i.read();case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)}))),Le.apply(this,arguments)}var Me=function(e){return Re(e).then((function(e){return e.arrayBuffer()}))},je=function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result||new ArrayBuffer)},r.onerror=n,r.readAsArrayBuffer(e)}))},ze=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"tagKeys",get:function(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}},{key:"tagValues",get:function(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}]),n}((0,ve.Z)(Map));function qe(e,t,n){var r,i=new ze,o=(0,h.Z)(n);try{for(o.s();!(r=o.n()).done;){var a=(0,J.Z)(r.value,2),s=a[0],u=a[1];i.set(s,u)}}catch(d){o.e(d)}finally{o.f()}if(Array.isArray(t)){var l,c=(0,h.Z)(t);try{for(c.s();!(l=c.n()).done;){var p=l.value;e.set(p,i)}}catch(d){c.e(d)}finally{c.f()}}else e.set(t,i);return i}function He(e,t,n){var r,i,o=e.get(t),a=(0,h.Z)(n);try{for(a.s();!(i=a.n()).done;)r=i.value,o.set(r[0],r[1])}catch(s){a.e(s)}finally{a.f()}}var Ve=new Map,We=new Map,Ke=new Map,Ye=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Ge=["jfif","xmp","icc","iptc","ihdr"],Xe=["tiff"].concat(Ge),Qe=["ifd0","ifd1","exif","gps","interop"],$e=[].concat((0,he.Z)(Xe),Qe),Je=["makerNote","userComment"],et=["translateKeys","translateValues","reviveValues","multiSegment"],tt=[].concat(et,["sanitize","mergeOutput","silentErrors"]),nt=function(){function e(){(0,i.Z)(this,e)}return(0,o.Z)(e,[{key:"translate",get:function(){return this.translateKeys||this.translateValues||this.reviveValues}}]),e}(),rt=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,r,o,a){var s;if((0,i.Z)(this,n),s=t.call(this),ye((0,d.Z)(s),"enabled",!1),ye((0,d.Z)(s),"skip",new Set),ye((0,d.Z)(s),"pick",new Set),ye((0,d.Z)(s),"deps",new Set),ye((0,d.Z)(s),"translateKeys",!1),ye((0,d.Z)(s),"translateValues",!1),ye((0,d.Z)(s),"reviveValues",!1),s.key=e,s.enabled=r,s.parse=s.enabled,s.applyInheritables(a),s.canBeFiltered=Qe.includes(e),s.canBeFiltered&&(s.dict=Ve.get(e)),void 0!==o)if(Array.isArray(o))s.parse=s.enabled=!0,s.canBeFiltered&&o.length>0&&s.translateTagSet(o,s.pick);else if("object"==typeof o){if(s.enabled=!0,s.parse=!1!==o.parse,s.canBeFiltered){var u=o.pick,l=o.skip;u&&u.length>0&&s.translateTagSet(u,s.pick),l&&l.length>0&&s.translateTagSet(l,s.skip)}s.applyInheritables(o)}else!0===o||!1===o?s.parse=s.enabled=o:Ze("Invalid options argument: ".concat(o));return(0,pe.Z)(s)}return(0,o.Z)(n,[{key:"needed",get:function(){return this.enabled||this.deps.size>0}},{key:"applyInheritables",value:function(e){var t,n,r,i=(0,h.Z)(et);try{for(i.s();!(r=i.n()).done;)void 0!==(n=e[t=r.value])&&(this[t]=n)}catch(o){i.e(o)}finally{i.f()}}},{key:"translateTagSet",value:function(e,t){if(this.dict){var n,r,i,o=this.dict,a=o.tagKeys,s=o.tagValues,u=(0,h.Z)(e);try{for(u.s();!(i=u.n()).done;)"string"==typeof(n=i.value)?(-1===(r=s.indexOf(n))&&(r=a.indexOf(Number(n))),-1!==r&&t.add(Number(a[r]))):t.add(n)}catch(d){u.e(d)}finally{u.f()}}else{var l,c=(0,h.Z)(e);try{for(c.s();!(l=c.n()).done;){var p=l.value;t.add(p)}}catch(d){c.e(d)}finally{c.f()}}}},{key:"finalizeFilters",value:function(){!this.enabled&&this.deps.size>0?(this.enabled=!0,lt(this.pick,this.deps)):this.enabled&&this.pick.size>0&&lt(this.pick,this.deps)}}]),n}(nt),it={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},ot=new Map,at=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this),!0===e?r.setupFromTrue():void 0===e?r.setupFromUndefined():Array.isArray(e)?r.setupFromArray(e):"object"==typeof e?r.setupFromObject(e):Ze("Invalid options argument ".concat(e)),void 0===r.firstChunkSize&&(r.firstChunkSize=Rt?r.firstChunkSizeBrowser:r.firstChunkSizeNode),r.mergeOutput&&(r.ifd1.enabled=!1),r.filterNestedSegmentTags(),r.traverseTiffDependencyTree(),r.checkLoadedPlugins(),r}return(0,o.Z)(n,[{key:"setupFromUndefined",value:function(){var e,t,n=(0,h.Z)(Ye);try{for(n.s();!(t=n.n()).done;)this[e=t.value]=it[e]}catch(l){n.e(l)}finally{n.f()}var r,i=(0,h.Z)(tt);try{for(i.s();!(r=i.n()).done;)this[e=r.value]=it[e]}catch(l){i.e(l)}finally{i.f()}var o,a=(0,h.Z)(Je);try{for(a.s();!(o=a.n()).done;)this[e=o.value]=it[e]}catch(l){a.e(l)}finally{a.f()}var s,u=(0,h.Z)($e);try{for(u.s();!(s=u.n()).done;)this[e=s.value]=new rt(e,it[e],void 0,this)}catch(l){u.e(l)}finally{u.f()}}},{key:"setupFromTrue",value:function(){var e,t,n=(0,h.Z)(Ye);try{for(n.s();!(t=n.n()).done;)this[e=t.value]=it[e]}catch(l){n.e(l)}finally{n.f()}var r,i=(0,h.Z)(tt);try{for(i.s();!(r=i.n()).done;)this[e=r.value]=it[e]}catch(l){i.e(l)}finally{i.f()}var o,a=(0,h.Z)(Je);try{for(a.s();!(o=a.n()).done;)this[e=o.value]=!0}catch(l){a.e(l)}finally{a.f()}var s,u=(0,h.Z)($e);try{for(u.s();!(s=u.n()).done;)this[e=s.value]=new rt(e,!0,void 0,this)}catch(l){u.e(l)}finally{u.f()}}},{key:"setupFromArray",value:function(e){var t,n,r=(0,h.Z)(Ye);try{for(r.s();!(n=r.n()).done;)this[t=n.value]=it[t]}catch(c){r.e(c)}finally{r.f()}var i,o=(0,h.Z)(tt);try{for(o.s();!(i=o.n()).done;)this[t=i.value]=it[t]}catch(c){o.e(c)}finally{o.f()}var a,s=(0,h.Z)(Je);try{for(s.s();!(a=s.n()).done;)this[t=a.value]=it[t]}catch(c){s.e(c)}finally{s.f()}var u,l=(0,h.Z)($e);try{for(l.s();!(u=l.n()).done;)this[t=u.value]=new rt(t,!1,void 0,this)}catch(c){l.e(c)}finally{l.f()}this.setupGlobalFilters(e,void 0,Qe)}},{key:"setupFromObject",value:function(e){var t,n,r=(0,h.Z)((Qe.ifd0=Qe.ifd0||Qe.image,Qe.ifd1=Qe.ifd1||Qe.thumbnail,Object.assign(this,e),Ye));try{for(r.s();!(n=r.n()).done;)this[t=n.value]=ut(e[t],it[t])}catch(d){r.e(d)}finally{r.f()}var i,o=(0,h.Z)(tt);try{for(o.s();!(i=o.n()).done;)this[t=i.value]=ut(e[t],it[t])}catch(d){o.e(d)}finally{o.f()}var a,s=(0,h.Z)(Je);try{for(s.s();!(a=s.n()).done;)this[t=a.value]=ut(e[t],it[t])}catch(d){s.e(d)}finally{s.f()}var u,l=(0,h.Z)(Xe);try{for(l.s();!(u=l.n()).done;)this[t=u.value]=new rt(t,it[t],e[t],this)}catch(d){l.e(d)}finally{l.f()}var c,p=(0,h.Z)(Qe);try{for(p.s();!(c=p.n()).done;)this[t=c.value]=new rt(t,it[t],e[t],this.tiff)}catch(d){p.e(d)}finally{p.f()}this.setupGlobalFilters(e.pick,e.skip,Qe,$e),!0===e.tiff?this.batchEnableWithBool(Qe,!0):!1===e.tiff?this.batchEnableWithUserValue(Qe,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Qe):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Qe)}},{key:"batchEnableWithBool",value:function(e,t){var n,r=(0,h.Z)(e);try{for(r.s();!(n=r.n()).done;){this[n.value].enabled=t}}catch(i){r.e(i)}finally{r.f()}}},{key:"batchEnableWithUserValue",value:function(e,t){var n,r=(0,h.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=t[i];this[i].enabled=!1!==o&&void 0!==o}}catch(a){r.e(a)}finally{r.f()}}},{key:"setupGlobalFilters",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(e&&e.length){var i,o=(0,h.Z)(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;this[a].enabled=!1}}catch(w){o.e(w)}finally{o.f()}var s,u=st(e,n),l=(0,h.Z)(u);try{for(l.s();!(s=l.n()).done;){var c=(0,J.Z)(s.value,2),p=c[0],d=c[1];lt(this[p].pick,d),this[p].enabled=!0}}catch(w){l.e(w)}finally{l.f()}}else if(t&&t.length){var f,v=st(t,n),y=(0,h.Z)(v);try{for(y.s();!(f=y.n()).done;){var m=(0,J.Z)(f.value,2),g=m[0],b=m[1];lt(this[g].skip,b)}}catch(w){y.e(w)}finally{y.f()}}}},{key:"filterNestedSegmentTags",value:function(){var e=this.ifd0,t=this.exif,n=this.xmp,r=this.iptc,i=this.icc;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}},{key:"traverseTiffDependencyTree",value:function(){var e=this,t=this.ifd0,n=this.exif,r=this.gps;this.interop.needed&&(n.deps.add(40965),t.deps.add(40965)),n.needed&&t.deps.add(34665),r.needed&&t.deps.add(34853),this.tiff.enabled=Qe.some((function(t){return!0===e[t].enabled}))||this.makerNote||this.userComment;var i,o=(0,h.Z)(Qe);try{for(o.s();!(i=o.n()).done;){this[i.value].finalizeFilters()}}catch(a){o.e(a)}finally{o.f()}}},{key:"onlyTiff",get:function(){var e=this;return!Ge.map((function(t){return e[t].enabled})).some((function(e){return!0===e}))&&this.tiff.enabled}},{key:"checkLoadedPlugins",value:function(){var e,t=(0,h.Z)(Xe);try{for(t.s();!(e=t.n()).done;){var n=e.value;this[n].enabled&&!Ae.has(n)&&Oe("segment parser",n)}}catch(r){t.e(r)}finally{t.f()}}}],[{key:"useCached",value:function(e){var t=ot.get(e);return void 0!==t||(t=new this(e),ot.set(e,t)),t}}]),n}(nt);function st(e,t){var n,r,i,o,a,s=[],u=(0,h.Z)(t);try{for(u.s();!(a=u.n()).done;){i=a.value;var l,c=(0,h.Z)((n=Ve.get(i),r=[],n));try{for(c.s();!(l=c.n()).done;)o=l.value,(e.includes(o[0])||e.includes(o[1]))&&r.push(o[0])}catch(p){c.e(p)}finally{c.f()}r.length&&s.push([i,r])}}catch(p){u.e(p)}finally{u.f()}return s}function ut(e,t){return void 0!==e?e:void 0!==t?t:void 0}function lt(e,t){var n,r=(0,h.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.add(i)}}catch(o){r.e(o)}finally{r.f()}}ye(at,"default",it);var ct=function(){function e(t){var n=this;(0,i.Z)(this,e),ye(this,"parsers",{}),ye(this,"output",{}),ye(this,"errors",[]),ye(this,"pushToErrors",(function(e){return n.errors.push(e)})),this.options=at.useCached(t)}return(0,o.Z)(e,[{key:"read",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return"string"==typeof e?De(e,t):Rt&&!ge&&e instanceof HTMLImageElement?De(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new xe(e):Rt&&e instanceof Blob?Ne(e,t,"blob",je):void Ze("Invalid input argument")}(t,this.options);case 2:this.file=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setup",value:function(){if(!this.fileParser){var e,t=this.file,n=t.getUint16(0),r=(0,h.Z)(Te);try{for(r.s();!(e=r.n()).done;){var i=(0,J.Z)(e.value,2),o=i[0],a=i[1];if(a.canHandle(t,n))return this.fileParser=new a(this.options,this.file,this.parsers),t[o]=!0}}catch(s){r.e(s)}finally{r.f()}this.file.close&&this.file.close(),Ze("Unknown file format")}}},{key:"parse",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.output,n=this.errors,this.setup(),!this.options.silentErrors){e.next=8;break}return e.next=5,this.executeParsers().catch(this.pushToErrors);case 5:n.push.apply(n,(0,he.Z)(this.fileParser.errors)),e.next=10;break;case 8:return e.next=10,this.executeParsers();case 10:return this.file.close&&this.file.close(),this.options.silentErrors&&n.length>0&&(t.errors=n),e.abrupt("return",Pe(r=t)?void 0:r);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"executeParsers",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n,r=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.output,e.next=3,this.fileParser.parse();case 3:return n=Object.values(this.parsers).map(function(){var e=(0,c.Z)((0,l.Z)().mark((function e(n){var r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.parse();case 2:r=e.sent,n.assignToOutput(t,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.options.silentErrors&&(n=n.map((function(e){return e.catch(r.pushToErrors)}))),e.next=7,Promise.all(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"extractThumbnail",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n,r,i,o,a,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setup(),t=this.options,n=this.file,r=Ae.get("tiff",t),!n.tiff){e.next=6;break}i={start:0,type:"tiff"},e.next=11;break;case 6:if(e.t0=n.jpeg,!e.t0){e.next=11;break}return e.next=10,this.fileParser.getOrFindSegment("tiff");case 10:i=e.sent;case 11:if(void 0!==i){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,this.fileParser.ensureSegmentChunk(i);case 15:return o=e.sent,a=this.parsers.tiff=new r(o,t,n),e.next=19,a.extractThumbnail();case 19:return s=e.sent,e.abrupt("return",(n.close&&n.close(),s));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function pt(e,t){return ht.apply(this,arguments)}function ht(){return ht=(0,c.Z)((0,l.Z)().mark((function e(t,n){var r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new ct(n),e.next=3,r.read(t);case 3:return e.abrupt("return",r.parse());case 4:case"end":return e.stop()}}),e)}))),ht.apply(this,arguments)}var dt=Object.freeze({__proto__:null,parse:pt,Exifr:ct,fileParsers:Te,segmentParsers:Ae,fileReaders:Ue,tagKeys:Ve,tagValues:We,tagRevivers:Ke,createDictionary:qe,extendDictionary:He,fetchUrlAsArrayBuffer:Me,readBlobAsArrayBuffer:je,chunkedProps:Ye,otherSegments:Ge,segments:Xe,tiffBlocks:Qe,segmentsAndBlocks:$e,tiffExtractables:Je,inheritables:et,allFormatters:tt,Options:at}),ft=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;(0,i.Z)(this,e),ye(this,"errors",[]),ye(this,"raw",new Map),ye(this,"handleError",(function(e){if(!n.options.silentErrors)throw e;n.errors.push(e.message)})),this.chunk=this.normalizeInput(t),this.file=o,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}return(0,o.Z)(e,[{key:"normalizeInput",value:function(e){return e instanceof xe?e:new xe(e)}},{key:"translate",value:function(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}},{key:"output",get:function(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}},{key:"translateBlock",value:function(e,t){var n,r=Ke.get(t),i=We.get(t),o=Ve.get(t),a=this.options[t],s=a.reviveValues&&!!r,u=a.translateValues&&!!i,l=a.translateKeys&&!!o,c={},p=(0,h.Z)(e);try{for(p.s();!(n=p.n()).done;){var d=(0,J.Z)(n.value,2),f=d[0],v=d[1];s&&r.has(f)?v=r.get(f)(v):u&&i.has(f)&&(v=this.translateValue(v,i.get(f))),l&&o.has(f)&&(f=o.get(f)||f),c[f]=v}}catch(y){p.e(y)}finally{p.f()}return c}},{key:"translateValue",value:function(e,t){return t[e]||t.DEFAULT||e}},{key:"assignToOutput",value:function(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}},{key:"assignObjectToOutput",value:function(e,t,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[t]?Object.assign(e[t],n):e[t]=n}}],[{key:"findPosition",value:function(e,t){var n=e.getUint16(t+2)+2,r="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,i=t+r,o=n-r;return{offset:t,length:n,headerLength:r,start:i,size:o,end:i+o}}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(e,new at((0,p.Z)({},this.type,t)),e).parse()}}]),e}();function vt(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function yt(e){return e>=224&&e<=239}function mt(e,t,n){var r,i=(0,h.Z)(Ae);try{for(i.s();!(r=i.n()).done;){var o=(0,J.Z)(r.value,2),a=o[0];if(o[1].canHandle(e,t,n))return a}}catch(s){i.e(s)}finally{i.f()}}ye(ft,"headerLength",4),ye(ft,"type",void 0),ye(ft,"multiSegment",!1),ye(ft,"canHandle",(function(){return!1}));var gt=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),ye((0,d.Z)(e),"appSegments",[]),ye((0,d.Z)(e),"jpegSegments",[]),ye((0,d.Z)(e),"unknownSegments",[]),e}return(0,o.Z)(n,[{key:"parse",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findAppSegments();case 2:return e.next=4,this.readSegments(this.appSegments);case 4:this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupSegmentFinderArgs",value:function(e){var t=this;!0===e?(this.findAll=!0,this.wanted=new Set(Ae.keyList())):(e=void 0===e?Ae.keyList().filter((function(e){return t.options[e].enabled})):e.filter((function(e){return t.options[e].enabled&&Ae.has(e)})),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}},{key:"findAppSegments",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n,r,i,o,a,s,u,c,p=this,h=arguments;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:0,n=h.length>1?h[1]:void 0,this.setupSegmentFinderArgs(n),r=this.file,i=this.findAll,o=this.wanted,a=this.remaining,e.t0=!i&&this.file.chunked,!e.t0){e.next=11;break}if(i=Array.from(o).some((function(e){var t=Ae.get(e),n=p.options[e];return t.multiSegment&&n.multiSegment})),e.t1=i,!e.t1){e.next=11;break}return e.next=11,this.file.readWhole();case 11:if(t=this.findAppSegmentsInRange(t,r.byteLength),this.options.onlyTiff||!r.chunked){e.next=30;break}s=!1;case 14:if(!(a.size>0)||s||!r.canReadNextChunk&&!this.unfinishedMultiSegment){e.next=30;break}if(u=r.nextChunkOffset,c=this.appSegments.some((function(e){return!p.file.available(e.offset||e.start,e.length||e.size)})),!(t>u)||c){e.next=22;break}return e.next=19,r.readNextChunk(t);case 19:e.t2=!e.sent,e.next=25;break;case 22:return e.next=24,r.readNextChunk(u);case 24:e.t2=!e.sent;case 25:if(s=e.t2,void 0!==(t=this.findAppSegmentsInRange(t,r.byteLength))){e.next=28;break}return e.abrupt("return");case 28:e.next=14;break;case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findAppSegmentsInRange",value:function(e,t){t-=2;for(var n,r,i,o,a,s,u=this.file,l=this.findAll,c=this.wanted,p=this.remaining,h=this.options;e<t;e++)if(255===u.getUint8(e))if(yt(n=u.getUint8(e+1))){if(r=u.getUint16(e+2),(i=mt(u,e,r))&&c.has(i)&&(a=(o=Ae.get(i)).findPosition(u,e),s=h[i],a.type=i,this.appSegments.push(a),!l&&(o.multiSegment&&s.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||p.delete(i)):p.delete(i),0===p.size)))break;h.recordUnknownSegments&&((a=ft.findPosition(u,e)).marker=n,this.unknownSegments.push(a)),e+=r+1}else if(vt(n)){if(r=u.getUint16(e+2),218===n&&!1!==h.stopAfterSos)return;h.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:n}),e+=r+1}return e}},{key:"mergeMultiSegments",value:function(){var e=this;if(this.appSegments.some((function(e){return e.multiSegment}))){var t=function(e,t){for(var n,r,i,o=new Map,a=0;a<e.length;a++)r=(n=e[a]).type,o.has(r)?i=o.get(r):o.set(r,i=[]),i.push(n);return Array.from(o)}(this.appSegments);this.mergedAppSegments=t.map((function(t){var n=(0,J.Z)(t,2),r=n[0],i=n[1],o=Ae.get(r,e.options);return o.handleMultiSegments?{type:r,chunk:o.handleMultiSegments(i)}:i[0]}))}}},{key:"getSegment",value:function(e){return this.appSegments.find((function(t){return t.type===e}))}},{key:"getOrFindSegment",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getSegment(t),e.t0=void 0===n,!e.t0){e.next=6;break}return e.next=5,this.findAppSegments(0,[t]);case 5:n=this.getSegment(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"canHandle",value:function(e,t){return 65496===t}}]),n}(function(){function e(t,n,r){var o=this;(0,i.Z)(this,e),ye(this,"errors",[]),ye(this,"ensureSegmentChunk",function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.start,r=t.size||65536,!o.file.chunked){e.next=17;break}if(!o.file.available(n,r)){e.next=6;break}t.chunk=o.file.subarray(n,r),e.next=15;break;case 6:return e.prev=6,e.next=9,o.file.readChunk(n,r);case 9:t.chunk=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),Ze("Couldn't read segment: ".concat(JSON.stringify(t),". ").concat(e.t0.message));case 15:e.next=18;break;case 17:o.file.byteLength>n+r?t.chunk=o.file.subarray(n,r):void 0===t.size?t.chunk=o.file.subarray(n):Ze("Segment unreachable: "+JSON.stringify(t));case 18:return e.abrupt("return",t.chunk);case 19:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=n,this.parsers=r}return(0,o.Z)(e,[{key:"injectSegment",value:function(e,t){this.options[e].enabled&&this.createParser(e,t)}},{key:"createParser",value:function(e,t){var n=new(Ae.get(e))(t,this.options,this.file);return this.parsers[e]=n}},{key:"createParsers",value:function(e){var t,n=(0,h.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.type,o=r.chunk,a=this.options[i];if(a&&a.enabled){var s=this.parsers[i];s&&s.append||s||this.createParser(i,o)}}}catch(u){n.e(u)}finally{n.f()}}},{key:"readSegments",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(this.ensureSegmentChunk),e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());ye(gt,"type","jpeg"),Te.set("jpeg",gt);var bt=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],wt=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"parseHeader",value:function(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}},{key:"parseTags",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=this.options[t],i=r.pick,o=r.skip,a=(i=new Set(i)).size>0,s=0===o.size,u=this.chunk.getUint16(e);e+=2;for(var l=0;l<u;l++){var c=this.chunk.getUint16(e);if(a){if(i.has(c)&&(n.set(c,this.parseTag(e,c,t)),i.delete(c),0===i.size))break}else!s&&o.has(c)||n.set(c,this.parseTag(e,c,t));e+=12}return n}},{key:"parseTag",value:function(e,t,n){var r,i=this.chunk,o=i.getUint16(e+2),a=i.getUint32(e+4),s=bt[o];if(s*a<=4?e+=8:e=i.getUint32(e+8),(o<1||o>13)&&Ze("Invalid TIFF value type. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(o,", offset ").concat(e)),e>i.byteLength&&Ze("Invalid TIFF value offset. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(o,", offset ").concat(e," is outside of chunk size ").concat(i.byteLength)),1===o)return i.getUint8Array(e,a);if(2===o)return""===(r=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(r=i.getString(e,a)).trim())?void 0:r;if(7===o)return i.getUint8Array(e,a);if(1===a)return this.parseTagValue(o,e);for(var u=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(o))(a),l=s,c=0;c<a;c++)u[c]=this.parseTagValue(o,e),e+=l;return u}},{key:"parseTagValue",value:function(e,t){var n=this.chunk;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:case 13:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);default:Ze("Invalid tiff type ".concat(e))}}}]),n}(ft),kt=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"parse",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.parseHeader(),t=this.options,e.t0=t.ifd0.enabled,!e.t0){e.next=6;break}return e.next=6,this.parseIfd0Block();case 6:if(e.t1=t.exif.enabled,!e.t1){e.next=10;break}return e.next=10,this.safeParse("parseExifBlock");case 10:if(e.t2=t.gps.enabled,!e.t2){e.next=14;break}return e.next=14,this.safeParse("parseGpsBlock");case 14:if(e.t3=t.interop.enabled,!e.t3){e.next=18;break}return e.next=18,this.safeParse("parseInteropBlock");case 18:if(e.t4=t.ifd1.enabled,!e.t4){e.next=22;break}return e.next=22,this.safeParse("parseThumbnailBlock");case 22:return e.abrupt("return",this.createOutput());case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"safeParse",value:function(e){var t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}},{key:"findIfd0Offset",value:function(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}},{key:"findIfd1Offset",value:function(){if(void 0===this.ifd1Offset){this.findIfd0Offset();var e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}},{key:"parseBlock",value:function(e,t){var n=new Map;return this[t]=n,this.parseTags(e,t,n),n}},{key:"parseIfd0Block",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ifd0){e.next=2;break}return e.abrupt("return");case 2:if(t=this.file,this.findIfd0Offset(),this.ifd0Offset<8&&Ze("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Ze("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(this.ifd0Offset,", file.byteLength: ").concat(t.byteLength)),e.t0=t.tiff,!e.t0){e.next=10;break}return e.next=10,t.ensureChunk(this.ifd0Offset,Se(this.options));case 10:return n=this.parseBlock(this.ifd0Offset,"ifd0"),e.abrupt("return",0!==n.size?(this.exifOffset=n.get(34665),this.interopOffset=n.get(40965),this.gpsOffset=n.get(34853),this.xmp=n.get(700),this.iptc=n.get(33723),this.icc=n.get(34675),this.options.sanitize&&(n.delete(34665),n.delete(40965),n.delete(34853),n.delete(700),n.delete(33723),n.delete(34675)),n):void 0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseExifBlock",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.exif){e.next=2;break}return e.abrupt("return");case 2:if(e.t0=this.ifd0,e.t0){e.next=6;break}return e.next=6,this.parseIfd0Block();case 6:if(void 0!==this.exifOffset){e.next=8;break}return e.abrupt("return");case 8:if(e.t1=this.file.tiff,!e.t1){e.next=12;break}return e.next=12,this.file.ensureChunk(this.exifOffset,Se(this.options));case 12:return t=this.parseBlock(this.exifOffset,"exif"),e.abrupt("return",(this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unpack",value:function(e,t){var n=e.get(t);n&&1===n.length&&e.set(t,n[0])}},{key:"parseGpsBlock",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gps){e.next=2;break}return e.abrupt("return");case 2:if(e.t0=this.ifd0,e.t0){e.next=6;break}return e.next=6,this.parseIfd0Block();case 6:if(void 0!==this.gpsOffset){e.next=8;break}return e.abrupt("return");case 8:return t=this.parseBlock(this.gpsOffset,"gps"),e.abrupt("return",(t&&t.has(2)&&t.has(4)&&(t.set("latitude",_t.apply(void 0,(0,he.Z)(t.get(2)).concat([t.get(1)]))),t.set("longitude",_t.apply(void 0,(0,he.Z)(t.get(4)).concat([t.get(3)])))),t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseInteropBlock",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.interop,!e.t0){e.next=11;break}if(e.t1=this.ifd0,e.t1){e.next=6;break}return e.next=6,this.parseIfd0Block();case 6:if(e.t2=void 0!==this.interopOffset||this.exif,e.t2){e.next=10;break}return e.next=10,this.parseExifBlock();case 10:e.t0=void 0!==this.interopOffset;case 11:if(!e.t0){e.next=13;break}return e.abrupt("return",this.parseBlock(this.interopOffset,"interop"));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseThumbnailBlock",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n=arguments;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],this.ifd1||this.ifd1Parsed||this.options.mergeOutput&&!t){e.next=3;break}return e.abrupt("return",(this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"extractThumbnail",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.headerParsed||this.parseHeader(),e.t0=this.ifd1Parsed,e.t0){e.next=5;break}return e.next=5,this.parseThumbnailBlock(!0);case 5:if(void 0!==this.ifd1){e.next=7;break}return e.abrupt("return");case 7:return t=this.ifd1.get(513),n=this.ifd1.get(514),e.abrupt("return",this.chunk.getUint8Array(t,n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"image",get:function(){return this.ifd0}},{key:"thumbnail",get:function(){return this.ifd1}},{key:"createOutput",value:function(){var e,t,n,r,i={},o=(0,h.Z)(Qe);try{for(o.s();!(r=o.n()).done;)if(!Pe(e=this[t=r.value]))if(n=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if("ifd1"===t)continue;Object.assign(i,n)}else i[t]=n}catch(a){o.e(a)}finally{o.f()}return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}},{key:"assignToOutput",value:function(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(var n=0,r=Object.entries(t);n<r.length;n++){var i=(0,J.Z)(r[n],2),o=i[0],a=i[1];this.assignObjectToOutput(e,o,a)}}}],[{key:"canHandle",value:function(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}}]),n}(wt);function _t(e,t,n,r){var i=e+t/60+n/3600;return"S"!==r&&"W"!==r||(i*=-1),i}ye(kt,"type","tiff"),ye(kt,"headerLength",10),Ae.set("tiff",kt);Object.freeze({__proto__:null,default:dt,Exifr:ct,fileParsers:Te,segmentParsers:Ae,fileReaders:Ue,tagKeys:Ve,tagValues:We,tagRevivers:Ke,createDictionary:qe,extendDictionary:He,fetchUrlAsArrayBuffer:Me,readBlobAsArrayBuffer:je,chunkedProps:Ye,otherSegments:Ge,segments:Xe,tiffBlocks:Qe,segmentsAndBlocks:$e,tiffExtractables:Je,inheritables:et,allFormatters:tt,Options:at,parse:pt});var Pt={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},Pt,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},Pt,{tiff:!1,ifd1:!0,mergeOutput:!1});var Zt=Object.assign({},Pt,{firstChunkSize:4e4,ifd0:[274]});function St(e){return Ct.apply(this,arguments)}function Ct(){return Ct=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new ct(Zt),e.next=3,n.read(t);case 3:return e.next=5,n.parse();case 5:if(!(r=e.sent)||!r.ifd0){e.next=8;break}return e.abrupt("return",r.ifd0[274]);case 8:case"end":return e.stop()}}),e)}))),Ct.apply(this,arguments)}var Ft=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),xt=!0,Ot=!0;if("object"==typeof navigator){var Et=navigator.userAgent;if(Et.includes("iPad")||Et.includes("iPhone")){var Tt=Et.match(/OS (\d+)_(\d+)/);if(Tt){var At=(0,J.Z)(Tt,3),Ut=At[1],Rt=At[2];ge=Number(Ut)+.1*Number(Rt);xt=ge<13.4,Ot=!1}}else if(Et.includes("OS X 10")){var Dt=Et.match(/OS X 10[_.](\d+)/),Nt=(0,J.Z)(Dt,2)[1];xt=Ot=Number(Nt)<15}if(Et.includes("Chrome/")){var It=Et.match(/Chrome\/(\d+)/),Bt=(0,J.Z)(It,2)[1];xt=Ot=Number(Bt)<81}else if(Et.includes("Firefox/")){var Lt=Et.match(/Firefox\/(\d+)/),Mt=(0,J.Z)(Lt,2)[1];xt=Ot=Number(Mt)<77}}function jt(){return jt=(0,c.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(t);case 2:return n=e.sent,e.abrupt("return",Object.assign({canvas:xt,css:Ot},Ft[n]));case 4:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}var zt=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),ye((0,d.Z)(e),"ranges",new qt),0!==e.byteLength&&e.ranges.add(0,e.byteLength),e}return(0,o.Z)(n,[{key:"_tryExtend",value:function(e,t,n){if(0===e&&0===this.byteLength&&n){var r=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(r)}else{var i=e+t;if(i>this.byteLength){var o=this._extend(i).dataView;this._swapDataView(o)}}}},{key:"_extend",value:function(e){var t;t=ke?we.allocUnsafe(e):new Uint8Array(e);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}},{key:"subarray",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||this._lengthToEnd(e),r&&this._tryExtend(e,t),this.ranges.add(e,t),(0,de.Z)((0,fe.Z)(n.prototype),"subarray",this).call(this,e,t)}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r&&this._tryExtend(t,e.byteLength,e);var i=(0,de.Z)((0,fe.Z)(n.prototype),"set",this).call(this,e,t);return this.ranges.add(t,i.byteLength),i}},{key:"ensureChunk",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t,n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.chunked,!e.t0){e.next=6;break}if(e.t1=this.ranges.available(t,n),e.t1){e.next=6;break}return e.next=6,this.readChunk(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"available",value:function(e,t){return this.ranges.available(e,t)}}]),n}(xe),qt=function(){function e(){(0,i.Z)(this,e),ye(this,"list",[])}return(0,o.Z)(e,[{key:"length",get:function(){return this.list.length}},{key:"add",value:function(e,t){var n=e+t,r=this.list.filter((function(t){return Ht(e,t.offset,n)||Ht(e,t.end,n)}));if(r.length>0){e=Math.min.apply(Math,[e].concat((0,he.Z)(r.map((function(e){return e.offset}))))),n=Math.max.apply(Math,[n].concat((0,he.Z)(r.map((function(e){return e.end}))))),t=n-e;var i=r.shift();i.offset=e,i.length=t,i.end=n,this.list=this.list.filter((function(e){return!r.includes(e)}))}else this.list.push({offset:e,length:t,end:n})}},{key:"available",value:function(e,t){var n=e+t;return this.list.some((function(t){return t.offset<=e&&n<=t.end}))}}]),e}();function Ht(e,t,n){return e<=t&&t<=n}var Vt=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var o;return(0,i.Z)(this,n),o=t.call(this,0),ye((0,d.Z)(o),"chunksRead",0),o.input=e,o.options=r,o}return(0,o.Z)(n,[{key:"readWhole",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.chunked=!1,e.next=3,this.readChunk(this.nextChunkOffset);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readChunked",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.chunked=!0,e.next=3,this.readChunk(0,this.options.firstChunkSize);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readNextChunk",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n,r,i=arguments;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:this.nextChunkOffset,!this.fullyRead){e.next=3;break}return e.abrupt("return",(this.chunksRead++,!1));case 3:return n=this.options.chunkSize,e.next=6,this.readChunk(t,n);case 6:return r=e.sent,e.abrupt("return",!!r&&r.byteLength===n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readChunk",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t,n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chunksRead++,0===(n=this.safeWrapAddress(t,n))){e.next=2;break}return e.abrupt("return",this._readChunk(t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"safeWrapAddress",value:function(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}},{key:"nextChunkOffset",get:function(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}},{key:"canReadNextChunk",get:function(){return this.chunksRead<this.options.chunkLimit}},{key:"fullyRead",get:function(){return void 0!==this.size&&this.nextChunkOffset===this.size}},{key:"read",value:function(){return this.options.chunked?this.readChunked():this.readWhole()}},{key:"close",value:function(){}}]),n}(zt);Ue.set("blob",function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"readWhole",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.chunked=!1,e.next=3,je(this.input);case 3:t=e.sent,this._swapArrayBuffer(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readChunked",value:function(){return this.chunked=!0,this.size=this.input.size,(0,de.Z)((0,fe.Z)(n.prototype),"readChunked",this).call(this)}},{key:"_readChunk",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t,n){var r,i,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?t+n:void 0,i=this.input.slice(t,r),e.next=4,je(i);case 4:return o=e.sent,e.abrupt("return",this.set(o,t,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Vt));var Wt={strings:{generatingThumbnails:"Generating thumbnails..."}};function Kt(e,t,n){try{e.getContext("2d").getImageData(0,0,1,1)}catch(r){if(18===r.code)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise((function(r){e.toBlob(r,t,n)})).then((function(e){if(null===e)throw new Error("cannot read image, probably an svg with external resources");return e})):Promise.resolve().then((function(){return function(e,t,n){var r,i,o,a=ue.exec(e),s=null!=(r=null!=(i=t.mimeType)?i:null==a?void 0:a[1])?r:"plain/text";if(null!=a[2]){for(var u=atob(decodeURIComponent(a[3])),l=new Uint8Array(u.length),c=0;c<u.length;c++)l[c]=u.charCodeAt(c);o=[l]}else o=[decodeURIComponent(a[3])];return n?new File(o,t.name||"",{type:s}):new Blob(o,{type:s})}(e.toDataURL(t,n),{})})).then((function(e){if(null===e)throw new Error("could not extract blob, probably an old browser");return e}))}var Yt=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o){var a;(0,i.Z)(this,n),(a=t.call(this,e,o)).onFileAdded=function(e){!e.preview&&e.data&&(0,ce.Z)(e.type)&&!e.isRemote&&a.addToQueue(e.id)},a.onCancelRequest=function(e){var t=a.queue.indexOf(e.id);-1!==t&&a.queue.splice(t,1)},a.onFileRemoved=function(e){var t=a.queue.indexOf(e.id);-1!==t&&a.queue.splice(t,1),e.preview&&le(e.preview)&&URL.revokeObjectURL(e.preview)},a.onRestored=function(){a.uppy.getFiles().filter((function(e){return e.isRestored})).forEach((function(e){e.preview&&!le(e.preview)||a.addToQueue(e.id)}))},a.onAllFilesRemoved=function(){a.queue=[]},a.waitUntilAllProcessed=function(e){e.forEach((function(e){var t=a.uppy.getFile(e);a.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:a.i18n("generatingThumbnails")})}));var t=function(){e.forEach((function(e){var t=a.uppy.getFile(e);a.uppy.emit("preprocess-complete",t)}))};return new Promise((function(e){a.queueProcessing?a.uppy.once("thumbnail:all-generated",(function(){t(),e()})):(t(),e())}))},a.type="modifier",a.id=a.opts.id||"ThumbnailGenerator",a.title="Thumbnail Generator",a.queue=[],a.queueProcessing=!1,a.defaultThumbnailDimension=200,a.thumbnailType=a.opts.thumbnailType||"image/jpeg",a.defaultLocale=Wt;if(a.opts=(0,r.Z)((0,r.Z)({},{thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1}),o),a.i18nInit(),a.opts.lazy&&a.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.");return a}return(0,o.Z)(n,[{key:"createThumbnail",value:function(e,t,n){var r=this,i=URL.createObjectURL(e.data),o=new Promise((function(e,t){var n=new Image;n.src=i,n.addEventListener("load",(function(){URL.revokeObjectURL(i),e(n)})),n.addEventListener("error",(function(e){URL.revokeObjectURL(i),t(e.error||new Error("Could not create thumbnail"))}))})),a=function(e){return jt.apply(this,arguments)}(e.data).catch((function(){return 1}));return Promise.all([o,a]).then((function(e){var i=(0,J.Z)(e,2),o=i[0],a=i[1],s=r.getProportionalDimensions(o,t,n,a.deg),u=function(e,t){var n=e.width,r=e.height;90!==t.deg&&270!==t.deg||(n=e.height,r=e.width);var i=document.createElement("canvas");i.width=n,i.height=r;var o=i.getContext("2d");return o.translate(n/2,r/2),t.canvas&&(o.rotate(t.rad),o.scale(t.scaleX,t.scaleY)),o.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),i}(o,a);return Kt(r.resizeImage(u,s.width,s.height),r.thumbnailType,80)})).then((function(e){return URL.createObjectURL(e)}))}},{key:"getProportionalDimensions",value:function(e,t,n,r){var i=e.width/e.height;return 90!==r&&270!==r||(i=e.height/e.width),null!=t?{width:t,height:Math.round(t/i)}:null!=n?{width:Math.round(n*i),height:n}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/i)}}},{key:"resizeImage",value:function(e,t,n){var r=function(e){var t=e.width/e.height,n=5e6,r=4096,i=Math.floor(Math.sqrt(n*t)),o=Math.floor(n/Math.sqrt(n*t));if(i>r&&(i=r,o=Math.round(i/t)),o>r&&(o=r,i=Math.round(t*o)),e.width>i){var a=document.createElement("canvas");return a.width=i,a.height=o,a.getContext("2d").drawImage(e,0,0,i,o),a}return e}(e),i=Math.ceil(Math.log2(r.width/t));i<1&&(i=1);for(var o=t*Math.pow(2,i-1),a=n*Math.pow(2,i-1);i--;){var s=document.createElement("canvas");s.width=o,s.height=a,s.getContext("2d").drawImage(r,0,0,o,a),r=s,o=Math.round(o/2),a=Math.round(a/2)}return r}},{key:"setPreviewURL",value:function(e,t){this.uppy.setFileState(e,{preview:t})}},{key:"addToQueue",value:function(e){this.queue.push(e),!1===this.queueProcessing&&this.processQueue()}},{key:"processQueue",value:function(){var e=this;if(this.queueProcessing=!0,this.queue.length>0){var t=this.uppy.getFile(this.queue.shift());return t?this.requestThumbnail(t).catch((function(){})).then((function(){return e.processQueue()})):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}},{key:"requestThumbnail",value:function(e){var t=this;return(0,ce.Z)(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then((function(n){t.setPreviewURL(e.id,n),t.uppy.log("[ThumbnailGenerator] Generated thumbnail for ".concat(e.id)),t.uppy.emit("thumbnail:generated",t.uppy.getFile(e.id),n)})).catch((function(n){t.uppy.log("[ThumbnailGenerator] Failed thumbnail for ".concat(e.id,":"),"warning"),t.uppy.log(n,"warning"),t.uppy.emit("thumbnail:error",t.uppy.getFile(e.id),n)})):Promise.resolve()}},{key:"install",value:function(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}},{key:"uninstall",value:function(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}]),n}(v.di);Yt.VERSION="3.0.3";var Gt=n(89377);function Xt(e){if("string"===typeof e){var t=document.querySelectorAll(e);return 0===t.length?null:Array.from(t)}return"object"===typeof e&&(0,Gt.Z)(e)?[e]:null}var Qt=n(28800);function $t(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Jt(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Jt(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Jt=function(e){this.s=e,this.n=e.next},Jt.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Jt(e)}function en(e,t){this.v=e,this.k=t}function tn(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof en;Promise.resolve(s?a.v:a).then((function(n){if(s){var u="return"===t?"return":"next";if(!a.k||n.done)return r(u,n);n=e[u](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(u){i("throw",u)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function nn(e){return function(){return new tn(e.apply(this,arguments))}}function rn(e){return new en(e,0)}function on(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new en(r=new Promise((function(n){n(e[t](r))})),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function an(e,t,n,r){var i=r.onSuccess;e.readEntries((function(r){var o=[].concat((0,he.Z)(t),(0,he.Z)(r));r.length?queueMicrotask((function(){an(e,o,n,{onSuccess:i})})):i(o)}),(function(e){n(e),i(t)}))}function sn(e,t){return null==e?e:{kind:e.isFile?"file":e.isDirectory?"directory":void 0,name:e.name,getFile:function(){return new Promise((function(t,n){return e.file(t,n)}))},values:function(){return nn((0,l.Z)().mark((function n(){var r,i;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.createReader(),n.next=3,rn(new Promise((function(e){an(r,[],t,{onSuccess:function(n){return e(n.map((function(e){return sn(e,t)})))}})})));case 3:return i=n.sent,n.delegateYield(on($t(i)),"t0",5);case 5:case"end":return n.stop()}}),n)})))()}}}function un(e,t,n){return ln.apply(this,arguments)}function ln(){return(ln=nn((0,l.Z)().mark((function e(t,n,r){var i,o,a,s,u,c,p;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r=void 0),"file"!==t.kind){e.next=16;break}return e.next=4,rn(t.getFile());case 4:if(null==(i=e.sent)){e.next=11;break}return i.relativePath=n?"".concat(n,"/").concat(t.name):null,e.next=9,i;case 9:e.next=14;break;case 11:if(null==r){e.next=14;break}return e.next=14,r;case 14:e.next=50;break;case 16:if("directory"!==t.kind){e.next=47;break}o=!1,a=!1,e.prev=19,u=$t(t.values());case 21:return e.next=23,rn(u.next());case 23:if(!(o=!(c=e.sent).done)){e.next=29;break}return p=c.value,e.delegateYield(on($t(un(p,"".concat(n,"/").concat(t.name)))),"t0",26);case 26:o=!1,e.next=21;break;case 29:e.next=35;break;case 31:e.prev=31,e.t1=e.catch(19),a=!0,s=e.t1;case 35:if(e.prev=35,e.prev=36,!o||null==u.return){e.next=40;break}return e.next=40,rn(u.return());case 40:if(e.prev=40,!a){e.next=43;break}throw s;case 43:return e.finish(40);case 44:return e.finish(35);case 45:e.next=50;break;case 47:if(null==r){e.next=50;break}return e.next=50,r;case 50:case"end":return e.stop()}}),e,null,[[19,31,35,45],[36,,40,44]])})))).apply(this,arguments)}function cn(e,t){return pn.apply(this,arguments)}function pn(){return pn=nn((0,l.Z)().mark((function e(t,n){var r,i,o,a,s,u;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn(Promise.all(Array.from(t.items,function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var r,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return"function"===typeof t.getAsEntry?t.getAsEntry():t.webkitGetAsEntry()},null!=r||(r=sn(i(),n)),e.abrupt("return",{fileSystemHandle:r,lastResortFile:t.getAsFile()});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 2:r=e.sent,i=(0,h.Z)(r),e.prev=4,i.s();case 6:if((o=i.n()).done){e.next=28;break}if(a=o.value,s=a.lastResortFile,null==(u=a.fileSystemHandle)){e.next=23;break}return e.prev=9,e.delegateYield(on($t(un(u,"",s))),"t0",11);case 11:e.next=21;break;case 13:if(e.prev=13,e.t1=e.catch(9),null==s){e.next=20;break}return e.next=18,s;case 18:e.next=21;break;case 20:n(e.t1);case 21:e.next=26;break;case 23:if(null==s){e.next=26;break}return e.next=26,s;case 26:e.next=6;break;case 28:e.next=33;break;case 30:e.prev=30,e.t2=e.catch(4),i.e(e.t2);case 33:return e.prev=33,i.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[4,30,33,36],[9,13]])}))),pn.apply(this,arguments)}function hn(e){var t=(0,Qt.Z)(e.files);return Promise.resolve(t)}function dn(e,t){return fn.apply(this,arguments)}function fn(){return(fn=(0,c.Z)((0,l.Z)().mark((function e(t,n){var r,i,o,a,s,u,c,p,h;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(void 0===n?{}:n).logDropError,i=void 0===r?function(){}:r,e.prev=1,o=[],a=!1,s=!1,e.prev=5,c=$t(cn(t,i));case 7:return e.next=9,c.next();case 9:if(!(a=!(p=e.sent).done)){e.next=15;break}h=p.value,o.push(h);case 12:a=!1,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),s=!0,u=e.t0;case 21:if(e.prev=21,e.prev=22,!a||null==c.return){e.next=26;break}return e.next=26,c.return();case 26:if(e.prev=26,!s){e.next=29;break}throw u;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.abrupt("return",o);case 34:return e.prev=34,e.t1=e.catch(1),e.abrupt("return",hn(t));case 37:case"end":return e.stop()}}),e,null,[[1,34],[5,17,21,31],[22,,26,30]])})))).apply(this,arguments)}tn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},tn.prototype.next=function(e){return this._invoke("next",e)},tn.prototype.throw=function(e){return this._invoke("throw",e)},tn.prototype.return=function(e){return this._invoke("return",e)};var vn="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",yn=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=e;n--;)t+=vn[64*Math.random()|0];return t},mn=n(16912),gn=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function bn(e,t){if(t){var n=e.querySelector('[data-uppy-paneltype="'.concat(t,'"]'));if(n)return n}return e}function wn(e,t){var n=t[0];n&&(n.focus(),e.preventDefault())}function kn(e,t,n){var r=bn(n,t),i=(0,Qt.Z)(r.querySelectorAll(gn)),o=i.indexOf(document.activeElement);!function(e){return e.contains(document.activeElement)}(r)?wn(e,i):e.shiftKey&&0===o?function(e,t){var n=t[t.length-1];n&&(n.focus(),e.preventDefault())}(e,i):e.shiftKey||o!==i.length-1||wn(e,i)}var _n=n(80936);function Pn(){var e=document.body;return"draggable"in e&&"ondragstart"in e&&"ondrop"in e&&("FormData"in window&&"FileReader"in window)}var Zn=n(98944),Sn=n(89400);function Cn(e){var t={color:"#838999",icon:(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,f.h)("g",{fill:"#A7AFB7",fillRule:"nonzero"},(0,f.h)("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),(0,f.h)("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))};if(!e)return t;var n=e.split("/")[0],r=e.split("/")[1];if("text"===n)return{color:"#5a5e69",icon:(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,f.h)("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))};if("image"===n)return{color:"#686de0",icon:(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},(0,f.h)("g",{fill:"#686DE0",fillRule:"evenodd"},(0,f.h)("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),(0,f.h)("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),(0,f.h)("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))};if("audio"===n)return{color:"#068dbb",icon:(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,f.h)("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))};if("video"===n)return{color:"#19af67",icon:(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,f.h)("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))};if("application"===n&&"pdf"===r)return{color:"#e25149",icon:(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,f.h)("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))};return"application"===n&&-1!==["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(r)?{color:"#00C469",icon:(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},(0,f.h)("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}:t}function Fn(e){var t=e.file;if(t.preview)return(0,f.h)("img",{className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});var n=Cn(t.type),r=n.color,i=n.icon;return(0,f.h)("div",{className:"uppy-Dashboard-Item-previewIconWrap"},(0,f.h)("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:r}},i),(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},(0,f.h)("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}function xn(e){var t=e.file,n=e.toggleFileCard,r=e.i18n,i=e.metaFields,o=t.missingRequiredMetaFields;if(null==o||!o.length)return null;var a=o.map((function(e){return function(e,t){var n=("function"===typeof t?t():t).filter((function(t){return t.id===e}));return n[0].name}(e,i)})).join(", ");return(0,f.h)("div",{className:"uppy-Dashboard-Item-errorMessage"},r("missingRequiredMetaFields",{smart_count:o.length,fields:a})," ",(0,f.h)("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:function(){return n(!0,t.id)}},r("editFile")))}function On(e){var t=e.file,n=e.i18n,r=e.toggleFileCard,i=e.metaFields,o=e.showLinkToFileUploadResult,a=t.preview?"rgba(255, 255, 255, 0.5)":Cn(e.file.type).color;return(0,f.h)("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:a}},o&&t.uploadURL&&(0,f.h)("a",{className:"uppy-Dashboard-Item-previewLink",href:t.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":t.meta.name},(0,f.h)("span",{hidden:!0},t.meta.name)),(0,f.h)(Fn,{file:t}),(0,f.h)(xn,{file:t,i18n:n,toggleFileCard:r,metaFields:i}))}function En(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function Tn(e){return(0,f.h)("div",{className:"uppy-Dashboard-Item-progress"},(0,f.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":En(e),title:En(e),onClick:function(){return function(e){e.isUploaded||(!e.error||e.hideRetryButton?e.resumableUploads&&!e.hidePauseResumeButton?e.uppy.pauseResume(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.uppy.removeFile(e.file.id):e.uppy.retryUpload(e.file.id))}(e)}},e.children))}function An(e){var t=e.children;return(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},t)}function Un(e){var t=e.progress,n=2*Math.PI*15;return(0,f.h)("g",null,(0,f.h)("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),(0,f.h)("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":n,"stroke-dashoffset":n-n/100*t}))}function Rn(e){return e.file.progress.uploadStarted?e.isUploaded?(0,f.h)("div",{className:"uppy-Dashboard-Item-progress"},(0,f.h)("div",{className:"uppy-Dashboard-Item-progressIndicator"},(0,f.h)(An,null,(0,f.h)("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),(0,f.h)("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):e.recoveredState?void 0:e.error&&!e.hideRetryButton?(0,f.h)(Tn,e,(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},(0,f.h)("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),(0,f.h)("path",{d:"M7.9 3H10v2H7.9z"}),(0,f.h)("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),(0,f.h)("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):e.resumableUploads&&!e.hidePauseResumeButton?(0,f.h)(Tn,e,(0,f.h)(An,null,(0,f.h)(Un,{progress:e.file.progress.percentage}),e.file.isPaused?(0,f.h)("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):(0,f.h)("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},(0,f.h)("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),(0,f.h)("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):e.resumableUploads||!e.individualCancellation||e.hideCancelButton?(0,f.h)("div",{className:"uppy-Dashboard-Item-progress"},(0,f.h)("div",{className:"uppy-Dashboard-Item-progressIndicator"},(0,f.h)(An,null,(0,f.h)(Un,{progress:e.file.progress.percentage})))):(0,f.h)(Tn,e,(0,f.h)(An,null,(0,f.h)(Un,{progress:e.file.progress.percentage}),(0,f.h)("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):null}var Dn=n(62410),Nn="...";function In(e,t){if(0===t)return"";if(e.length<=t)return e;if(t<=Nn.length+1)return"".concat(e.slice(0,t-1),"\u2026");var n=t-Nn.length,r=Math.ceil(n/2),i=Math.floor(n/2);return e.slice(0,r)+Nn+e.slice(-i)}var Bn=function(e){var t=e.file,n=e.onClick;return t.error?(0,f.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":t.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:n,type:"button"},"?"):null};function Ln(e){var t=e.file;return(0,f.h)("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source},(0,f.h)("div",{className:"uppy-Dashboard-Item-fileName"},function(e){var t=e.file.meta,n=t.author,r=t.name;return(0,f.h)("div",{className:"uppy-Dashboard-Item-name",title:r},In(r,e.isSingleFile&&e.containerHeight>=350?90:e.containerWidth<=352?35:e.containerWidth<=576?60:n?20:30))}(e),(0,f.h)(Bn,{file:e.file,onClick:function(){return alert(e.file.error)}})),(0,f.h)("div",{className:"uppy-Dashboard-Item-status"},function(e){var t=e.file.meta.author,n=e.file.remote.providerName;return t?(0,f.h)("div",{className:"uppy-Dashboard-Item-author"},(0,f.h)("a",{href:"".concat(t.url,"?utm_source=Companion&utm_medium=referral"),target:"_blank",rel:"noopener noreferrer"},In(t.name,13)),n?(0,f.h)(f.HY,null," ".concat("\xb7"," "),n," ".concat("\xb7"," ")):null):null}(e),function(e){return e.file.size&&(0,f.h)("div",{className:"uppy-Dashboard-Item-statusSize"},Dn(e.file.size))}(e),function(e){return e.file.isGhost&&(0,f.h)("span",null," \u2022 ",(0,f.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:e.toggleAddFilesPanel},e.i18n("reSelect")))}(e)),(0,f.h)(xn,{file:e.file,i18n:e.i18n,toggleFileCard:e.toggleFileCard,metaFields:e.metaFields}))}function Mn(e){var t=e.file,n=e.uploadInProgressOrComplete,r=e.metaFields,i=e.canEditFile,o=e.i18n,a=e.onClick;return!n&&r&&r.length>0||!n&&i(t)?(0,f.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":o("editFileWithFilename",{file:t.meta.name}),title:o("editFileWithFilename",{file:t.meta.name}),onClick:function(){return a()}},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},(0,f.h)("g",{fillRule:"evenodd"},(0,f.h)("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),(0,f.h)("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),(0,f.h)("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function jn(e){var t=e.i18n,n=e.onClick,r=e.file;return(0,f.h)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":t("removeFile",{file:r.meta.name}),title:t("removeFile",{file:r.meta.name}),onClick:function(){return n()}},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},(0,f.h)("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),(0,f.h)("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}var zn=function(e,t){var n,r;(n=t.file.uploadURL,r=t.i18n("copyLinkToClipboardFallback"),void 0===r&&(r="Copy the URL below"),new Promise((function(e){var t=document.createElement("textarea");t.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),t.value=n,document.body.appendChild(t),t.select();var i=function(){document.body.removeChild(t),window.prompt(r,n),e()};try{return document.execCommand("copy")?(document.body.removeChild(t),e()):i()}catch(o){return document.body.removeChild(t),i()}}))).then((function(){t.uppy.log("Link copied to clipboard."),t.uppy.info(t.i18n("copyLinkToClipboardSuccess"),"info",3e3)})).catch(t.uppy.log).then((function(){return e.target.focus({preventScroll:!0})}))};function qn(e){var t=e.i18n;return(0,f.h)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:function(t){return zn(t,e)}},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},(0,f.h)("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function Hn(e){var t=e.uppy,n=e.file,r=e.uploadInProgressOrComplete,i=e.canEditFile,o=e.metaFields,a=e.showLinkToFileUploadResult,s=e.showRemoveButton,u=e.i18n,l=e.toggleFileCard,c=e.openFileEditor;return(0,f.h)("div",{className:"uppy-Dashboard-Item-actionWrapper"},(0,f.h)(Mn,{i18n:u,file:n,uploadInProgressOrComplete:r,canEditFile:i,metaFields:o,onClick:function(){o&&o.length>0?l(!0,n.id):c(n)}}),a&&n.uploadURL?(0,f.h)(qn,{file:n,uppy:t,i18n:u}):null,s?(0,f.h)(jn,{i18n:u,file:n,uppy:t,onClick:function(){return e.uppy.removeFile(n.id,"removed-by-user")}}):null)}var Vn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.file;e.preview||this.props.handleRequestThumbnail(e)}},{key:"shouldComponentUpdate",value:function(e){return!Sn(this.props,e)}},{key:"componentDidUpdate",value:function(){var e=this.props.file;e.preview||this.props.handleRequestThumbnail(e)}},{key:"componentWillUnmount",value:function(){var e=this.props.file;e.preview||this.props.handleCancelThumbnail(e)}},{key:"render",value:function(){var e=this.props.file,t=e.progress.preprocess||e.progress.postprocess,n=e.progress.uploadComplete&&!t&&!e.error,r=e.progress.uploadStarted||t,i=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,a=e.isGhost,s=(this.props.individualCancellation||!i)&&!n;n&&this.props.showRemoveButtonAfterComplete&&(s=!0);var u=P({"uppy-Dashboard-Item":!0,"is-inprogress":i&&!this.props.recoveredState,"is-processing":t,"is-complete":n,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":a});return(0,f.h)("div",{className:u,id:"uppy_".concat(e.id),role:this.props.role},(0,f.h)("div",{className:"uppy-Dashboard-Item-preview"},(0,f.h)(On,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),(0,f.h)(Rn,{uppy:this.props.uppy,file:e,error:o,isUploaded:n,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),(0,f.h)("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},(0,f.h)(Ln,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),(0,f.h)(Hn,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:s,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:r,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}}]),n}(f.wA),Wn=["data","rowHeight","renderRow","overscanCount"];function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kn.apply(this,arguments)}var Yn={position:"relative",width:"100%",minHeight:"100%"},Gn={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},Xn=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).handleScroll=function(){r.setState({offset:r.base.scrollTop})},r.handleResize=function(){r.resize()},r.focusElement=null,r.state={offset:0,height:0},r}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.resize(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUpdate",value:function(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}},{key:"componentDidUpdate",value:function(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"resize",value:function(){this.state.height!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}},{key:"render",value:function(e){var t=e.data,n=e.rowHeight,i=e.renderRow,o=e.overscanCount,a=void 0===o?10:o,s=(0,ee.Z)(e,Wn),u=this.state,l=u.offset,c=u.height,p=Math.floor(l/n),h=Math.floor(c/n);a&&(p=Math.max(0,p-p%a),h+=a);var d=p+h+4,v=t.slice(p,d),y=(0,r.Z)((0,r.Z)({},Yn),{},{height:t.length*n}),m=(0,r.Z)((0,r.Z)({},Gn),{},{top:p*n});return(0,f.h)("div",Kn({onScroll:this.handleScroll},s),(0,f.h)("div",{role:"presentation",style:y},(0,f.h)("div",{role:"presentation",style:m},v.map(i))))}}]),n}(f.wA);var Qn,$n=function(e){var t=e.id,n=e.error,r=e.i18n,i=e.uppy,o=e.files,a=e.acquirers,s=e.resumableUploads,u=e.hideRetryButton,l=e.hidePauseResumeButton,c=e.hideCancelButton,p=e.showLinkToFileUploadResult,h=e.showRemoveButtonAfterComplete,d=e.isWide,v=e.metaFields,y=e.isSingleFile,m=e.toggleFileCard,g=e.handleRequestThumbnail,b=e.handleCancelThumbnail,w=e.recoveredState,k=e.individualCancellation,_=e.itemsPerRow,P=e.openFileEditor,Z=e.canEditFile,S=e.toggleAddFilesPanel,C=e.containerWidth,F=e.containerHeight,x=1===_?71:200,O=(0,Zn.Ye)((function(){var e=Object.keys(o);return w&&e.sort((function(e,t){return o[t].isGhost-o[e].isGhost})),function(e,t){var n=[],r=[];return e.forEach((function(e){r.length<t?r.push(e):(n.push(r),r=[e])})),r.length&&n.push(r),n}(e,_)}),[o,_,w]),E=function(e){return(0,f.h)("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:e[0]},e.map((function(e){return(0,f.h)(Vn,{key:e,uppy:i,id:t,error:n,i18n:r,acquirers:a,resumableUploads:s,individualCancellation:k,hideRetryButton:u,hidePauseResumeButton:l,hideCancelButton:c,showLinkToFileUploadResult:p,showRemoveButtonAfterComplete:h,isWide:d,metaFields:v,recoveredState:w,isSingleFile:y,containerWidth:C,containerHeight:F,toggleFileCard:m,handleRequestThumbnail:g,handleCancelThumbnail:b,role:"listitem",openFileEditor:P,canEditFile:Z,toggleAddFilesPanel:S,file:o[e]})})))};return y?(0,f.h)("div",{class:"uppy-Dashboard-files"},E(O[0])):(0,f.h)(Xn,{class:"uppy-Dashboard-files",role:"list",data:O,renderRow:E,rowHeight:x})};Qn=Symbol.for("uppy test: disable unused locale key warning");var Jn=function(e,t){(0,a.Z)(r,e);var n=(0,s.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=n.apply(this,arguments)).triggerFileInputClick=function(){e.fileInput.click()},e.triggerFolderInputClick=function(){e.folderInput.click()},e.triggerVideoCameraInputClick=function(){e.mobileVideoFileInput.click()},e.triggerPhotoCameraInputClick=function(){e.mobilePhotoFileInput.click()},e.onFileInputChange=function(t){e.props.handleInputChange(t),t.target.value=null},e.renderHiddenInput=function(t,n){return(0,f.h)("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:t,type:"file",name:"files[]",multiple:1!==e.props.maxNumberOfFiles,onChange:e.onFileInputChange,accept:e.props.allowedFileTypes,ref:n})},e.renderHiddenCameraInput=function(t,n,r){var i={photo:"image/*",video:"video/*"}[t];return(0,f.h)("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:"camera-".concat(t),onChange:e.onFileInputChange,capture:n,accept:i,ref:r})},e.renderMyDeviceAcquirer=function(){return(0,f.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},(0,f.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:e.triggerFileInputClick},(0,f.h)("div",{className:"uppy-DashboardTab-inner"},(0,f.h)("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,f.h)("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"}))),(0,f.h)("div",{className:"uppy-DashboardTab-name"},e.props.i18n("myDevice"))))},e.renderPhotoCamera=function(){return(0,f.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},(0,f.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:e.triggerPhotoCameraInputClick},(0,f.h)("div",{className:"uppy-DashboardTab-inner"},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,f.h)("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"}))),(0,f.h)("div",{className:"uppy-DashboardTab-name"},e.props.i18n("takePictureBtn"))))},e.renderVideoCamera=function(){return(0,f.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},(0,f.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:e.triggerVideoCameraInputClick},(0,f.h)("div",{className:"uppy-DashboardTab-inner"},(0,f.h)("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},(0,f.h)("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "}))),(0,f.h)("div",{className:"uppy-DashboardTab-name"},e.props.i18n("recordVideoBtn"))))},e.renderBrowseButton=function(t,n){var r=e.props.acquirers.length;return(0,f.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:n,"data-uppy-super-focusable":0===r},t)},e.renderDropPasteBrowseTagline=function(t){var n=e.renderBrowseButton(e.props.i18n("browseFiles"),e.triggerFileInputClick),r=e.renderBrowseButton(e.props.i18n("browseFolders"),e.triggerFolderInputClick),i=e.props.fileManagerSelectionType,o=i.charAt(0).toUpperCase()+i.slice(1);return(0,f.h)("div",{class:"uppy-Dashboard-AddFiles-title"},e.props.disableLocalFiles?e.props.i18n("importFiles"):t>0?e.props.i18nArray("dropPasteImport".concat(o),{browseFiles:n,browseFolders:r,browse:n}):e.props.i18nArray("dropPaste".concat(o),{browseFiles:n,browseFolders:r,browse:n}))},e.renderAcquirer=function(t){return(0,f.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":t.id},(0,f.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":t.id,"aria-controls":"uppy-DashboardContent-panel--".concat(t.id),"aria-selected":e.props.activePickerPanel.id===t.id,"data-uppy-super-focusable":!0,onClick:function(){return e.props.showPanel(t.id)}},(0,f.h)("div",{className:"uppy-DashboardTab-inner"},t.icon()),(0,f.h)("div",{className:"uppy-DashboardTab-name"},t.name)))},e.renderAcquirers=function(t){var n=(0,he.Z)(t),r=n.splice(t.length-2,t.length);return(0,f.h)(f.HY,null,n.map((function(t){return e.renderAcquirer(t)})),(0,f.h)("span",{role:"presentation",style:{"white-space":"nowrap"}},r.map((function(t){return e.renderAcquirer(t)}))))},e.renderSourcesList=function(t,n){var r,i=e.props,o=i.showNativePhotoCameraButton,a=i.showNativeVideoCameraButton,s=[],u="myDevice";n||(s.push({key:u,elements:e.renderMyDeviceAcquirer()}),o&&s.push({key:"nativePhotoCameraButton",elements:e.renderPhotoCamera()}),a&&s.push({key:"nativePhotoCameraButton",elements:e.renderVideoCamera()})),(r=s).push.apply(r,(0,he.Z)(t.map((function(t){return{key:t.id,elements:e.renderAcquirer(t)}})))),1===s.length&&s[0].key===u&&(s=[]);var l=(0,he.Z)(s),c=l.splice(s.length-2,s.length),p=function(e){return e.map((function(e){var t=e.key,n=e.elements;return(0,f.h)(f.HY,{key:t},n)}))};return(0,f.h)(f.HY,null,e.renderDropPasteBrowseTagline(s.length),(0,f.h)("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},p(l),(0,f.h)("span",{role:"presentation",style:{"white-space":"nowrap"}},p(c))))},e}return(0,o.Z)(r,[{key:t,value:function(){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}},{key:"renderPoweredByUppy",value:function(){var e=(0,this.props.i18nArray)("poweredBy",{uppy:(0,f.h)("span",null,(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},(0,f.h)("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),(0,f.h)("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy"))});return(0,f.h)("a",{tabIndex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.showNativePhotoCameraButton,r=t.showNativeVideoCameraButton,i=t.nativeCameraFacingMode;return(0,f.h)("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,(function(t){e.fileInput=t})),this.renderHiddenInput(!0,(function(t){e.folderInput=t})),n&&this.renderHiddenCameraInput("photo",i,(function(t){e.mobilePhotoFileInput=t})),r&&this.renderHiddenCameraInput("video",i,(function(t){e.mobileVideoFileInput=t})),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),(0,f.h)("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&(0,f.h)("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}}]),r}(f.wA,Qn),er=Jn,tr=function(e){return(0,f.h)("div",{className:P("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":e.showAddFilesPanel},(0,f.h)("div",{className:"uppy-DashboardContent-bar"},(0,f.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18n("addingMoreFiles")),(0,f.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:function(){return e.toggleAddFilesPanel(!1)}},e.i18n("back"))),(0,f.h)(er,e))};var nr=function(e){var t=e.target.tagName;"INPUT"!==t&&"TEXTAREA"!==t?(e.preventDefault(),e.stopPropagation()):e.stopPropagation()};var rr=function(e){var t=e.activePickerPanel,n=e.className,r=e.hideAllPanels,i=e.i18n,o=e.state,a=e.uppy;return(0,f.h)("div",{className:P("uppy-DashboardContent-panel",n),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:"uppy-DashboardContent-panel--".concat(t.id),onDragOver:nr,onDragLeave:nr,onDrop:nr,onPaste:nr},(0,f.h)("div",{className:"uppy-DashboardContent-bar"},(0,f.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},i("importFrom",{name:t.name})),(0,f.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:r},i("cancel"))),(0,f.h)("div",{className:"uppy-DashboardContent-panelBody"},a.getPlugin(t.id).render(o)))};var ir=function(e){var t=e.files[e.fileCardFor];return(0,f.h)("div",{className:P("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},(0,f.h)("div",{className:"uppy-DashboardContent-bar"},(0,f.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18nArray("editing",{file:(0,f.h)("span",{className:"uppy-DashboardContent-titleFile"},t.meta?t.meta.name:t.name)})),(0,f.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:e.hideAllPanels},e.i18n("cancel")),(0,f.h)("button",{className:"uppy-DashboardContent-save",type:"button",onClick:e.saveFileEditor},e.i18n("save"))),(0,f.h)("div",{className:"uppy-DashboardContent-panelBody"},e.editors.map((function(t){return e.uppy.getPlugin(t.id).render(e.state)}))))},or="error",ar="waiting",sr="preprocessing",ur="uploading",lr="postprocessing",cr="complete",pr="paused";function hr(e){var t=e.files,n=e.i18n,r=e.isAllComplete,i=e.isAllErrored,o=e.isAllPaused,a=e.inProgressNotPausedFiles,s=e.newFiles,u=e.processingFiles,l=function(e,t,n,r){if(void 0===r&&(r={}),e)return or;if(t)return cr;if(n)return pr;for(var i=ar,o=Object.keys(r),a=0;a<o.length;a++){var s=r[o[a]].progress;if(s.uploadStarted&&!s.uploadComplete)return ur;s.preprocess&&i!==ur&&(i=sr),s.postprocess&&i!==ur&&i!==sr&&(i=lr)}return i}(i,r,o,t);switch(l){case"uploading":return n("uploadingXFiles",{smart_count:a.length});case"preprocessing":case"postprocessing":return n("processingXFiles",{smart_count:u.length});case"paused":return n("uploadPaused");case"waiting":return n("xFilesSelected",{smart_count:s.length});case"complete":return n("uploadComplete");case"error":return n("error")}}var dr=function(e){var t=e.i18n,n=e.isAllComplete,r=e.hideCancelButton,i=e.maxNumberOfFiles,o=e.toggleAddFilesPanel,a=e.uppy,s=e.allowNewUpload;return s&&i&&(s=e.totalFileCount<e.maxNumberOfFiles),(0,f.h)("div",{className:"uppy-DashboardContent-bar"},n||r?(0,f.h)("div",null):(0,f.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:function(){return a.cancelAll()}},t("cancel")),(0,f.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},(0,f.h)(hr,e)),s?(0,f.h)("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:function(){return o(!0)}},(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},(0,f.h)("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),(0,f.h)("span",{className:"uppy-DashboardContent-addMoreCaption"},t("addMore"))):(0,f.h)("div",null))};function fr(e){var t=e.computedMetaFields,n=e.requiredMetaFields,r=e.updateMeta,i=e.form,o=e.formState,a={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return t.map((function(e){var t="uppy-Dashboard-FileCard-input-".concat(e.id),s=n.includes(e.id);return(0,f.h)("fieldset",{key:e.id,className:"uppy-Dashboard-FileCard-fieldset"},(0,f.h)("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:t},e.name),void 0!==e.render?e.render({value:o[e.id],onChange:function(t){return r(t,e.id)},fieldCSSClasses:a,required:s,form:i.id},f.h):(0,f.h)("input",{className:a.text,id:t,form:i.id,type:e.type||"text",required:s,value:o[e.id],placeholder:e.placeholder,onInput:function(t){return r(t.target.value,e.id)},"data-uppy-super-focusable":!0}))}))}function vr(e){var t,n=e.uppy,r=e.files,i=e.fileCardFor,o=e.toggleFileCard,a=e.saveFileCard,s=e.metaFields,u=e.requiredMetaFields,l=e.openFileEditor,c=e.i18n,h=e.i18nArray,d=e.className,v=e.canEditFile,y=r[i],m=null!=(t="function"===typeof s?s(r[i]):s)?t:[],g=v(y),b={};m.forEach((function(e){var t;b[e.id]=null!=(t=y.meta[e.id])?t:""}));var w=(0,Zn.eJ)(b),k=(0,J.Z)(w,2),_=k[0],Z=k[1],S=(0,Zn.I4)((function(e){e.preventDefault(),a(_,i)}),[a,_,i]),C=function(){n.emit("file-editor:cancel",y),o(!1)},F=(0,Zn.eJ)((function(){var e=document.createElement("form");return e.setAttribute("tabindex","-1"),e.id=yn(),e})),x=(0,J.Z)(F,1)[0];return(0,Zn.d4)((function(){return document.body.appendChild(x),x.addEventListener("submit",S),function(){x.removeEventListener("submit",S),document.body.removeChild(x)}}),[x,S]),(0,f.h)("div",{className:P("uppy-Dashboard-FileCard",d),"data-uppy-panelType":"FileCard",onDragOver:nr,onDragLeave:nr,onDrop:nr,onPaste:nr},(0,f.h)("div",{className:"uppy-DashboardContent-bar"},(0,f.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},h("editing",{file:(0,f.h)("span",{className:"uppy-DashboardContent-titleFile"},y.meta?y.meta.name:y.name)})),(0,f.h)("button",{className:"uppy-DashboardContent-back",type:"button",form:x.id,title:c("finishEditingFile"),onClick:C},c("cancel"))),(0,f.h)("div",{className:"uppy-Dashboard-FileCard-inner"},(0,f.h)("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:Cn(y.type).color}},(0,f.h)(Fn,{file:y}),g&&(0,f.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:function(e){S(e),l(y)}},c("editFile"))),(0,f.h)("div",{className:"uppy-Dashboard-FileCard-info"},(0,f.h)(fr,{computedMetaFields:m,requiredMetaFields:u,updateMeta:function(e,t){Z((0,p.Z)({},t,e))},form:x,formState:_})),(0,f.h)("div",{className:"uppy-Dashboard-FileCard-actions"},(0,f.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:x.id},c("saveChanges")),(0,f.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:C,form:x.id},c("cancel")))))}var yr="uppy-transition-slideDownUp",mr=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).state={cachedChildren:null,className:""},r}return(0,o.Z)(n,[{key:"componentWillUpdate",value:function(e){var t=this,n=this.state.cachedChildren,r=(0,f.bR)(e.children)[0];if(n===r)return null;var i={cachedChildren:r};r&&!n&&(i.className="".concat(yr,"-enter"),cancelAnimationFrame(this.animationFrame),clearTimeout(this.leaveTimeout),this.leaveTimeout=void 0,this.animationFrame=requestAnimationFrame((function(){t.setState({className:"".concat(yr,"-enter ").concat(yr,"-enter-active")}),t.enterTimeout=setTimeout((function(){t.setState({className:""})}),250)}))),n&&!r&&void 0===this.leaveTimeout&&(i.cachedChildren=n,i.className="".concat(yr,"-leave"),cancelAnimationFrame(this.animationFrame),clearTimeout(this.enterTimeout),this.enterTimeout=void 0,this.animationFrame=requestAnimationFrame((function(){t.setState({className:"".concat(yr,"-leave ").concat(yr,"-leave-active")}),t.leaveTimeout=setTimeout((function(){t.setState({cachedChildren:null,className:""})}),250)}))),this.setState(i)}},{key:"render",value:function(){var e=this.state,t=e.cachedChildren,n=e.className;return t?(0,f.Tm)(t,{className:P(n,t.props.className)}):null}}]),n}(f.wA);function gr(){return gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gr.apply(this,arguments)}var br={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function wr(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var kr=0;function _r(e){return"__private_"+kr+++"_"+e}var Pr=mn.Z.default||mn.Z;function Zr(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}function Sr(){return(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},(0,f.h)("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var Cr=_r("disabledNodes"),Fr=_r("generateLargeThumbnailIfSingleFile"),xr=_r("openFileEditorWhenFilesAdded"),Or=_r("attachRenderFunctionToTarget"),Er=_r("isTargetSupported"),Tr=_r("getAcquirers"),Ar=_r("getProgressIndicators"),Ur=_r("getEditors"),Rr=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o){var a,s;(0,i.Z)(this,n),a=t.call(this,e,o),s=(0,d.Z)(a),Object.defineProperty((0,d.Z)(a),Cr,{writable:!0,value:null}),a.removeTarget=function(e){var t=a.getPluginState().targets.filter((function(t){return t.id!==e.id}));a.setPluginState({targets:t})},a.addTarget=function(e){var t=e.id||e.constructor.name,n=e.title||t,r=e.type;if("acquirer"===r||"progressindicator"===r||"editor"===r){var i={id:t,name:n,type:r},o=a.getPluginState().targets.slice();return o.push(i),a.setPluginState({targets:o}),a.el}a.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error")},a.hideAllPanels=function(){var e=a.getPluginState(),t={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};e.activePickerPanel===t.activePickerPanel&&e.showAddFilesPanel===t.showAddFilesPanel&&e.showFileEditor===t.showFileEditor&&e.activeOverlayType===t.activeOverlayType||a.setPluginState(t)},a.showPanel=function(e){var t=a.getPluginState().targets.filter((function(t){return"acquirer"===t.type&&t.id===e}))[0];a.setPluginState({activePickerPanel:t,activeOverlayType:"PickerPanel"}),a.uppy.emit("dashboard:show-panel",e)},a.canEditFile=function(e){var t=a.getPluginState().targets;return wr((0,d.Z)(a),Ur)[Ur](t).some((function(t){return a.uppy.getPlugin(t.id).canEditFile(e)}))},a.openFileEditor=function(e){var t=a.getPluginState().targets,n=wr((0,d.Z)(a),Ur)[Ur](t);a.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),n.forEach((function(t){a.uppy.getPlugin(t.id).selectFile(e)}))},a.saveFileEditor=function(){var e=a.getPluginState().targets;wr((0,d.Z)(a),Ur)[Ur](e).forEach((function(e){a.uppy.getPlugin(e.id).save()})),a.hideAllPanels()},a.openModal=function(){var e=Zr(),t=e.promise,n=e.resolve;if(a.savedScrollPosition=window.pageYOffset,a.savedActiveElement=document.activeElement,a.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),a.opts.animateOpenClose&&a.getPluginState().isClosing){a.el.addEventListener("animationend",(function e(){a.setPluginState({isHidden:!1}),a.el.removeEventListener("animationend",e,!1),n()}),!1)}else a.setPluginState({isHidden:!1}),n();return a.opts.browserBackButtonClose&&a.updateBrowserHistory(),document.addEventListener("keydown",a.handleKeyDownInModal),a.uppy.emit("dashboard:modal-open"),t},a.closeModal=function(e){void 0===e&&(e={});var t=e.manualClose,n=void 0===t||t,r=s.getPluginState(),i=r.isHidden,o=r.isClosing;if(!i&&!o){var a,u=Zr(),l=u.promise,c=u.resolve;if(s.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),s.opts.animateOpenClose){s.setPluginState({isClosing:!0});s.el.addEventListener("animationend",(function e(){s.setPluginState({isHidden:!0,isClosing:!1}),s.superFocus.cancel(),s.savedActiveElement.focus(),s.el.removeEventListener("animationend",e,!1),c()}),!1)}else s.setPluginState({isHidden:!0}),s.superFocus.cancel(),s.savedActiveElement.focus(),c();if(document.removeEventListener("keydown",s.handleKeyDownInModal),n)if(s.opts.browserBackButtonClose)null!=(a=history.state)&&a[s.modalName]&&history.back();return s.uppy.emit("dashboard:modal-closed"),l}},a.isModalOpen=function(){return!a.getPluginState().isHidden||!1},a.requestCloseModal=function(){return a.opts.onRequestCloseModal?a.opts.onRequestCloseModal():a.closeModal()},a.setDarkModeCapability=function(e){var t=a.uppy.getState().capabilities;a.uppy.setState({capabilities:(0,r.Z)((0,r.Z)({},t),{},{darkMode:e})})},a.handleSystemDarkModeChange=function(e){var t=e.matches;a.uppy.log("[Dashboard] Dark mode is ".concat(t?"on":"off")),a.setDarkModeCapability(t)},a.toggleFileCard=function(e,t){var n=a.uppy.getFile(t);e?a.uppy.emit("dashboard:file-edit-start",n):a.uppy.emit("dashboard:file-edit-complete",n),a.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})},a.toggleAddFilesPanel=function(e){a.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})},a.addFiles=function(e){var t=e.map((function(e){return{source:a.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||e.webkitRelativePath||null}}}));try{a.uppy.addFiles(t)}catch(n){a.uppy.log(n)}},a.startListeningToResize=function(){a.resizeObserver=new ResizeObserver((function(e){var t=e[0].contentRect,n=t.width,r=t.height;a.setPluginState({containerWidth:n,containerHeight:r,areInsidesReadyToBeVisible:!0})})),a.resizeObserver.observe(a.el.querySelector(".uppy-Dashboard-inner")),a.makeDashboardInsidesVisibleAnywayTimeout=setTimeout((function(){var e=a.getPluginState(),t=!a.opts.inline&&e.isHidden;e.areInsidesReadyToBeVisible||t||(a.uppy.log("[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout","warning"),a.setPluginState({areInsidesReadyToBeVisible:!0}))}),1e3)},a.stopListeningToResize=function(){a.resizeObserver.disconnect(),clearTimeout(a.makeDashboardInsidesVisibleAnywayTimeout)},a.recordIfFocusedOnUppyRecently=function(e){a.el.contains(e.target)?a.ifFocusedOnUppyRecently=!0:(a.ifFocusedOnUppyRecently=!1,a.superFocus.cancel())},a.disableInteractiveElements=function(e){var t,n,r=null!=(t=wr((0,d.Z)(a),Cr)[Cr])?t:(0,Qt.Z)(a.el.querySelectorAll(["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'])).filter((function(e){return!e.classList.contains("uppy-Dashboard-close")})),i=(0,h.Z)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;"A"===o.tagName?o.setAttribute("aria-disabled",e):o.disabled=e}}catch(s){i.e(s)}finally{i.f()}wr((0,d.Z)(a),Cr)[Cr]=e?r:null,a.dashboardIsDisabled=e},a.updateBrowserHistory=function(){var e;null!=(e=history.state)&&e[a.modalName]||history.pushState((0,r.Z)((0,r.Z)({},history.state),{},(0,p.Z)({},a.modalName,!0)),""),window.addEventListener("popstate",a.handlePopState,!1)},a.handlePopState=function(e){var t;!a.isModalOpen()||e.state&&e.state[a.modalName]||a.closeModal({manualClose:!1}),!a.isModalOpen()&&null!=(t=e.state)&&t[a.modalName]&&history.back()},a.handleKeyDownInModal=function(e){27===e.keyCode&&a.requestCloseModal(e),9===e.keyCode&&kn(e,a.getPluginState().activeOverlayType,a.el)},a.handleClickOutside=function(){a.opts.closeModalOnClickOutside&&a.requestCloseModal()},a.handlePaste=function(e){a.uppy.iteratePlugins((function(t){"acquirer"===t.type&&(null==t.handleRootPaste||t.handleRootPaste(e))}));var t=(0,Qt.Z)(e.clipboardData.files);t.length>0&&(a.uppy.log("[Dashboard] Files pasted"),a.addFiles(t))},a.handleInputChange=function(e){e.preventDefault();var t=(0,Qt.Z)(e.target.files);t.length>0&&(a.uppy.log("[Dashboard] Files selected through input"),a.addFiles(t))},a.handleDragOver=function(e){var t,n;e.preventDefault(),e.stopPropagation();var r=function(){var t=!0;return a.uppy.iteratePlugins((function(n){null!=n.canHandleRootDrop&&n.canHandleRootDrop(e)&&(t=!0)})),t}(),i=e.dataTransfer.types.some((function(e){return"Files"===e}));if(!r&&!i||a.opts.disabled||a.opts.disableLocalFiles&&(i||!r)||!a.uppy.getState().allowNewUpload)return e.dataTransfer.dropEffect="none",void clearTimeout(a.removeDragOverClassTimeout);e.dataTransfer.dropEffect="copy",clearTimeout(a.removeDragOverClassTimeout),a.setPluginState({isDraggingOver:!0}),null==(t=(n=a.opts).onDragOver)||t.call(n,e)},a.handleDragLeave=function(e){var t,n;e.preventDefault(),e.stopPropagation(),clearTimeout(a.removeDragOverClassTimeout),a.removeDragOverClassTimeout=setTimeout((function(){a.setPluginState({isDraggingOver:!1})}),50),null==(t=(n=a.opts).onDragLeave)||t.call(n,e)},a.handleDrop=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r,i,o,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),clearTimeout(a.removeDragOverClassTimeout),a.setPluginState({isDraggingOver:!1}),a.uppy.iteratePlugins((function(e){"acquirer"===e.type&&(null==e.handleRootDrop||e.handleRootDrop(t))})),i=!1,o=function(e){a.uppy.log(e,"error"),i||(a.uppy.info(e.message,"error"),i=!0)},a.uppy.log("[Dashboard] Processing dropped files"),e.next=10,dn(t.dataTransfer,{logDropError:o});case 10:(s=e.sent).length>0&&(a.uppy.log("[Dashboard] Files dropped"),a.addFiles(s)),null==(n=(r=a.opts).onDrop)||n.call(r,t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleRequestThumbnail=function(e){a.opts.waitForThumbnailsBeforeUpload||a.uppy.emit("thumbnail:request",e)},a.handleCancelThumbnail=function(e){a.opts.waitForThumbnailsBeforeUpload||a.uppy.emit("thumbnail:cancel",e)},a.handleKeyDownInInline=function(e){9===e.keyCode&&function(e,t,n){null===t||kn(e,t,n)}(e,a.getPluginState().activeOverlayType,a.el)},a.handlePasteOnBody=function(e){a.el.contains(document.activeElement)&&a.handlePaste(e)},a.handleComplete=function(e){var t=e.failed;a.opts.closeAfterFinish&&0===t.length&&a.requestCloseModal()},a.handleCancelRestore=function(){a.uppy.emit("restore-canceled")},Object.defineProperty((0,d.Z)(a),Fr,{writable:!0,value:function(){if(!a.opts.disableThumbnailGenerator){var e=a.uppy.getFiles();if(1===e.length){var t=a.uppy.getPlugin("".concat(a.id,":ThumbnailGenerator"));null==t||t.setOptions({thumbnailWidth:600});var n=(0,r.Z)((0,r.Z)({},e[0]),{},{preview:void 0});t.requestThumbnail(n).then((function(){null==t||t.setOptions({thumbnailWidth:a.opts.thumbnailWidth})}))}}}}),Object.defineProperty((0,d.Z)(a),xr,{writable:!0,value:function(e){var t=e[0];a.canEditFile(t)&&a.openFileEditor(t)}}),a.initEvents=function(){if(a.opts.trigger&&!a.opts.inline){var e=Xt(a.opts.trigger);e?e.forEach((function(e){return e.addEventListener("click",a.openModal)})):a.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}a.startListeningToResize(),document.addEventListener("paste",a.handlePasteOnBody),a.uppy.on("plugin-remove",a.removeTarget),a.uppy.on("file-added",a.hideAllPanels),a.uppy.on("dashboard:modal-closed",a.hideAllPanels),a.uppy.on("file-editor:complete",a.hideAllPanels),a.uppy.on("complete",a.handleComplete),a.uppy.on("files-added",wr((0,d.Z)(a),Fr)[Fr]),a.uppy.on("file-removed",wr((0,d.Z)(a),Fr)[Fr]),document.addEventListener("focus",a.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",a.recordIfFocusedOnUppyRecently,!0),a.opts.inline&&a.el.addEventListener("keydown",a.handleKeyDownInInline),a.opts.autoOpenFileEditor&&a.uppy.on("files-added",wr((0,d.Z)(a),xr)[xr])},a.removeEvents=function(){var e=Xt(a.opts.trigger);!a.opts.inline&&e&&e.forEach((function(e){return e.removeEventListener("click",a.openModal)})),a.stopListeningToResize(),document.removeEventListener("paste",a.handlePasteOnBody),window.removeEventListener("popstate",a.handlePopState,!1),a.uppy.off("plugin-remove",a.removeTarget),a.uppy.off("file-added",a.hideAllPanels),a.uppy.off("dashboard:modal-closed",a.hideAllPanels),a.uppy.off("file-editor:complete",a.hideAllPanels),a.uppy.off("complete",a.handleComplete),a.uppy.off("files-added",wr((0,d.Z)(a),Fr)[Fr]),a.uppy.off("file-removed",wr((0,d.Z)(a),Fr)[Fr]),document.removeEventListener("focus",a.recordIfFocusedOnUppyRecently),document.removeEventListener("click",a.recordIfFocusedOnUppyRecently),a.opts.inline&&a.el.removeEventListener("keydown",a.handleKeyDownInInline),a.opts.autoOpenFileEditor&&a.uppy.off("files-added",wr((0,d.Z)(a),xr)[xr])},a.superFocusOnEachUpdate=function(){var e=a.el.contains(document.activeElement),t=document.activeElement===document.body||null===document.activeElement,n=0===a.uppy.getState().info.length,r=!a.opts.inline;n&&(r||e||t&&a.ifFocusedOnUppyRecently)?a.superFocus(a.el,a.getPluginState().activeOverlayType):a.superFocus.cancel()},a.afterUpdate=function(){!a.opts.disabled||a.dashboardIsDisabled?(!a.opts.disabled&&a.dashboardIsDisabled&&a.disableInteractiveElements(!1),a.superFocusOnEachUpdate()):a.disableInteractiveElements(!0)},a.saveFileCard=function(e,t){a.uppy.setFileMeta(t,e),a.toggleFileCard(!1,t)},Object.defineProperty((0,d.Z)(a),Or,{writable:!0,value:function(e){var t=a.uppy.getPlugin(e.id);return(0,r.Z)((0,r.Z)({},e),{},{icon:t.icon||a.opts.defaultPickerIcon,render:t.render})}}),Object.defineProperty((0,d.Z)(a),Er,{writable:!0,value:function(e){var t=a.uppy.getPlugin(e.id);return"function"!==typeof t.isSupported||t.isSupported()}}),Object.defineProperty((0,d.Z)(a),Tr,{writable:!0,value:Pr((function(e){return e.filter((function(e){return"acquirer"===e.type&&wr((0,d.Z)(a),Er)[Er](e)})).map(wr((0,d.Z)(a),Or)[Or])}))}),Object.defineProperty((0,d.Z)(a),Ar,{writable:!0,value:Pr((function(e){return e.filter((function(e){return"progressindicator"===e.type})).map(wr((0,d.Z)(a),Or)[Or])}))}),Object.defineProperty((0,d.Z)(a),Ur,{writable:!0,value:Pr((function(e){return e.filter((function(e){return"editor"===e.type})).map(wr((0,d.Z)(a),Or)[Or])}))}),a.render=function(e){var t,n=a.getPluginState(),r=e.files,i=e.capabilities,o=e.allowNewUpload,s=a.uppy.getObjectOfFilesPerState(),u=s.newFiles,l=s.uploadStartedFiles,c=s.completeFiles,p=s.erroredFiles,h=s.inProgressFiles,v=s.inProgressNotPausedFiles,y=s.processingFiles,m=s.isUploadStarted,g=s.isAllComplete,b=s.isAllErrored,w=s.isAllPaused,k=wr((0,d.Z)(a),Tr)[Tr](n.targets),_=wr((0,d.Z)(a),Ar)[Ar](n.targets),Z=wr((0,d.Z)(a),Ur)[Ur](n.targets);return t="auto"===a.opts.theme?i.darkMode?"dark":"light":a.opts.theme,["files","folders","both"].indexOf(a.opts.fileManagerSelectionType)<0&&(a.opts.fileManagerSelectionType="files",console.warn('Unsupported option for "fileManagerSelectionType". Using default of "'.concat(a.opts.fileManagerSelectionType,'".'))),function(e){var t=0===e.totalFileCount,n=1===e.totalFileCount,r=e.containerWidth>576,i=e.containerHeight>330,o=P({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>576,"uppy-size--lg":e.containerWidth>700,"uppy-size--xl":e.containerWidth>900,"uppy-size--height-md":e.containerHeight>330,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":e.singleFileFullScreen&&n&&i}),a=1;e.containerWidth>900?a=5:e.containerWidth>700?a=4:e.containerWidth>576&&(a=3);var s=e.showSelectedFiles&&!t,u=e.recoveredState?Object.keys(e.recoveredState.files).length:null,l=e.files?Object.keys(e.files).filter((function(t){return e.files[t].isGhost})).length:null;return(0,f.h)("div",{className:o,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&Pn(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop},(0,f.h)("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),(0,f.h)("div",{className:"uppy-Dashboard-inner","aria-modal":!e.inline&&"true",role:!e.inline&&"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""}},e.inline?null:(0,f.h)("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal},(0,f.h)("span",{"aria-hidden":"true"},"\xd7")),(0,f.h)("div",{className:"uppy-Dashboard-innerWrap"},(0,f.h)("div",{className:"uppy-Dashboard-dropFilesHereHint"},e.i18n("dropHint")),s&&(0,f.h)(dr,e),u&&(0,f.h)("div",{className:"uppy-Dashboard-serviceMsg"},(0,f.h)("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},(0,f.h)("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},(0,f.h)("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),(0,f.h)("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),(0,f.h)("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),(0,f.h)("strong",{className:"uppy-Dashboard-serviceMsg-title"},e.i18n("sessionRestored")),(0,f.h)("div",{className:"uppy-Dashboard-serviceMsg-text"},l>0?e.i18n("recoveredXFiles",{smart_count:l}):e.i18n("recoveredAllFiles"))),s?(0,f.h)($n,{id:e.id,error:e.error,i18n:e.i18n,uppy:e.uppy,files:e.files,acquirers:e.acquirers,resumableUploads:e.resumableUploads,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,isWide:e.isWide,metaFields:e.metaFields,toggleFileCard:e.toggleFileCard,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail,recoveredState:e.recoveredState,individualCancellation:e.individualCancellation,openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,isSingleFile:n,itemsPerRow:a}):(0,f.h)(er,gr({},e,{isSizeMD:r})),(0,f.h)(mr,null,e.showAddFilesPanel?(0,f.h)(tr,gr({key:"AddFiles"},e,{isSizeMD:r})):null),(0,f.h)(mr,null,e.fileCardFor?(0,f.h)(vr,gr({key:"FileCard"},e)):null),(0,f.h)(mr,null,e.activePickerPanel?(0,f.h)(rr,gr({key:"Picker"},e)):null),(0,f.h)(mr,null,e.showFileEditor?(0,f.h)(ir,gr({key:"Editor"},e)):null),(0,f.h)("div",{className:"uppy-Dashboard-progressindicators"},e.progressindicators.map((function(t){return e.uppy.getPlugin(t.id).render(e.state)}))))))}({state:e,isHidden:n.isHidden,files:r,newFiles:u,uploadStartedFiles:l,completeFiles:c,erroredFiles:p,inProgressFiles:h,inProgressNotPausedFiles:v,processingFiles:y,isUploadStarted:m,isAllComplete:g,isAllErrored:b,isAllPaused:w,totalFileCount:Object.keys(r).length,totalProgress:e.totalProgress,allowNewUpload:o,acquirers:k,theme:t,disabled:a.opts.disabled,disableLocalFiles:a.opts.disableLocalFiles,direction:a.opts.direction,activePickerPanel:n.activePickerPanel,showFileEditor:n.showFileEditor,saveFileEditor:a.saveFileEditor,disableInteractiveElements:a.disableInteractiveElements,animateOpenClose:a.opts.animateOpenClose,isClosing:n.isClosing,progressindicators:_,editors:Z,autoProceed:a.uppy.opts.autoProceed,id:a.id,closeModal:a.requestCloseModal,handleClickOutside:a.handleClickOutside,handleInputChange:a.handleInputChange,handlePaste:a.handlePaste,inline:a.opts.inline,showPanel:a.showPanel,hideAllPanels:a.hideAllPanels,i18n:a.i18n,i18nArray:a.i18nArray,uppy:a.uppy,note:a.opts.note,recoveredState:e.recoveredState,metaFields:n.metaFields,resumableUploads:i.resumableUploads||!1,individualCancellation:i.individualCancellation,isMobileDevice:i.isMobileDevice,fileCardFor:n.fileCardFor,toggleFileCard:a.toggleFileCard,toggleAddFilesPanel:a.toggleAddFilesPanel,showAddFilesPanel:n.showAddFilesPanel,saveFileCard:a.saveFileCard,openFileEditor:a.openFileEditor,canEditFile:a.canEditFile,width:a.opts.width,height:a.opts.height,showLinkToFileUploadResult:a.opts.showLinkToFileUploadResult,fileManagerSelectionType:a.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:a.opts.proudlyDisplayPoweredByUppy,hideCancelButton:a.opts.hideCancelButton,hideRetryButton:a.opts.hideRetryButton,hidePauseResumeButton:a.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:a.opts.showRemoveButtonAfterComplete,containerWidth:n.containerWidth,containerHeight:n.containerHeight,areInsidesReadyToBeVisible:n.areInsidesReadyToBeVisible,isTargetDOMEl:a.isTargetDOMEl,parentElement:a.el,allowedFileTypes:a.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:a.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:a.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:a.opts.showSelectedFiles,showNativePhotoCameraButton:a.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:a.opts.showNativeVideoCameraButton,nativeCameraFacingMode:a.opts.nativeCameraFacingMode,singleFileFullScreen:a.opts.singleFileFullScreen,handleCancelRestore:a.handleCancelRestore,handleRequestThumbnail:a.handleRequestThumbnail,handleCancelThumbnail:a.handleCancelThumbnail,isDraggingOver:n.isDraggingOver,handleDragOver:a.handleDragOver,handleDragLeave:a.handleDragLeave,handleDrop:a.handleDrop})},a.discoverProviderPlugins=function(){a.uppy.iteratePlugins((function(e){e&&!e.target&&e.opts&&e.opts.target===a.constructor&&a.addTarget(e)}))},a.install=function(){a.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,showFileEditor:!1,metaFields:a.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});var e=a.opts,t=e.inline,n=e.closeAfterFinish;if(t&&n)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");var r=a.uppy.opts,i=r.allowMultipleUploads,o=r.allowMultipleUploadBatches;(i||o)&&n&&a.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");var s=a.opts.target;s&&a.mount(s,(0,d.Z)(a)),(a.opts.plugins||[]).forEach((function(e){var t=a.uppy.getPlugin(e);t&&t.mount((0,d.Z)(a),t)})),a.opts.disableStatusBar||a.uppy.use(Q,{id:"".concat(a.id,":StatusBar"),target:(0,d.Z)(a),hideUploadButton:a.opts.hideUploadButton,hideRetryButton:a.opts.hideRetryButton,hidePauseResumeButton:a.opts.hidePauseResumeButton,hideCancelButton:a.opts.hideCancelButton,showProgressDetails:a.opts.showProgressDetails,hideAfterFinish:a.opts.hideProgressAfterFinish,locale:a.opts.locale,doneButtonHandler:a.opts.doneButtonHandler}),a.opts.disableInformer||a.uppy.use(se,{id:"".concat(a.id,":Informer"),target:(0,d.Z)(a)}),a.opts.disableThumbnailGenerator||a.uppy.use(Yt,{id:"".concat(a.id,":ThumbnailGenerator"),thumbnailWidth:a.opts.thumbnailWidth,thumbnailHeight:a.opts.thumbnailHeight,thumbnailType:a.opts.thumbnailType,waitForThumbnailsBeforeUpload:a.opts.waitForThumbnailsBeforeUpload,lazy:!a.opts.waitForThumbnailsBeforeUpload}),a.darkModeMediaQuery="undefined"!==typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;var u=!!a.darkModeMediaQuery&&a.darkModeMediaQuery.matches;a.uppy.log("[Dashboard] Dark mode is ".concat(u?"on":"off")),a.setDarkModeCapability(u),"auto"===a.opts.theme&&a.darkModeMediaQuery.addListener(a.handleSystemDarkModeChange),a.discoverProviderPlugins(),a.initEvents()},a.uninstall=function(){if(!a.opts.disableInformer){var e=a.uppy.getPlugin("".concat(a.id,":Informer"));e&&a.uppy.removePlugin(e)}if(!a.opts.disableStatusBar){var t=a.uppy.getPlugin("".concat(a.id,":StatusBar"));t&&a.uppy.removePlugin(t)}if(!a.opts.disableThumbnailGenerator){var n=a.uppy.getPlugin("".concat(a.id,":ThumbnailGenerator"));n&&a.uppy.removePlugin(n)}(a.opts.plugins||[]).forEach((function(e){var t=a.uppy.getPlugin(e);t&&t.unmount()})),"auto"===a.opts.theme&&a.darkModeMediaQuery.removeListener(a.handleSystemDarkModeChange),a.unmount(),a.removeEvents()},a.id=a.opts.id||"Dashboard",a.title="Dashboard",a.type="orchestrator",a.modalName="uppy-Dashboard-".concat(yn()),a.defaultLocale=br;var u={target:"body",metaFields:[],trigger:null,inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:Sr,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,doneButtonHandler:function(){a.uppy.cancelAll(),a.requestCloseModal()},note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:function(){return a.closeModal()},showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1};return a.opts=(0,r.Z)((0,r.Z)({},u),o),a.i18nInit(),a.superFocus=function(){var e=!1;return _n((function(t,n){var r=bn(t,n),i=r.contains(document.activeElement);if(!i||!e){var o=r.querySelector("[data-uppy-super-focusable]");if(!i||o)if(o)o.focus({preventScroll:!0}),e=!0;else{var a=r.querySelector(gn);null==a||a.focus({preventScroll:!0}),e=!1}}}),260)}(),a.ifFocusedOnUppyRecently=!1,a.makeDashboardInsidesVisibleAnywayTimeout=null,a.removeDragOverClassTimeout=null,a}return(0,o.Z)(n)}(v.di);Rr.VERSION="3.4.0";var Dr=n(75192),Nr=Dr.instanceOf(v.hS),Ir=Dr.arrayOf(Dr.string),Br=Dr.shape({strings:Dr.object,pluralize:Dr.func}),Lr=Dr.shape({id:Dr.string.isRequired,name:Dr.string.isRequired,placeholder:Dr.string}),Mr=Dr.oneOfType([Dr.arrayOf(Lr),Dr.func]),jr=Dr.oneOfType([Dr.string,Dr.number]),zr={uppy:Nr,inline:Dr.bool,plugins:Ir,width:jr,height:jr,showProgressDetails:Dr.bool,hideUploadButton:Dr.bool,hideProgressAfterFinish:Dr.bool,note:Dr.string,metaFields:Mr,proudlyDisplayPoweredByUppy:Dr.bool,disableStatusBar:Dr.bool,disableInformer:Dr.bool,disableThumbnailGenerator:Dr.bool,thumbnailWidth:Dr.number,locale:Br},qr=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Hr=/^(aria-|data-)/,Vr=function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,J.Z)(e,1)[0];return Hr.test(t)||qr.includes(t)})))};function Wr(e,t){return Object.keys(e).some((function(n){return!Object.hasOwn(e,n)&&e[n]!==t[n]}))}var Kr=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(Wr(this.props,e)){var t=(0,r.Z)((0,r.Z)({},this.props),{},{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props.uppy,t=(0,r.Z)((0,r.Z)({id:"react:Dashboard"},this.props),{},{target:this.container});delete t.uppy,e.use(Rr,t),this.plugin=e.getPlugin(t.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,u.createElement)("div",(0,r.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Vr(this.props)))}}]),n}(u.Component);Kr.propTypes=zr,Kr.defaultProps={inline:!0};var Yr=Kr,Gr=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.uppy,i=t.open,o=t.onRequestClose;if(e.uppy!==n)this.uninstallPlugin(e),this.installPlugin();else if(Wr(this.props,e)){var a=(0,r.Z)((0,r.Z)({},this.props),{},{onRequestCloseModal:o});delete a.uppy,this.plugin.setOptions(a)}e.open&&!i?this.plugin.closeModal():!e.open&&i&&this.plugin.openModal()}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n=e.target,r=e.open,i=e.onRequestClose,o={id:"react:DashboardModal",target:n,closeModalOnClickOutside:e.closeModalOnClickOutside,disablePageScrollWhenModalOpen:e.disablePageScrollWhenModalOpen,inline:e.inline,plugins:e.plugins,width:e.width,height:e.height,showProgressDetails:e.showProgressDetails,note:e.note,metaFields:e.metaFields,proudlyDisplayPoweredByUppy:e.proudlyDisplayPoweredByUppy,autoOpenFileEditor:e.autoOpenFileEditor,animateOpenClose:e.animateOpenClose,browserBackButtonClose:e.browserBackButtonClose,closeAfterFinish:e.closeAfterFinish,disableStatusBar:e.disableStatusBar,disableInformer:e.disableInformer,disableThumbnailGenerator:e.disableThumbnailGenerator,disableLocalFiles:e.disableLocalFiles,disabled:e.disabled,hideCancelButton:e.hideCancelButton,hidePauseResumeButton:e.hidePauseResumeButton,hideProgressAfterFinish:e.hideProgressAfterFinish,hideRetryButton:e.hideRetryButton,hideUploadButton:e.hideUploadButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,showSelectedFiles:e.showSelectedFiles,waitForThumbnailsBeforeUpload:e.waitForThumbnailsBeforeUpload,fileManagerSelectionType:e.fileManagerSelectionType,theme:e.theme,thumbnailType:e.thumbnailType,thumbnailWidth:e.thumbnailWidth,locale:e.locale,onRequestCloseModal:i};o.target||(o.target=this.container),delete o.uppy,t.use(Rr,o),this.plugin=t.getPlugin(o.id),r&&this.plugin.openModal()}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,u.createElement)("div",(0,r.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Vr(this.props)))}}]),n}(u.Component);Gr.propTypes={uppy:Nr.isRequired,target:"undefined"!==typeof window?Dr.instanceOf(window.HTMLElement):Dr.any,open:Dr.bool,onRequestClose:Dr.func,closeModalOnClickOutside:Dr.bool,disablePageScrollWhenModalOpen:Dr.bool,inline:Dr.bool,plugins:Ir,width:jr,height:jr,showProgressDetails:Dr.bool,note:Dr.string,metaFields:Mr,proudlyDisplayPoweredByUppy:Dr.bool,autoOpenFileEditor:Dr.bool,animateOpenClose:Dr.bool,browserBackButtonClose:Dr.bool,closeAfterFinish:Dr.bool,disableStatusBar:Dr.bool,disableInformer:Dr.bool,disableThumbnailGenerator:Dr.bool,disableLocalFiles:Dr.bool,disabled:Dr.bool,hideCancelButton:Dr.bool,hidePauseResumeButton:Dr.bool,hideProgressAfterFinish:Dr.bool,hideRetryButton:Dr.bool,hideUploadButton:Dr.bool,showLinkToFileUploadResult:Dr.bool,showRemoveButtonAfterComplete:Dr.bool,showSelectedFiles:Dr.bool,waitForThumbnailsBeforeUpload:Dr.bool,fileManagerSelectionType:Dr.string,theme:Dr.string,thumbnailType:Dr.string,thumbnailWidth:Dr.number,locale:Br},Gr.defaultProps={metaFields:[],plugins:[],inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1,open:void 0,target:void 0,locale:null,onRequestClose:void 0};var Xr=Gr,Qr={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}},$r=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o){var a;(0,i.Z)(this,n),(a=t.call(this,e,o)).handleDrop=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r,i,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),clearTimeout(a.removeDragOverClassTimeout),a.setPluginState({isDraggingOver:!1}),i=function(e){a.uppy.log(e,"error")},e.next=7,dn(t.dataTransfer,{logDropError:i});case 7:(o=e.sent).length>0&&(a.uppy.log("[DragDrop] Files dropped"),a.addFiles(o)),null==(n=(r=a.opts).onDrop)||n.call(r,t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.type="acquirer",a.id=a.opts.id||"DragDrop",a.title="Drag & Drop",a.defaultLocale=Qr;return a.opts=(0,r.Z)((0,r.Z)({},{target:null,inputName:"files[]",width:"100%",height:"100%",note:null}),o),a.i18nInit(),a.isDragDropSupported=Pn(),a.removeDragOverClassTimeout=null,a.onInputChange=a.onInputChange.bind((0,d.Z)(a)),a.handleDragOver=a.handleDragOver.bind((0,d.Z)(a)),a.handleDragLeave=a.handleDragLeave.bind((0,d.Z)(a)),a.handleDrop=a.handleDrop.bind((0,d.Z)(a)),a.addFiles=a.addFiles.bind((0,d.Z)(a)),a.render=a.render.bind((0,d.Z)(a)),a}return(0,o.Z)(n,[{key:"addFiles",value:function(e){var t=this,n=e.map((function(e){return{source:t.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}}}));try{this.uppy.addFiles(n)}catch(r){this.uppy.log(r)}}},{key:"onInputChange",value:function(e){var t=(0,Qt.Z)(e.target.files);t.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(t)),e.target.value=null}},{key:"handleDragOver",value:function(e){var t,n;e.preventDefault(),e.stopPropagation();var r=e.dataTransfer.types.some((function(e){return"Files"===e})),i=this.uppy.getState().allowNewUpload;if(!r||!i)return e.dataTransfer.dropEffect="none",void clearTimeout(this.removeDragOverClassTimeout);e.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),null==(t=(n=this.opts).onDragOver)||t.call(n,e)}},{key:"handleDragLeave",value:function(e){var t,n,r=this;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout((function(){r.setPluginState({isDraggingOver:!1})}),50),null==(t=(n=this.opts).onDragLeave)||t.call(n,e)}},{key:"renderHiddenFileInput",value:function(){var e=this,t=this.uppy.opts.restrictions;return(0,f.h)("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:function(t){e.fileInputRef=t},name:this.opts.inputName,multiple:1!==t.maxNumberOfFiles,accept:t.allowedFileTypes,onChange:this.onInputChange})}},{key:"renderLabel",value:function(){return(0,f.h)("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:(0,f.h)("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))}},{key:"renderNote",value:function(){return(0,f.h)("span",{className:"uppy-DragDrop-note"},this.opts.note)}},{key:"render",value:function(){var e=this,t="uppy-u-reset\n      uppy-DragDrop-container\n      ".concat(this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":"","\n      ").concat(this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":"","\n    "),r={width:this.opts.width,height:this.opts.height};return(0,f.h)("button",{type:"button",className:t,style:r,onClick:function(){return e.fileInputRef.click()},onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),(0,f.h)("div",{className:"uppy-DragDrop-inner"},n.renderArrowSvg(),this.renderLabel(),this.renderNote()))}},{key:"install",value:function(){var e=this.opts.target;this.setPluginState({isDraggingOver:!1}),e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}],[{key:"renderArrowSvg",value:function(){return(0,f.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},(0,f.h)("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))}}]),n}(v.di);$r.VERSION="3.0.2";var Jr=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(Wr(this.props,e)){var t=(0,r.Z)((0,r.Z)({},this.props),{},{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n={id:"react:DragDrop",locale:e.locale,inputName:e.inputName,width:e.width,height:e.height,note:e.note,target:this.container};delete n.uppy,t.use($r,n),this.plugin=t.getPlugin(n.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,u.createElement)("div",(0,r.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Vr(this.props)))}}]),n}(u.Component);Jr.propTypes={uppy:Nr.isRequired,locale:Br,inputName:Dr.string,width:Dr.string,height:Dr.string,note:Dr.string},Jr.defaultProps={locale:null,inputName:"files[]",width:"100%",height:"100%",note:null};var ei=Jr,ti=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o){var a;(0,i.Z)(this,n),(a=t.call(this,e,o)).id=a.opts.id||"ProgressBar",a.title="Progress Bar",a.type="progressindicator";return a.opts=(0,r.Z)((0,r.Z)({},{target:"body",fixed:!1,hideAfterFinish:!0}),o),a.render=a.render.bind((0,d.Z)(a)),a}return(0,o.Z)(n,[{key:"render",value:function(e){var t=e.totalProgress||0,n=(0===t||100===t)&&this.opts.hideAfterFinish;return(0,f.h)("div",{className:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":n},(0,f.h)("div",{className:"uppy-ProgressBar-inner",style:{width:"".concat(t,"%")}}),(0,f.h)("div",{className:"uppy-ProgressBar-percentage"},t))}},{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}]),n}(v.di);ti.VERSION="3.0.2";var ni=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(Wr(this.props,e)){var t=(0,r.Z)((0,r.Z)({},this.props),{},{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n={id:"react:ProgressBar",fixed:e.fixed,hideAfterFinish:e.hideAfterFinish,target:this.container};delete n.uppy,t.use(ti,n),this.plugin=t.getPlugin(n.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,u.createElement)("div",(0,r.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Vr(this.props)))}}]),n}(u.Component);ni.propTypes={uppy:Nr.isRequired,fixed:Dr.bool,hideAfterFinish:Dr.bool},ni.defaultProps={fixed:!1,hideAfterFinish:!0};var ri=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(Wr(this.props,e)){var t=(0,r.Z)((0,r.Z)({},this.props),{},{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n={id:"react:StatusBar",hideUploadButton:e.hideUploadButton,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showProgressDetails:e.showProgressDetails,hideAfterFinish:e.hideAfterFinish,doneButtonHandler:e.doneButtonHandler,target:this.container};delete n.uppy,t.use(Q,n),this.plugin=t.getPlugin(n.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,u.createElement)("div",(0,r.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Vr(this.props)))}}]),n}(u.Component);ri.propTypes={uppy:Nr.isRequired,hideUploadButton:Dr.bool,hideRetryButton:Dr.bool,hidePauseResumeButton:Dr.bool,hideCancelButton:Dr.bool,showProgressDetails:Dr.bool,hideAfterFinish:Dr.bool,doneButtonHandler:Dr.func},ri.defaultProps={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var ii={strings:{chooseFiles:"Choose files"}},oi=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,o){var a;(0,i.Z)(this,n),(a=t.call(this,e,o)).id=a.opts.id||"FileInput",a.title="File Input",a.type="acquirer",a.defaultLocale=ii;return a.opts=(0,r.Z)((0,r.Z)({},{target:null,pretty:!0,inputName:"files[]"}),o),a.i18nInit(),a.render=a.render.bind((0,d.Z)(a)),a.handleInputChange=a.handleInputChange.bind((0,d.Z)(a)),a.handleClick=a.handleClick.bind((0,d.Z)(a)),a}return(0,o.Z)(n,[{key:"addFiles",value:function(e){var t=this,n=e.map((function(e){return{source:t.id,name:e.name,type:e.type,data:e}}));try{this.uppy.addFiles(n)}catch(r){this.uppy.log(r)}}},{key:"handleInputChange",value:function(e){this.uppy.log("[FileInput] Something selected through input...");var t=(0,Qt.Z)(e.target.files);this.addFiles(t),e.target.value=null}},{key:"handleClick",value:function(){this.input.click()}},{key:"render",value:function(){var e=this,t=this.uppy.opts.restrictions,n=t.allowedFileTypes?t.allowedFileTypes.join(","):null;return(0,f.h)("div",{className:"uppy-FileInput-container"},(0,f.h)("input",{className:"uppy-FileInput-input",style:this.opts.pretty&&{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},type:"file",name:this.opts.inputName,onChange:this.handleInputChange,multiple:1!==t.maxNumberOfFiles,accept:n,ref:function(t){e.input=t}}),this.opts.pretty&&(0,f.h)("button",{className:"uppy-FileInput-btn",type:"button",onClick:this.handleClick},this.i18n("chooseFiles")))}},{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}]),n}(v.di);oi.VERSION="3.0.2";var ai=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){e.uppy!==this.props.uppy&&(this.uninstallPlugin(e),this.installPlugin())}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n={id:"react:FileInput",locale:e.locale,pretty:e.pretty,inputName:e.inputName,target:this.container};delete n.uppy,t.use(oi,n),this.plugin=t.getPlugin(n.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,u.createElement)("div",{className:"uppy-Container",ref:function(t){e.container=t}})}}]),n}(u.Component);ai.propTypes={uppy:Nr.isRequired,locale:Br,pretty:Dr.bool,inputName:Dr.string},ai.defaultProps={locale:void 0,pretty:!0,inputName:"files[]"}},2337:function(e,t,n){"use strict";n.d(t,{ZP:function(){return no}});var r={};n.r(r),n.d(r,{Decoder:function(){return lr},Encoder:function(){return ur},PacketType:function(){return ar},protocol:function(){return sr}});var i=n(42982),o=n(1413),a=n(37762),s=n(70885),u=n(4942),l=n(74165),c=n(15861),p=n(15671),h=n(43144),d=n(97326),f=n(60136),v=n(29388),y=n(26516),m=n(69549);function g(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var b=0;function w(e){return"__private_"+b+++"_"+e}function k(e){return new Error("Cancelled",{cause:e})}function _(e){var t=this;if(null!=e){var n=function(){return t.abort(e.reason)};e.addEventListener("abort",n,{once:!0});var r=function(){e.removeEventListener("abort",n)};this.then(r,r)}return this}var P=w("activeRequests"),Z=w("queuedHandlers"),S=w("paused"),C=w("pauseTimer"),F=w("downLimit"),x=w("upperLimit"),O=w("rateLimitingTimer"),E=w("call"),T=w("queueNext"),A=w("next"),U=w("queue"),R=w("dequeue"),D=w("resume"),N=w("increaseLimit"),I=function(){function e(t){var n=this;(0,p.Z)(this,e),Object.defineProperty(this,R,{value:z}),Object.defineProperty(this,U,{value:j}),Object.defineProperty(this,A,{value:M}),Object.defineProperty(this,T,{value:L}),Object.defineProperty(this,E,{value:B}),Object.defineProperty(this,P,{writable:!0,value:0}),Object.defineProperty(this,Z,{writable:!0,value:[]}),Object.defineProperty(this,S,{writable:!0,value:!1}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,F,{writable:!0,value:1}),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:function(){return n.resume()}}),Object.defineProperty(this,N,{writable:!0,value:function(){if(g(n,S)[S])g(n,O)[O]=setTimeout(g(n,N)[N],0);else{g(n,F)[F]=n.limit,n.limit=Math.ceil((g(n,x)[x]+g(n,F)[F])/2);for(var e=g(n,F)[F];e<=n.limit;e++)g(n,T)[T]();g(n,x)[x]-g(n,F)[F]>3?g(n,O)[O]=setTimeout(g(n,N)[N],2e3):g(n,F)[F]=Math.floor(g(n,F)[F]/2)}}}),this.limit="number"!==typeof t||0===t?1/0:t}return(0,h.Z)(e,[{key:"run",value:function(e,t){return!g(this,S)[S]&&g(this,P)[P]<this.limit?g(this,E)[E](e):g(this,U)[U](e,t)}},{key:"wrapPromiseFunction",value:function(e,t){var n=this;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a,s=new Promise((function(r,o){a=n.run((function(){var t,n;try{n=Promise.resolve(e.apply(void 0,i))}catch(s){n=Promise.reject(s)}return n.then((function(e){t?o(t):(a.done(),r(e))}),(function(e){t?o(t):(a.done(),o(e))})),function(e){t=k(e)}}),t)}));return s.abort=function(e){a.abort(e)},s.abortOn=_,s}}},{key:"resume",value:function(){g(this,S)[S]=!1,clearTimeout(g(this,C)[C]);for(var e=0;e<this.limit;e++)g(this,T)[T]()}},{key:"pause",value:function(e){void 0===e&&(e=null),g(this,S)[S]=!0,clearTimeout(g(this,C)[C]),null!=e&&(g(this,C)[C]=setTimeout(g(this,D)[D],e))}},{key:"rateLimit",value:function(e){clearTimeout(g(this,O)[O]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(g(this,x)[x]=this.limit-1,this.limit=g(this,F)[F],g(this,O)[O]=setTimeout(g(this,N)[N],e))}},{key:"isPaused",get:function(){return g(this,S)[S]}}]),e}();function B(e){var t=this;g(this,P)[P]+=1;var n,r=!1;try{n=e()}catch(i){throw g(this,P)[P]-=1,i}return{abort:function(e){r||(r=!0,g(t,P)[P]-=1,n(e),g(t,T)[T]())},done:function(){r||(r=!0,g(t,P)[P]-=1,g(t,T)[T]())}}}function L(){var e=this;queueMicrotask((function(){return g(e,A)[A]()}))}function M(){if(!(g(this,S)[S]||g(this,P)[P]>=this.limit)&&0!==g(this,Z)[Z].length){var e=g(this,Z)[Z].shift(),t=g(this,E)[E](e.fn);e.abort=t.abort,e.done=t.done}}function j(e,t){var n=this;void 0===t&&(t={});var r={fn:e,priority:t.priority||0,abort:function(){g(n,R)[R](r)},done:function(){throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=g(this,Z)[Z].findIndex((function(e){return r.priority>e.priority}));return-1===i?g(this,Z)[Z].push(r):g(this,Z)[Z].splice(i,0,r),r}function z(e){var t=g(this,Z)[Z].indexOf(e);-1!==t&&g(this,Z)[Z].splice(t,1)}Symbol("__queue");var q=n(98339),H="function"===typeof btoa,V="function"===typeof Buffer,W=("function"===typeof TextDecoder&&new TextDecoder,"function"===typeof TextEncoder?new TextEncoder:void 0),K=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Y=(function(e){var t={};e.forEach((function(e,n){return t[e]=n}))}(K),String.fromCharCode.bind(String)),G=("function"===typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))}),X=function(e){for(var t,n,r,i,o="",a=e.length%3,s=0;s<e.length;){if((n=e.charCodeAt(s++))>255||(r=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");o+=K[(t=n<<16|r<<8|i)>>18&63]+K[t>>12&63]+K[t>>6&63]+K[63&t]}return a?o.slice(0,a-3)+"===".substring(a):o},Q=H?function(e){return btoa(e)}:V?function(e){return Buffer.from(e,"binary").toString("base64")}:X,$=V?function(e){return Buffer.from(e).toString("base64")}:function(e){for(var t=[],n=0,r=e.length;n<r;n+=4096)t.push(Y.apply(null,e.subarray(n,n+4096)));return Q(t.join(""))},J=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?Y(192|t>>>6)+Y(128|63&t):Y(224|t>>>12&15)+Y(128|t>>>6&63)+Y(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return Y(240|t>>>18&7)+Y(128|t>>>12&63)+Y(128|t>>>6&63)+Y(128|63&t)},ee=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,te=function(e){return e.replace(ee,J)},ne=V?function(e){return Buffer.from(e,"utf8").toString("base64")}:W?function(e){return $(W.encode(e))}:function(e){return Q(te(e))},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?G(ne(e)):ne(e)},ie=re,oe=n(34395),ae=n.n(oe);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){if(t&&("object"===se(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pe(e){var t="function"===typeof Map?new Map:void 0;return pe=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return he(e,arguments,ve(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),fe(r,e)},pe(e)}function he(e,t,n){return he=de()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&fe(i,n.prototype),i},he.apply(null,arguments)}function de(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}var ye=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(o,e);var t,n,r,i=function(e){var t=de();return function(){var n,r=ve(e);if(t){var i=ve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ce(this,n)}}(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(le(this,o),(t=i.call(this,e)).originalRequest=r,t.originalResponse=a,t.causingError=n,null!=n&&(e+=", caused by ".concat(n.toString())),null!=r){var s=r.getHeader("X-Request-ID")||"n/a",u=r.getMethod(),l=r.getURL(),c=a?a.getStatus():"n/a",p=a?a.getBody()||"":"n/a";e+=", originated from request (method: ".concat(u,", url: ").concat(l,", response code: ").concat(c,", response text: ").concat(p,", request id: ").concat(s,")")}return t.message=e,t}return t=o,n&&ue(t.prototype,n),r&&ue(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(pe(Error)),me=ye,ge=!1;function be(e){ge&&console.log(e)}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ce={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},Fe=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,n,r;return t=e,n=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl||this.url){var n=this.options.retryDelays;if(null==n||"[object Array]"===Object.prototype.toString.call(n)){if(this.options.parallelUploads>1)for(var r=0,i=["uploadUrl","uploadSize","uploadLengthDeferred"];r<i.length;r++){var o=i[r];if(this.options[o])return void this._emitError(new Error("tus: cannot use the ".concat(o," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(t,this.options).then((function(n){return be(null==n?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(n)),e._fingerprint=n,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){if(e._source=t,e.options.uploadLengthDeferred)e._size=null;else if(null!=e.options.uploadSize){if(e._size=Number(e.options.uploadSize),Number.isNaN(e._size))return void e._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(e._size=e._source.size,null==e._size)return void e._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t,n=this,r=this._size,i=0;this._parallelUploads=[];var o=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,a=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:function(e,t){for(var n=Math.floor(e/t),r=[],i=0;i<t;i++)r.push({start:n*i,end:n*(i+1)});return r[t-1].end=e,r}(this._source.size,o);this._parallelUploadUrls&&a.forEach((function(e,t){e.uploadUrl=n._parallelUploadUrls[t]||null})),this._parallelUploadUrls=new Array(a.length);var s,u=a.map((function(t,o){var s=0;return n._source.slice(t.start,t.end).then((function(u){var l=u.value;return new Promise((function(u,c){var p=Pe(Pe({},n.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:Pe(Pe({},n.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:u,onError:c,onProgress:function(e){i=i-s+e,s=e,n._emitProgress(i,r)},onUploadUrlAvailable:function(){n._parallelUploadUrls[o]=h.url,n._parallelUploadUrls.filter((function(e){return Boolean(e)})).length===a.length&&n._saveUploadInUrlStorage()}}),h=new e(l,p);h.start(),n._parallelUploads.push(h)}))}))}));Promise.all(u).then((function(){(s=n._openRequest("POST",n.options.endpoint)).setHeader("Upload-Concat","final;".concat(n._parallelUploadUrls.join(" ")));var e=xe(n.options.metadata);return""!==e&&s.setHeader("Upload-Metadata",e),n._sendRequest(s,null)})).then((function(e){if(Oe(e.getStatus(),200)){var t=e.getHeader("Location");null!=t?(n.url=Ue(n.options.endpoint,t),be("Created upload at ".concat(n.url)),n._emitSuccess()):n._emitHttpError(s,e,"tus: invalid or missing Location header")}else n._emitHttpError(s,e,"tus: unexpected response while creating upload")})).catch((function(e){n._emitError(e)}))}},{key:"_startSingleUpload",value:function(){return this._aborted=!1,null!=this.url?(be("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(be("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):(be("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t){var n=this;return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return n._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,n,r){this._emitError(new me(n,r,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),Ae(e,this._retryAttempt,this.options))){var n=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),n))}if("function"!==typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"===typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"===typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"===typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var n,r=xe(this.options.metadata);""!==r&&t.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,n=this._addChunkToRequest(t)):n=this._sendRequest(t,null),n.then((function(n){if(Oe(n.getStatus(),200)){var r=n.getHeader("Location");if(null!=r){if(e.url=Ue(e.options.endpoint,r),be("Created upload at ".concat(e.url)),"function"===typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage().then((function(){e.options.uploadDataDuringCreation?e._handleUploadResponse(t,n):(e._offset=0,e._performUpload())}))}else e._emitHttpError(t,n,"tus: invalid or missing Location header")}else e._emitHttpError(t,n,"tus: unexpected response while creating upload")})).catch((function(n){e._emitHttpError(t,null,"tus: failed to create upload",n)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(n){var r=n.getStatus();if(!Oe(r,200))return 423===r?void e._emitHttpError(t,n,"tus: upload is currently locked; retry later"):(Oe(r,400)&&e._removeFromUrlStorage(),e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,n,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var i=parseInt(n.getHeader("Upload-Offset"),10);if(Number.isNaN(i))e._emitHttpError(t,n,"tus: invalid or missing offset value");else{var o=parseInt(n.getHeader("Upload-Length"),10);!Number.isNaN(o)||e.options.uploadLengthDeferred?("function"===typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),e._saveUploadInUrlStorage().then((function(){if(i===o)return e._emitProgress(o,o),void e._emitSuccess();e._offset=i,e._performUpload()}))):e._emitHttpError(t,n,"tus: invalid or missing length value")}})).catch((function(n){e._emitHttpError(t,null,"tus: failed to resume upload",n)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(n){Oe(n.getStatus(),200)?t._handleUploadResponse(e,n):t._emitHttpError(e,n,"tus: unexpected response while uploading chunk")})).catch((function(n){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),n)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,n=this._offset,r=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(n+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(n,r).then((function(n){var r=n.value,i=n.done;return t.options.uploadLengthDeferred&&i&&(t._size=t._offset+(r&&r.size?r.size:0),e.setHeader("Upload-Length",t._size)),null===r?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,r))}))}},{key:"_handleUploadResponse",value:function(e,t){var n=parseInt(t.getHeader("Upload-Offset"),10);if(Number.isNaN(n))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n===this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var n=Ee(e,t,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){e._urlStorageKey=t}))}},{key:"_sendRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Te(e,t,this.options)}}],r=[{key:"terminate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Ee("DELETE",t,n);return Te(r,null,n).then((function(e){if(204!==e.getStatus())throw new me("tus: unexpected response while terminating upload",null,r,e)})).catch((function(i){if(i instanceof me||(i=new me("tus: failed to terminate upload",i,r,null)),!Ae(i,0,n))throw i;var o=n.retryDelays[0],a=n.retryDelays.slice(1),s=Pe(Pe({},n),{},{retryDelays:a});return new Promise((function(e){return setTimeout(e,o)})).then((function(){return e.terminate(t,s)}))}))}}],n&&Se(t.prototype,n),r&&Se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xe(e){return Object.entries(e).map((function(e){var t=we(e,2),n=t[0],r=t[1];return"".concat(n," ").concat(ie(String(r)))})).join(",")}function Oe(e,t){return e>=t&&e<t+100}function Ee(e,t,n){var r=n.httpStack.createRequest(e,t);r.setHeader("Tus-Resumable","1.0.0");var i=n.headers||{};if(Object.entries(i).forEach((function(e){var t=we(e,2),n=t[0],i=t[1];r.setHeader(n,i)})),n.addRequestId){var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));r.setHeader("X-Request-ID",o)}return r}function Te(e,t,n){return("function"===typeof n.onBeforeRequest?Promise.resolve(n.onBeforeRequest(e)):Promise.resolve()).then((function(){return e.send(t).then((function(t){return("function"===typeof n.onAfterResponse?Promise.resolve(n.onAfterResponse(e,t)):Promise.resolve()).then((function(){return t}))}))}))}function Ae(e,t,n){if(null==n.retryDelays||t>=n.retryDelays.length||null==e.originalRequest)return!1;if(n&&"function"===typeof n.onShouldRetry)return n.onShouldRetry(e,t,n);var r=e.originalResponse?e.originalResponse.getStatus():0;return(!Oe(r,400)||409===r||423===r)&&function(){var e=!0;return"undefined"!==typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(e=!1),e}()}function Ue(e,t){return new(ae())(t,e).toString()}Fe.defaultOptions=Ce;var Re=Fe;function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ne=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&De(t.prototype,n),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Be=!1;try{Be="localStorage"in window;var Le="tusSupport",Me=localStorage.getItem(Le);localStorage.setItem(Le,Me),null===Me&&localStorage.removeItem(Le)}catch(mo){if(mo.code!==mo.SECURITY_ERR&&mo.code!==mo.QUOTA_EXCEEDED_ERR)throw mo;Be=!1}var je=Be,ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var n=Math.round(1e12*Math.random()),r="tus::".concat(e,"::").concat(n);return localStorage.setItem(r,JSON.stringify(t)),Promise.resolve(r)}},{key:"_findEntries",value:function(e){for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(0===r.indexOf(e))try{var i=JSON.parse(localStorage.getItem(r));i.urlStorageKey=r,t.push(i)}catch(mo){}}return t}}],n&&Ie(t.prototype,n),r&&Ie(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t,n){return t&&He(e.prototype,t),n&&He(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var We=function(){function e(){qe(this,e)}return Ve(e,[{key:"createRequest",value:function(e,t){return new Ke(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),Ke=function(){function e(t,n){qe(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,n,!0),this._method=t,this._url=n,this._headers={}}return Ve(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){e._xhr.onload=function(){n(new Ye(e._xhr))},e._xhr.onerror=function(e){r(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Ye=function(){function e(t){qe(this,e),this._xhr=t}return Ve(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Ge=function(){return"undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};var Xe=function(){return"undefined"!==typeof window&&("undefined"!==typeof window.PhoneGap||"undefined"!==typeof window.Cordova||"undefined"!==typeof window.cordova)};function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size}var t,n,r;return t=e,n=[{key:"slice",value:function(e,t){if(Xe())return n=this._file.slice(e,t),new Promise((function(e,t){var r=new FileReader;r.onload=function(){var t=new Uint8Array(r.result);e({value:t})},r.onerror=function(e){t(e)},r.readAsArrayBuffer(n)}));var n,r=this._file.slice(e,t);return Promise.resolve({value:r})}},{key:"close",value:function(){}}],n&&Qe(t.prototype,n),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var tt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}var t,n,r;return t=e,n=[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var n=this,r=t<=this._bufferOffset+et(this._buffer);if(this._done||r){var i=this._getDataFromBuffer(e,t),o=null==i&&this._done;return Promise.resolve({value:i,done:o})}return this._reader.read().then((function(r){var i=r.value;return r.done?n._done=!0:void 0===n._buffer?n._buffer=i:n._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(n._buffer,i),n._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===et(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}],n&&Je(t.prototype,n),r&&Je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"openFile",value:function(e,t){return Ge()&&e&&"undefined"!==typeof e.uri?(n=e.uri,new Promise((function(e,t){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var t=r.response;e(t)},r.onerror=function(e){t(e)},r.open("GET",n),r.send()}))).then((function(e){return new $e(e)})).catch((function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e))})):"function"===typeof e.slice&&"undefined"!==typeof e.size?Promise.resolve(new $e(e)):"function"===typeof e.read?(t=Number(t),Number.isFinite(t)?Promise.resolve(new tt(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var n}}])&&nt(t.prototype,n),r&&nt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}function ut(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(mo){return!1}}();return function(){var n,r=ct(e);if(t){var i=ct(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lt(this,n)}}function lt(e,t){if(t&&("object"===it(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=ht(ht({},Re.defaultOptions),{},{httpStack:new We,fileReader:new rt,urlStorage:je?new ze:new Ne,fingerprint:function(e,t){return Ge()?Promise.resolve(function(e,t){var n=e.exif?function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",n,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}}),vt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(o,e);var t,n,r,i=ut(o);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ot(this,o),t=ht(ht({},ft),t),i.call(this,e,t)}return t=o,r=[{key:"terminate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=ht(ht({},ft),t),Re.terminate(e,t)}}],(n=null)&&at(t.prototype,n),r&&at(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(Re),yt=window,mt=yt.XMLHttpRequest,gt=yt.Blob,bt=(mt&&gt&&gt.prototype.slice,n(51280));var wt=n(82061)((function(e,t,n){var r=t.progress,i=t.bytesUploaded,o=t.bytesTotal;r&&(e.uppy.log("Upload progress: ".concat(r)),e.uppy.emit("upload-progress",n,{uploader:e,bytesUploaded:i,bytesTotal:o}))}),300,{leading:!0,trailing:!0});function kt(e){var t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(e)[1],n=/^http:\/\//i.test(e)?"ws":"wss";return"".concat(n,"://").concat(t)}function _t(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Pt=0;function Zt(e){return"__private_"+Pt+++"_"+e}var St=Zt("emitter"),Ct=Zt("events"),Ft=function(){function e(t){(0,p.Z)(this,e),Object.defineProperty(this,St,{writable:!0,value:void 0}),Object.defineProperty(this,Ct,{writable:!0,value:[]}),_t(this,St)[St]=t}return(0,h.Z)(e,[{key:"on",value:function(e,t){return _t(this,Ct)[Ct].push([e,t]),_t(this,St)[St].on(e,t)}},{key:"remove",value:function(){var e,t=(0,a.Z)(_t(this,Ct)[Ct].splice(0));try{for(t.s();!(e=t.n()).done;){var n=(0,s.Z)(e.value,2),r=n[0],i=n[1];_t(this,St)[St].off(r,i)}}catch(o){t.e(o)}finally{t.f()}}}]),e}(),xt=n(24911);var Ot=function(e){return!!e&&(0!==e.readyState&&4!==e.readyState||0===e.status)};function Et(e){return e.filter((function(e){return!function(e){return"error"in e&&e.error}(e)}))}function Tt(e){return e.filter((function(e){return!e.progress.uploadStarted||!e.isRestored}))}function At(e){return function(t,n){if("undefined"!==typeof window&&("undefined"!==typeof window.PhoneGap||"undefined"!==typeof window.Cordova||"undefined"!==typeof window.cordova)||"undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return ft.fingerprint(t,n);var r=["tus",e.id,n.endpoint].join("-");return Promise.resolve(r)}}function Ut(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Rt=0;function Dt(e){return"__private_"+Rt+++"_"+e}var Nt={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},It=Dt("retryDelayIterator"),Bt=Dt("queueRequestSocketToken"),Lt=Dt("upload"),Mt=Dt("requestSocketToken"),jt=Dt("uploadRemote"),zt=Dt("uploadFiles"),qt=Dt("handleUpload"),Ht=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i,a,s;(0,p.Z)(this,n),i=t.call(this,e,r),Object.defineProperty((0,d.Z)(i),zt,{value:Yt}),Object.defineProperty((0,d.Z)(i),jt,{value:Wt}),Object.defineProperty((0,d.Z)(i),Lt,{value:Vt}),Object.defineProperty((0,d.Z)(i),It,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),Bt,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),Mt,{writable:!0,value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r,a,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.remote.providerOptions.provider?bt.zt:bt.C$,r=new n(i.uppy,t.remote.providerOptions),a=(0,o.Z)({},i.opts),t.tus&&Object.assign(a,t.tus),e.next=6,r.post(t.remote.url,(0,o.Z)((0,o.Z)({},t.remote.body),{},{endpoint:a.endpoint,uploadUrl:a.uploadUrl,protocol:"tus",size:t.data.size,headers:a.headers,metadata:t.meta}));case 6:return s=e.sent,e.abrupt("return",s.token);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object.defineProperty((0,d.Z)(i),qt,{writable:!0,value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=3;break}return i.uppy.log("[Tus] No files to upload"),e.abrupt("return");case 3:return 0===i.opts.limit&&i.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),i.uppy.log("[Tus] Uploading..."),n=i.uppy.getFilesByIds(t),e.next=8,Ut((0,d.Z)(i),zt)[zt](n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),i.type="uploader",i.id=i.opts.id||"Tus",i.title="Tus";var u={useFastRemoteRetry:!0,limit:20,retryDelays:Nt.retryDelays,withCredentials:!1};if(i.opts=(0,o.Z)((0,o.Z)({},u),r),void 0===(null==r?void 0:r.allowedMetaFields)&&"metaFields"in i.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in r)throw new Error("The `autoRetry` option was deprecated and has been removed.");return i.requests=null!=(a=i.opts.rateLimitedQueue)?a:new I(i.opts.limit),Ut((0,d.Z)(i),It)[It]=null==(s=i.opts.retryDelays)?void 0:s.values(),i.uploaders=Object.create(null),i.uploaderEvents=Object.create(null),i.uploaderSockets=Object.create(null),i.handleResetProgress=i.handleResetProgress.bind((0,d.Z)(i)),Ut((0,d.Z)(i),Bt)[Bt]=i.requests.wrapPromiseFunction(Ut((0,d.Z)(i),Mt)[Mt],{priority:-1}),i}return(0,h.Z)(n,[{key:"handleResetProgress",value:function(){var e=(0,o.Z)({},this.uppy.getState().files);Object.keys(e).forEach((function(t){if(e[t].tus&&e[t].tus.uploadUrl){var n=(0,o.Z)({},e[t].tus);delete n.uploadUrl,e[t]=(0,o.Z)((0,o.Z)({},e[t]),{},{tus:n})}})),this.uppy.setState({files:e})}},{key:"resetUploaderReferences",value:function(e,t){if(void 0===t&&(t={}),this.uploaders[e]){var n=this.uploaders[e];n.abort(),t.abort&&n.abort(!0),this.uploaders[e]=null}this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)}},{key:"connectToServerSocket",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.abrupt("return",new Promise((function(e,i){var o,a=t.serverToken,s=kt(t.remote.companionUrl),u=new bt.sk({target:"".concat(s,"/api/").concat(a),autoOpen:!1});r.uploaderSockets[t.id]=u,r.uploaderEvents[t.id]=new Ft(r.uppy),r.onFileRemove(t.id,(function(){o.abort(),u.send("cancel",{}),r.resetUploaderReferences(t.id),e("upload ".concat(t.id," was removed"))})),r.onPause(t.id,(function(e){e?(o.abort(),u.send("pause",{})):(o.abort(),o=r.requests.run((function(){return u.open(),u.send("resume",{}),function(){return u.close()}})))})),r.onPauseAll(t.id,(function(){o.abort(),u.send("pause",{})})),r.onCancelAll(t.id,(function(r){"user"===(void 0===r?{}:r).reason&&(o.abort(),u.send("cancel",{}),n.resetUploaderReferences(t.id)),e("upload ".concat(t.id," was canceled"))})),r.onResumeAll(t.id,(function(){o.abort(),t.error&&u.send("pause",{}),o=r.requests.run((function(){return u.open(),u.send("resume",{}),function(){return u.close()}}))})),r.onRetry(t.id,(function(){u.isOpen&&(u.send("pause",{}),u.send("resume",{}))})),r.onRetryAll(t.id,(function(){u.isOpen&&(u.send("pause",{}),u.send("resume",{}))})),u.on("progress",(function(e){return wt(r,e,t)})),u.on("error",(function(e){var n=e.error.message,a=Object.assign(new Error(n),{cause:e.error});r.opts.useFastRemoteRetry?u.close():(r.resetUploaderReferences(t.id),r.uppy.setFileState(t.id,{serverToken:null})),r.uppy.emit("upload-error",t,a),o.done(),i(a)})),u.on("success",(function(n){var i={uploadURL:n.url};r.uppy.emit("upload-success",t,i),r.resetUploaderReferences(t.id),o.done(),e()})),o=r.requests.run((function(){return t.isPaused?u.send("pause",{}):u.open(),function(){return u.close()}}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onReceiveUploadUrl",value:function(e,t){var n=this.uppy.getFile(e.id);n&&(n.tus&&n.tus.uploadUrl===t||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(n.id,{tus:(0,o.Z)((0,o.Z)({},n.tus),{},{uploadUrl:t})})))}},{key:"onFileRemove",value:function(e,t){this.uploaderEvents[e].on("file-removed",(function(n){e===n.id&&t(n.id)}))}},{key:"onPause",value:function(e,t){this.uploaderEvents[e].on("upload-pause",(function(n,r){e===n&&t(r)}))}},{key:"onRetry",value:function(e,t){this.uploaderEvents[e].on("upload-retry",(function(n){e===n&&t()}))}},{key:"onRetryAll",value:function(e,t){var n=this;this.uploaderEvents[e].on("retry-all",(function(){n.uppy.getFile(e)&&t()}))}},{key:"onPauseAll",value:function(e,t){var n=this;this.uploaderEvents[e].on("pause-all",(function(){n.uppy.getFile(e)&&t()}))}},{key:"onCancelAll",value:function(e,t){var n=this;this.uploaderEvents[e].on("cancel-all",(function(){n.uppy.getFile(e)&&t.apply(void 0,arguments)}))}},{key:"onResumeAll",value:function(e,t){var n=this;this.uploaderEvents[e].on("resume-all",(function(){n.uppy.getFile(e)&&t()}))}},{key:"install",value:function(){this.uppy.setState({capabilities:(0,o.Z)((0,o.Z)({},this.uppy.getState().capabilities),{},{resumableUploads:!0})}),this.uppy.addUploader(Ut(this,qt)[qt]),this.uppy.on("reset-progress",this.handleResetProgress)}},{key:"uninstall",value:function(){this.uppy.setState({capabilities:(0,o.Z)((0,o.Z)({},this.uppy.getState().capabilities),{},{resumableUploads:!1})}),this.uppy.removeUploader(Ut(this,qt)[qt])}}]),n}(q.Z);function Vt(e){var t=this,n=this;return this.resetUploaderReferences(e.id),new Promise((function(r,i){var a,s,u,l=(0,o.Z)((0,o.Z)({},t.opts),e.tus||{});"function"===typeof l.headers&&(l.headers=l.headers(e));var c=(0,o.Z)((0,o.Z)({},Nt),l);c.fingerprint=At(e),c.onBeforeRequest=function(n){var r;if(n.getUnderlyingObject().withCredentials=!!l.withCredentials,"function"===typeof l.onBeforeRequest&&(r=l.onBeforeRequest(n,e)),(0,y.Z)(a,"shouldBeRequeued")){if(!a.shouldBeRequeued)return Promise.reject();var i,o=new Promise((function(e){i=e}));return a=t.requests.run((function(){return e.isPaused&&a.abort(),i(),function(){}})),Promise.all([o,r])}return r},c.onError=function(n){var r;t.uppy.log(n);var o=n.originalRequest?n.originalRequest.getUnderlyingObject():null;Ot(o)&&(n=new xt.Z(n,o)),t.resetUploaderReferences(e.id),null==(r=a)||r.abort(),t.uppy.emit("upload-error",e,n),i(n)},c.onProgress=function(n,r){t.onReceiveUploadUrl(e,u.url),t.uppy.emit("upload-progress",e,{uploader:t,bytesUploaded:n,bytesTotal:r})},c.onSuccess=function(){var n={uploadURL:u.url};t.resetUploaderReferences(e.id),a.done(),t.uppy.emit("upload-success",e,n),u.url&&t.uppy.log("Download ".concat(u.file.name," from ").concat(u.url)),r(u)};var p=function(e){var n,r=null==e||null==(n=e.originalResponse)?void 0:n.getStatus();if(429===r){if(!t.requests.isPaused){var i,o=null==(i=Ut(t,It)[It])?void 0:i.next();if(null==o||o.done)return!1;t.requests.rateLimit(o.value)}}else{if(r>400&&r<500&&409!==r)return!1;"undefined"!==typeof navigator&&!1===navigator.onLine&&(t.requests.isPaused||(t.requests.pause(),window.addEventListener("online",(function(){t.requests.resume()}),{once:!0})))}return a.abort(),a={shouldBeRequeued:!0,abort:function(){this.shouldBeRequeued=!1},done:function(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn:function(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};null!=l.onShouldRetry?c.onShouldRetry=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.onShouldRetry.apply(l,t.concat([p]))}:c.onShouldRetry=p;var h=function(e,t,n){(0,y.Z)(e,t)&&!(0,y.Z)(e,n)&&(e[n]=e[t])},d={};(Array.isArray(l.allowedMetaFields)?l.allowedMetaFields:Object.keys(e.meta)).forEach((function(t){d[t]=e.meta[t]})),h(d,"type","filetype"),h(d,"name","filename"),c.metadata=d,u=new vt(e.data,c),t.uploaders[e.id]=u,t.uploaderEvents[e.id]=new Ft(t.uppy),s=function(){return e.isPaused||u.start(),function(){}},u.findPreviousUploads().then((function(n){var r=n[0];r&&(t.uppy.log("[Tus] Resuming upload of ".concat(e.id," started at ").concat(r.creationTime)),u.resumeFromPreviousUpload(r))})),a=t.requests.run(s),t.onFileRemove(e.id,(function(n){a.abort(),t.resetUploaderReferences(e.id,{abort:!!u.url}),r("upload ".concat(n," was removed"))})),t.onPause(e.id,(function(e){a.abort(),e?u.abort():a=t.requests.run(s)})),t.onPauseAll(e.id,(function(){a.abort(),u.abort()})),t.onCancelAll(e.id,(function(t){"user"===(void 0===t?{}:t).reason&&(a.abort(),n.resetUploaderReferences(e.id,{abort:!!u.url})),r("upload ".concat(e.id," was canceled"))})),t.onResumeAll(e.id,(function(){a.abort(),e.error&&u.abort(),a=t.requests.run(s)}))})).catch((function(n){throw t.uppy.emit("upload-error",e,n),n}))}function Wt(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,c.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.resetUploaderReferences(t.id),e.prev=1,!t.serverToken){e.next=6;break}return e.next=5,this.connectToServerSocket(t);case 5:case 14:return e.abrupt("return",e.sent);case 6:return e.next=8,Ut(this,Bt)[Bt](t);case 8:if(n=e.sent,this.uppy.getState().files[t.id]){e.next=11;break}return e.abrupt("return",void 0);case 11:return this.uppy.setFileState(t.id,{serverToken:n}),e.next=14,this.connectToServerSocket(this.uppy.getFile(t.id));case 17:throw e.prev=17,e.t0=e.catch(1),this.uppy.setFileState(t.id,{serverToken:void 0}),this.uppy.emit("upload-error",t,e.t0),e.t0;case 22:case"end":return e.stop()}}),e,this,[[1,17]])})))).apply(this,arguments)}function Yt(e){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r,i=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Et(t),r=Tt(n),this.uppy.emit("upload-start",r),e.next=5,Promise.allSettled(n.map((function(e,n){var r=n+1,o=t.length;return e.isRemote?Ut(i,jt)[jt](e,r,o):Ut(i,Lt)[Lt](e,r,o)})));case 5:case"end":return e.stop()}}),e,this)}))),Gt.apply(this,arguments)}Ht.VERSION="3.1.0";var Xt=n(69380),Qt=n(11752),$t=n(61120),Jt=n(98737),en=Object.create(null);en.open="0",en.close="1",en.ping="2",en.pong="3",en.message="4",en.upgrade="5",en.noop="6";var tn=Object.create(null);Object.keys(en).forEach((function(e){tn[en[e]]=e}));for(var nn={type:"error",data:"parser error"},rn="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),on="function"===typeof ArrayBuffer,an=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)},sn=function(e,t,n){var r,i=e.type,o=e.data;return rn&&o instanceof Blob?t?n(o):an(o,n):on&&(o instanceof ArrayBuffer||(r=o,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(o):an(new Blob([o]),n):n(en[i]+(o||""))},un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ln="undefined"===typeof Uint8Array?[]:new Uint8Array(256),cn=0;cn<un.length;cn++)ln[un.charCodeAt(cn)]=cn;var pn="function"===typeof ArrayBuffer,hn=function(e,t){if(pn){var n=function(e){var t,n,r,i,o,a=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),c=new Uint8Array(l);for(t=0;t<s;t+=4)n=ln[e.charCodeAt(t)],r=ln[e.charCodeAt(t+1)],i=ln[e.charCodeAt(t+2)],o=ln[e.charCodeAt(t+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&o;return l}(e);return dn(n,t)}return{base64:!0,data:e}},dn=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},fn=function(e,t){if("string"!==typeof e)return{type:"message",data:dn(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:hn(e.substring(1),t)}:tn[n]?e.length>1?{type:tn[n],data:e.substring(1)}:{type:tn[n]}:nn},vn=String.fromCharCode(30);function yn(e){if(e)return function(e){for(var t in yn.prototype)e[t]=yn.prototype[t];return e}(e)}yn.prototype.on=yn.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},yn.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},yn.prototype.off=yn.prototype.removeListener=yn.prototype.removeAllListeners=yn.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},yn.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},yn.prototype.emitReserved=yn.prototype.emit,yn.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},yn.prototype.hasListeners=function(e){return!!this.listeners(e).length};var mn="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function gn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var bn=mn.setTimeout,wn=mn.clearTimeout;function kn(e,t){t.useNativeTimers?(e.setTimeoutFn=bn.bind(mn),e.clearTimeoutFn=wn.bind(mn)):(e.setTimeoutFn=mn.setTimeout.bind(mn),e.clearTimeoutFn=mn.clearTimeout.bind(mn))}var _n,Pn=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e,r,i){var o;return(0,p.Z)(this,n),(o=t.call(this,e)).description=r,o.context=i,o.type="TransportError",o}return(0,h.Z)(n)}((0,Jt.Z)(Error)),Zn=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r;return(0,p.Z)(this,n),(r=t.call(this)).writable=!1,kn((0,d.Z)(r),e),r.opts=e,r.query=e.query,r.socket=e.socket,r}return(0,h.Z)(n,[{key:"onError",value:function(e,t,r){return(0,Qt.Z)((0,$t.Z)(n.prototype),"emitReserved",this).call(this,"error",new Pn(e,t,r)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,(0,Qt.Z)((0,$t.Z)(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=fn(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){(0,Qt.Z)((0,$t.Z)(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",(0,Qt.Z)((0,$t.Z)(n.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}}]),n}(yn),Sn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Cn={},Fn=0,xn=0;function On(e){var t="";do{t=Sn[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function En(){var e=On(+new Date);return e!==_n?(Fn=0,_n=e):e+"."+On(Fn++)}for(;xn<64;xn++)Cn[Sn[xn]]=xn;function Tn(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function An(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}var Un=!1;try{Un="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(go){}var Rn=Un;function Dn(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Rn))return new XMLHttpRequest}catch(mo){}if(!t)try{return new(mn[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(mo){}}function Nn(){}var In=null!=new Dn({xdomain:!1}).responseType,Bn=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r;if((0,p.Z)(this,n),(r=t.call(this,e)).polling=!1,"undefined"!==typeof location){var i="https:"===location.protocol,o=location.port;o||(o=i?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||o!==e.port,r.xs=e.secure!==i}var a=e&&e.forceBase64;return r.supportsBinary=In&&!a,r}return(0,h.Z)(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(vn),r=[],i=0;i<n.length;i++){var o=fn(n[i],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),i=0;e.forEach((function(e,o){sn(e,!1,(function(e){r[o]=e,++i===n&&t(r.join(vn))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=En()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=Tn(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Ln(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(Zn),Ln=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i;return(0,p.Z)(this,n),i=t.call(this),kn((0,d.Z)(i),r),i.opts=r,i.method=r.method||"GET",i.uri=e,i.async=!1!==r.async,i.data=void 0!==r.data?r.data:null,i.create(),i}return(0,h.Z)(n,[{key:"create",value:function(){var e=this,t=gn(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new Dn(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(mo){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(mo){}try{r.setRequestHeader("Accept","*/*")}catch(mo){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(mo){return void this.setTimeoutFn((function(){e.onError(mo)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Nn,e)try{this.xhr.abort()}catch(mo){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(yn);if(Ln.requestsCount=0,Ln.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Mn);else if("function"===typeof addEventListener){addEventListener("onpagehide"in mn?"pagehide":"unload",Mn,!1)}function Mn(){for(var e in Ln.requests)Ln.requests.hasOwnProperty(e)&&Ln.requests[e].abort()}var jn="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},zn=mn.WebSocket||mn.MozWebSocket,qn="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Hn=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r;return(0,p.Z)(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return(0,h.Z)(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=qn?{}:gn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=qn?new zn(e,t,n):t?new zn(e,t):new zn(e)}catch(go){return this.emitReserved("error",go)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;sn(n,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(mo){}i&&jn((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=En()),this.supportsBinary||(e.b64=1);var r=Tn(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!zn}}]),n}(Zn),Vn={websocket:Hn,polling:Bn},Wn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Kn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Yn(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=Wn.exec(e||""),o={},a=14;a--;)o[Kn[a]]=i[a]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,o.query),o}var Gn=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,p.Z)(this,n),(r=t.call(this)).writeBuffer=[],e&&"object"===typeof e&&(i=e,e=null),e?(e=Yn(e),i.hostname=e.host,i.secure="https"===e.protocol||"wss"===e.protocol,i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=Yn(i.host).host),kn((0,d.Z)(r),i),r.secure=null!=i.secure?i.secure:"undefined"!==typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=r.secure?"443":"80"),r.hostname=i.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=i.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=i.transports||["polling","websocket"],r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),r.opts.path=r.opts.path.replace(/\/$/,"")+(r.opts.addTrailingSlash?"/":""),"string"===typeof r.opts.query&&(r.opts.query=An(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&(r.beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r.beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return(0,h.Z)(n,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Vn[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(mo){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),i=!1;n.priorWebsocketSuccess=!1;var o=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(p(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var o=new Error("probe error");o.transport=r.name,t.emitReserved("upgradeError",o)}})))};function a(){i||(i=!0,p(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,a(),t.emitReserved("upgradeError",n)};function u(){s("transport closed")}function l(){s("socket closed")}function c(e){r&&e.name!==r.name&&a()}var p=function(){r.removeListener("open",o),r.removeListener("error",s),r.removeListener("close",u),t.off("close",l),t.off("upgrading",c)};r.once("open",o),r.once("error",s),r.once("close",u),this.once("close",l),this.once("upgrading",c),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"===typeof(e=r)?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(yn);Gn.protocol=4;Gn.protocol;var Xn="function"===typeof ArrayBuffer,Qn=Object.prototype.toString,$n="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Qn.call(Blob),Jn="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Qn.call(File);function er(e){return Xn&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||$n&&e instanceof Blob||Jn&&e instanceof File}function tr(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(tr(e[n]))return!0;return!1}if(er(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return tr(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&tr(e[i]))return!0;return!1}function nr(e){var t=[],n=e.data,r=e;return r.data=rr(n,t),r.attachments=t.length,{packet:r,buffers:t}}function rr(e,t){if(!e)return e;if(er(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=rr(e[i],t);return r}if("object"===typeof e&&!(e instanceof Date)){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=rr(e[a],t));return o}return e}function ir(e,t){return e.data=or(e.data,t),delete e.attachments,e}function or(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=or(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=or(e[r],t));return e}var ar,sr=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(ar||(ar={}));var ur=function(){function e(t){(0,p.Z)(this,e),this.replacer=t}return(0,h.Z)(e,[{key:"encode",value:function(e){return e.type!==ar.EVENT&&e.type!==ar.ACK||!tr(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===ar.EVENT?ar.BINARY_EVENT:ar.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==ar.BINARY_EVENT&&e.type!==ar.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=nr(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),lr=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r;return(0,p.Z)(this,n),(r=t.call(this)).reviver=e,r}return(0,h.Z)(n,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(t=this.decodeString(e)).type===ar.BINARY_EVENT;r||t.type===ar.BINARY_ACK?(t.type=r?ar.EVENT:ar.ACK,this.reconstructor=new cr(t),0===t.attachments&&(0,Qt.Z)((0,$t.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)):(0,Qt.Z)((0,$t.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!er(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,(0,Qt.Z)((0,$t.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===ar[r.type])throw new Error("unknown packet type "+r.type);if(r.type===ar.BINARY_EVENT||r.type===ar.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(i,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(t+1)){for(var a=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(a,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var l=e.charAt(t);if(null==l||Number(l)!=l){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var c=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,c))throw new Error("invalid payload");r.data=c}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(mo){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case ar.CONNECT:return"object"===typeof t;case ar.DISCONNECT:return void 0===t;case ar.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case ar.EVENT:case ar.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case ar.ACK:case ar.BINARY_ACK:return Array.isArray(t)}}}]),n}(yn),cr=function(){function e(t){(0,p.Z)(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return(0,h.Z)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=ir(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function pr(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var hr=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),dr=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e,r,i){var o;return(0,p.Z)(this,n),(o=t.call(this)).connected=!1,o.recovered=!1,o.receiveBuffer=[],o.sendBuffer=[],o._queue=[],o._queueSeq=0,o.ids=0,o.acks={},o.flags={},o.io=e,o.nsp=r,i&&i.auth&&(o.auth=i.auth),o._opts=Object.assign({},i),o.io._autoConnect&&o.open(),o}return(0,h.Z)(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[pr(e,"open",this.onopen.bind(this)),pr(e,"packet",this.onpacket.bind(this)),pr(e,"error",this.onerror.bind(this)),pr(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(hr.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var i={type:ar.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var o=this.ids++,a=n.pop();this._registerAckCallback(o,a),i.id=o}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,u=this.flags.volatile&&(!s||!this.connected);return u||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n,r=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var o=this.io.setTimeoutFn((function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))}),i);this.acks[e]=function(){r.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,[null].concat(n))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((function(n,i){r.push((function(e,t){return o?e?i(e):n(t):n(e)})),t.emit.apply(t,[e].concat(r))}))}},{key:"_addToQueue",value:function(e){var t,n=this;"function"===typeof e[e.length-1]&&(t=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r===n._queue[0]){var i=null!==e;if(i)r.tryCount>n._opts.retries&&(n._queue.shift(),t&&t(e));else if(n._queue.shift(),t){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];t.apply(void 0,[null].concat(a))}return r.pending=!1,n._drainQueue()}})),this._queue.push(r),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:ar.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case ar.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ar.EVENT:case ar.BINARY_EVENT:this.onevent(e);break;case ar.ACK:case ar.BINARY_ACK:this.onack(e);break;case ar.DISCONNECT:this.ondisconnect();break;case ar.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=this._anyListeners.slice(),i=(0,a.Z)(r);try{for(i.s();!(t=i.n()).done;){t.value.apply(this,e)}}catch(go){i.e(go)}finally{i.f()}}(0,Qt.Z)((0,$t.Z)(n.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.packet({type:ar.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:ar.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=this._anyOutgoingListeners.slice(),r=(0,a.Z)(n);try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e.data)}}catch(go){r.e(go)}finally{r.f()}}}}]),n}(yn);function fr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}fr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},fr.prototype.reset=function(){this.attempts=0},fr.prototype.setMin=function(e){this.ms=e},fr.prototype.setMax=function(e){this.max=e},fr.prototype.setJitter=function(e){this.jitter=e};var vr=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e,i){var o,a;(0,p.Z)(this,n),(o=t.call(this)).nsps={},o.subs=[],e&&"object"===typeof e&&(i=e,e=void 0),(i=i||{}).path=i.path||"/socket.io",o.opts=i,kn((0,d.Z)(o),i),o.reconnection(!1!==i.reconnection),o.reconnectionAttempts(i.reconnectionAttempts||1/0),o.reconnectionDelay(i.reconnectionDelay||1e3),o.reconnectionDelayMax(i.reconnectionDelayMax||5e3),o.randomizationFactor(null!==(a=i.randomizationFactor)&&void 0!==a?a:.5),o.backoff=new fr({min:o.reconnectionDelay(),max:o.reconnectionDelayMax(),jitter:o.randomizationFactor()}),o.timeout(null==i.timeout?2e4:i.timeout),o._readyState="closed",o.uri=e;var s=i.parser||r;return o.encoder=new s.Encoder,o.decoder=new s.Decoder,o._autoConnect=!1!==i.autoConnect,o._autoConnect&&o.open(),o}return(0,h.Z)(n,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Gn(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=pr(n,"open",(function(){r.onopen(),e&&e()})),o=pr(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var a=this._timeout;0===a&&i();var s=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),a);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(pr(e,"ping",this.onping.bind(this)),pr(e,"data",this.ondata.bind(this)),pr(e,"error",this.onerror.bind(this)),pr(e,"close",this.onclose.bind(this)),pr(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(mo){this.onclose("parse error",mo)}}},{key:"ondecoded",value:function(e){var t=this;jn((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new dr(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),n}(yn),yr={};function mr(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=Yn(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,o=r.id,a=r.path,s=yr[o]&&a in yr[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new vr(i,t):(yr[o]||(yr[o]=new vr(i,t)),n=yr[o]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(mr,{Manager:vr,Socket:dr,io:mr,connect:mr});var gr=n(57096);function br(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var wr=0;function kr(e){return"__private_"+wr+++"_"+e}var _r="ASSEMBLY_EXECUTING",Pr="ASSEMBLY_COMPLETED",Zr=["ASSEMBLY_UPLOADING",_r,Pr];function Sr(e,t){return Zr.indexOf(e)>=Zr.indexOf(t)}var Cr=kr("rateLimitedQueue"),Fr=kr("fetchWithNetworkError"),xr=kr("previousFetchStatusStillPending"),Or=kr("onFinished"),Er=kr("connectSocket"),Tr=kr("onError"),Ar=kr("beginPolling"),Ur=kr("fetchStatus"),Rr=kr("diffStatus");function Dr(){this.emit("finished"),this.close()}function Nr(){var e=this,t=function(e){var t=/^\w+:\/\//.exec(e),n=0;t&&(n=t[0].length+1);var r=e.indexOf("/",n);return-1===r?{origin:e,pathname:"/"}:{origin:e.slice(0,r),pathname:e.slice(r)}}(this.status.websocket_url),n=mr(t.origin,{transports:["websocket"],path:t.pathname});n.on("connect",(function(){n.emit("assembly_connect",{id:e.status.assembly_id}),e.emit("connect")})),n.on("connect_error",(function(){n.disconnect(),e.socket=null})),n.on("assembly_finished",(function(){br(e,Or)[Or]()})),n.on("assembly_upload_finished",(function(t){e.emit("upload",t),e.status.uploads.push(t)})),n.on("assembly_uploading_finished",(function(){e.emit("executing")})),n.on("assembly_upload_meta_data_extracted",(function(){e.emit("metadata"),br(e,Ur)[Ur]({diff:!1})})),n.on("assembly_result_finished",(function(t,n){e.emit("result",t,n),e.status.results[t]||(e.status.results[t]=[]),e.status.results[t].push(n)})),n.on("assembly_error",(function(t){br(e,Ur)[Ur]({diff:!1}),br(e,Tr)[Tr](t)})),this.socket=n}function Ir(e){this.emit("error",Object.assign(new Error(e.msg),e)),this.close()}function Br(){var e=this;this.pollInterval=setInterval((function(){e.socket&&e.socket.connected||br(e,Ur)[Ur]()}),2e3)}function Lr(e){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r,i,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(void 0===t?{}:t).diff,r=void 0===n||n,!(this.closed||br(this,Cr)[Cr].isPaused||br(this,xr)[xr])){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,br(this,xr)[xr]=!0,e.next=7,br(this,Fr)[Fr](this.status.assembly_ssl_url);case 7:if(i=e.sent,br(this,xr)[xr]=!1,!this.closed){e.next=11;break}return e.abrupt("return");case 11:if(429!==i.status){e.next=14;break}return br(this,Cr)[Cr].rateLimit(2e3),e.abrupt("return");case 14:if(i.ok){e.next=17;break}return br(this,Tr)[Tr](new xt.Z(i.statusText)),e.abrupt("return");case 17:return e.next=19,i.json();case 19:if(o=e.sent,!this.closed){e.next=22;break}return e.abrupt("return");case 22:this.emit("status",o),r?this.updateStatus(o):this.status=o,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(3),br(this,Tr)[Tr](e.t0);case 29:case"end":return e.stop()}}),e,this,[[3,26]])})))).apply(this,arguments)}function jr(e,t){var n=this,r=e.ok,i=t.ok;if(t.error&&!e.error)return br(this,Tr)[Tr](t);var o=Sr(i,_r)&&!Sr(r,_r);o&&this.emit("executing"),Object.keys(t.uploads).filter((function(t){return!(0,y.Z)(e.uploads,t)})).forEach((function(e){n.emit("upload",t.uploads[e])})),o&&this.emit("metadata"),Object.keys(t.results).forEach((function(r){var i=t.results[r],o=e.results[r];i.filter((function(e){return!o||!o.some((function(t){return t.id===e.id}))})).forEach((function(e){n.emit("result",r,e)}))})),Sr(i,Pr)&&!Sr(r,Pr)&&this.emit("finished")}var zr=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i;return(0,p.Z)(this,n),i=t.call(this),Object.defineProperty((0,d.Z)(i),Rr,{value:jr}),Object.defineProperty((0,d.Z)(i),Ur,{value:Lr}),Object.defineProperty((0,d.Z)(i),Ar,{value:Br}),Object.defineProperty((0,d.Z)(i),Tr,{value:Ir}),Object.defineProperty((0,d.Z)(i),Er,{value:Nr}),Object.defineProperty((0,d.Z)(i),Or,{value:Dr}),Object.defineProperty((0,d.Z)(i),Cr,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),Fr,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),xr,{writable:!0,value:!1}),i.status=e,i.socket=null,i.pollInterval=null,i.closed=!1,br((0,d.Z)(i),Cr)[Cr]=r,br((0,d.Z)(i),Fr)[Fr]=r.wrapPromiseFunction(gr.Z),i}return(0,h.Z)(n,[{key:"connect",value:function(){br(this,Er)[Er](),br(this,Ar)[Ar]()}},{key:"update",value:function(){return br(this,Ur)[Ur]({diff:!0})}},{key:"updateStatus",value:function(e){br(this,Rr)[Rr](this.status,e),this.status=e}},{key:"close",value:function(){this.closed=!0,this.socket&&(this.socket.disconnect(),this.socket=null),clearInterval(this.pollInterval),this.pollInterval=null}}]),n}(Xt);function qr(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Hr=0;function Vr(e){return"__private_"+Hr+++"_"+e}var Wr="/assemblies",Kr=Vr("headers"),Yr=Vr("fetchWithNetworkError"),Gr=Vr("fetchJSON"),Xr=Vr("reportError"),Qr=function(){function e(t){var n=this;(0,p.Z)(this,e),void 0===t&&(t={}),Object.defineProperty(this,Gr,{value:$r}),Object.defineProperty(this,Kr,{writable:!0,value:{}}),Object.defineProperty(this,Yr,{writable:!0,value:void 0}),Object.defineProperty(this,Xr,{writable:!0,value:function(e,t){if(!1===n.opts.errorReporting)throw e;var r={type:t.type};throw t.assembly&&(r.assembly=t.assembly.assembly_id,r.instance=t.assembly.instance),t.url&&(r.endpoint=t.url),n.submitError(e,r).catch((function(){})),e}}),this.opts=t,null!=this.opts.client&&(qr(this,Kr)[Kr]["Transloadit-Client"]=this.opts.client),qr(this,Yr)[Yr]=this.opts.rateLimitedQueue.wrapPromiseFunction(gr.Z)}return(0,h.Z)(e,[{key:"createAssembly",value:function(e){var t=this,n=e.params,r=e.fields,i=e.signature,o=e.expectedFiles,a=new FormData;a.append("params","string"===typeof n?n:JSON.stringify(n)),i&&a.append("signature",i),Object.keys(r).forEach((function(e){a.append(e,r[e])})),a.append("num_expected_upload_files",o);var s=new URL(Wr,"".concat(this.opts.service)).href;return qr(this,Gr)[Gr](s,{method:"post",headers:qr(this,Kr)[Kr],body:a}).catch((function(e){return qr(t,Xr)[Xr](e,{url:s,type:"API_ERROR"})}))}},{key:"reserveFile",value:function(e,t){var n=this,r=encodeURIComponent(t.size),i="".concat(e.assembly_ssl_url,"/reserve_file?size=").concat(r);return qr(this,Gr)[Gr](i,{method:"post",headers:qr(this,Kr)[Kr]}).catch((function(r){return qr(n,Xr)[Xr](r,{assembly:e,file:t,url:i,type:"API_ERROR"})}))}},{key:"addFile",value:function(e,t){var n=this;if(!t.uploadURL)return Promise.reject(new Error("File does not have an `uploadURL`."));var r=encodeURIComponent(t.size),i=encodeURIComponent(t.uploadURL),o=encodeURIComponent(t.name),a="size=".concat(r,"&filename=").concat(o,"&fieldname=").concat("file","&s3Url=").concat(i),s="".concat(e.assembly_ssl_url,"/add_file?").concat(a);return qr(this,Gr)[Gr](s,{method:"post",headers:qr(this,Kr)[Kr]}).catch((function(r){return qr(n,Xr)[Xr](r,{assembly:e,file:t,url:s,type:"API_ERROR"})}))}},{key:"updateNumberOfFilesInAssembly",value:function(e,t){var n=this,r=new URL(e.assembly_ssl_url);r.pathname="/update_assemblies";var i=JSON.stringify({assembly_updates:[{assembly_id:e.assembly_id,num_expected_upload_files:t}]});return qr(this,Gr)[Gr](r,{method:"post",headers:qr(this,Kr)[Kr],body:i}).catch((function(e){return qr(n,Xr)[Xr](e,{url:r,type:"API_ERROR"})}))}},{key:"cancelAssembly",value:function(e){var t=this,n=e.assembly_ssl_url;return qr(this,Gr)[Gr](n,{method:"delete",headers:qr(this,Kr)[Kr]}).catch((function(e){return qr(t,Xr)[Xr](e,{url:n,type:"API_ERROR"})}))}},{key:"getAssemblyStatus",value:function(e){var t=this;return qr(this,Gr)[Gr](e,{headers:qr(this,Kr)[Kr]}).catch((function(n){return qr(t,Xr)[Xr](n,{url:e,type:"STATUS_ERROR"})}))}},{key:"submitError",value:function(e,t){var n=void 0===t?{}:t,r=n.endpoint,i=n.instance,o=n.assembly,a=e.details?"".concat(e.message," (").concat(e.details,")"):e.message;return qr(this,Gr)[Gr]("https://transloaditstatus.com/client_error",{method:"post",body:JSON.stringify({endpoint:r,instance:i,assembly_id:o,agent:"undefined"!==typeof navigator?navigator.userAgent:"",client:this.opts.client,error:a})})}}]),e}();function $r(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=qr(this,Yr))[Yr].apply(e,r).then((function(e){var n;if(429===e.status)return t.opts.rateLimitedQueue.rateLimit(2e3),(n=qr(t,Gr))[Gr].apply(n,r);if(!e.ok){var i=new Error(e.statusText);return i.statusCode=e.status,"".concat(r[0]).endsWith(Wr)?e.json().then((function(e){if(!e.error)throw i;var t=new Error(e.error);throw t.details=e.message,t.assembly=e,e.assembly_id&&(t.details+=" Assembly ID: ".concat(e.assembly_id)),t}),(function(e){throw e.cause=i,e})):Promise.reject(i)}return e.json()}))}function Jr(e){if(null==e)throw new Error("Transloadit: The `params` option is required.");if("string"===typeof e)try{e=JSON.parse(e)}catch(go){throw new m.Z("Transloadit: The `params` option is a malformed JSON string.",{cause:go})}if(!e.auth||!e.auth.key)throw new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/c/template-credentials")}function ei(e){var t,n=Object.create(null),r=(0,a.Z)(e.filter(Boolean));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.fileIDs,s=i.options,u=JSON.stringify(s);u in n?n[u].fileIDArrays.push(o):n[u]={options:s,fileIDArrays:[o]}}}catch(go){r.e(go)}finally{r.f()}return Object.values(n).map((function(e){return{options:e.options,fileIDs:e.fileIDArrays.flat(1)}}))}function ti(e,t){return ni.apply(this,arguments)}function ni(){return(ni=(0,c.Z)((0,l.Z)().mark((function e(t,n){var r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof n.assemblyOptions){e.next=6;break}return e.next=3,n.assemblyOptions(t,n);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=n.assemblyOptions;case 7:return Jr((r=e.t0).params),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ri(e,t){var n=t.fields;return null==n?{}:Array.isArray(n)?Object.fromEntries(n.map((function(t){return[t,e.meta[t]]}))):n}var ii=function(){function e(t,n){(0,p.Z)(this,e),this.files=t,this.opts=n}return(0,h.Z)(e,[{key:"build",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.opts,!(this.files.length>0)){e.next=3;break}return e.abrupt("return",Promise.all(this.files.map(function(){var e=(0,c.Z)((0,l.Z)().mark((function e(n){var r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,ti(n,t);case 4:if(r=e.sent,null!=n){e.next=7;break}return e.abrupt("return",void 0);case 7:return r.fields=ri(n,r),e.abrupt("return",{fileIDs:[n.id],options:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then(ei));case 3:if(!t.alwaysRunAssembly){e.next=8;break}return e.next=6,ti(null,t);case 6:return n=e.sent,e.abrupt("return",[{fileIDs:this.files.map((function(e){return e.id})),options:n}]);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),oi=ii;function ai(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var si=0;function ui(e){return"__private_"+si+++"_"+e}var li=ui("assemblyIDs"),ci=ui("reject"),pi=ui("remaining"),hi=ui("resolve"),di=ui("uppy"),fi=ui("watching"),vi=ui("onAssemblyComplete"),yi=ui("onAssemblyCancel"),mi=ui("onAssemblyError"),gi=ui("onImportError"),bi=ui("checkAllComplete"),wi=ui("removeListeners"),ki=ui("addListeners"),_i=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i;return(0,p.Z)(this,n),i=t.call(this),Object.defineProperty((0,d.Z)(i),ki,{value:Ci}),Object.defineProperty((0,d.Z)(i),wi,{value:Si}),Object.defineProperty((0,d.Z)(i),bi,{value:Zi}),Object.defineProperty((0,d.Z)(i),fi,{value:Pi}),Object.defineProperty((0,d.Z)(i),li,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),ci,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),pi,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),hi,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),di,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),vi,{writable:!0,value:function(e){ai((0,d.Z)(i),fi)[fi](e.assembly_id)&&(ai((0,d.Z)(i),di)[di].log("[Transloadit] AssemblyWatcher: Got Assembly finish ".concat(e.assembly_id)),i.emit("assembly-complete",e.assembly_id),ai((0,d.Z)(i),bi)[bi]())}}),Object.defineProperty((0,d.Z)(i),yi,{writable:!0,value:function(e){ai((0,d.Z)(i),fi)[fi](e.assembly_id)&&ai((0,d.Z)(i),bi)[bi]()}}),Object.defineProperty((0,d.Z)(i),mi,{writable:!0,value:function(e,t){ai((0,d.Z)(i),fi)[fi](e.assembly_id)&&(ai((0,d.Z)(i),di)[di].log("[Transloadit] AssemblyWatcher: Got Assembly error ".concat(e.assembly_id)),ai((0,d.Z)(i),di)[di].log(t),i.emit("assembly-error",e.assembly_id,t),ai((0,d.Z)(i),bi)[bi]())}}),Object.defineProperty((0,d.Z)(i),gi,{writable:!0,value:function(e,t,n){ai((0,d.Z)(i),fi)[fi](e.assembly_id)&&ai((0,d.Z)(i),mi)[mi](e,n)}}),ai((0,d.Z)(i),di)[di]=e,ai((0,d.Z)(i),li)[li]=r,ai((0,d.Z)(i),pi)[pi]=r.length,i.promise=new Promise((function(e,t){ai((0,d.Z)(i),hi)[hi]=e,ai((0,d.Z)(i),ci)[ci]=t})),ai((0,d.Z)(i),ki)[ki](),i}return(0,h.Z)(n)}(Xt);function Pi(e){return-1!==ai(this,li)[li].indexOf(e)}function Zi(){ai(this,pi)[pi]-=1,0===ai(this,pi)[pi]&&(ai(this,wi)[wi](),ai(this,hi)[hi]())}function Si(){ai(this,di)[di].off("transloadit:complete",ai(this,vi)[vi]),ai(this,di)[di].off("transloadit:assembly-cancel",ai(this,yi)[yi]),ai(this,di)[di].off("transloadit:assembly-error",ai(this,mi)[mi]),ai(this,di)[di].off("transloadit:import-error",ai(this,gi)[gi])}function Ci(){ai(this,di)[di].on("transloadit:complete",ai(this,vi)[vi]),ai(this,di)[di].on("transloadit:assembly-cancel",ai(this,yi)[yi]),ai(this,di)[di].on("transloadit:assembly-error",ai(this,mi)[mi]),ai(this,di)[di].on("transloadit:import-error",ai(this,gi)[gi])}var Fi=_i,xi={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create Assembly",encoding:"Encoding..."}};function Oi(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ei=0;function Ti(e){return"__private_"+Ei+++"_"+e}var Ai=function(e){return function(t){var n=new m.Z("Failed to send error to the client",{cause:t});console.error(n,e)}},Ui=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/companion/,Ri=Ti("rateLimitedQueue"),Di=Ti("getClientVersion"),Ni=Ti("attachAssemblyMetadata"),Ii=Ti("createAssembly"),Bi=Ti("createAssemblyWatcher"),Li=Ti("shouldWaitAfterUpload"),Mi=Ti("reserveFiles"),ji=Ti("onFileUploadURLAvailable"),zi=Ti("findFile"),qi=Ti("onFileUploadComplete"),Hi=Ti("onResult"),Vi=Ti("onAssemblyFinished"),Wi=Ti("cancelAssembly"),Ki=Ti("onCancelAll"),Yi=Ti("getPersistentData"),Gi=Ti("onRestored"),Xi=Ti("connectAssembly"),Qi=Ti("prepareUpload"),$i=Ti("afterUpload"),Ji=Ti("closeAssemblyIfExists"),eo=Ti("onError"),to=Ti("onTusError"),no=function(e){(0,f.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i,h,f,v;(0,p.Z)(this,n),i=t.call(this,e,r),h=(0,d.Z)(i),Object.defineProperty((0,d.Z)(i),Xi,{value:yo}),Object.defineProperty((0,d.Z)(i),Wi,{value:fo}),Object.defineProperty((0,d.Z)(i),Vi,{value:ho}),Object.defineProperty((0,d.Z)(i),Hi,{value:po}),Object.defineProperty((0,d.Z)(i),qi,{value:co}),Object.defineProperty((0,d.Z)(i),zi,{value:lo}),Object.defineProperty((0,d.Z)(i),Mi,{value:uo}),Object.defineProperty((0,d.Z)(i),Li,{value:so}),Object.defineProperty((0,d.Z)(i),Bi,{value:ao}),Object.defineProperty((0,d.Z)(i),Ii,{value:oo}),Object.defineProperty((0,d.Z)(i),Ni,{value:io}),Object.defineProperty((0,d.Z)(i),Di,{value:ro}),Object.defineProperty((0,d.Z)(i),Ri,{writable:!0,value:void 0}),Object.defineProperty((0,d.Z)(i),ji,{writable:!0,value:function(e){var t,n=i.uppy.getFile(e.id);if(null!=n&&null!=(t=n.transloadit)&&t.assembly){var r=i.getPluginState().assemblies[n.transloadit.assembly];i.client.addFile(r,n).catch((function(e){i.uppy.log(e),i.uppy.emit("transloadit:import-error",r,n.id,e)}))}}}),Object.defineProperty((0,d.Z)(i),Ki,{writable:!0,value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r,i,o,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(void 0===t?{}:t).reason,e.prev=1,"user"===n){e.next=4;break}return e.abrupt("return");case 4:return r=h.getPluginState(),i=r.uploadsAssemblies,o=Object.values(i).flat(1),a=o.map((function(e){return h.getAssembly(e)})),e.next=9,Promise.all(a.map((function(e){return Oi(h,Wi)[Wi](e)})));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),h.uppy.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}),Object.defineProperty((0,d.Z)(i),Yi,{writable:!0,value:function(e){var t=i.getPluginState(),n=t.assemblies,r=t.uploadsAssemblies;e((0,u.Z)({},i.id,{assemblies:n,uploadsAssemblies:r}))}}),Object.defineProperty((0,d.Z)(i),Gi,{writable:!0,value:function(e){var t=e&&e[i.id]?e[i.id]:{},n=t.assemblies||{},r=t.uploadsAssemblies||{};if(0!==Object.keys(r).length){i.restored=Promise.resolve().then((function(){return function(e){for(var t={},n=[],o=function(){var e=(0,s.Z)(l[u],2),r=e[0],o=e[1];o.uploads.forEach((function(e){var n=Oi((0,d.Z)(i),zi)[zi](e);t[e.id]={id:n.id,assembly:r,uploadedFile:e}}));var c=i.getPluginState();Object.keys(o.results).forEach((function(e){var t,i=(0,a.Z)(o.results[e]);try{for(i.s();!(t=i.n()).done;){var s=t.value,u=c.files[s.original_id];s.localId=u?u.id:null,n.push({id:s.id,result:s,stepName:e,assembly:r})}}catch(go){i.e(go)}finally{i.f()}}))},u=0,l=Object.entries(e);u<l.length;u++)o();i.setPluginState({assemblies:e,files:t,results:n,uploadsAssemblies:r})}(n),function(){var e=i.getPluginState(),t=e.assemblies,n=e.uploadsAssemblies;Object.keys(n).forEach((function(e){var t=n[e];Oi((0,d.Z)(i),Bi)[Bi](t,e)})),Object.keys(t).forEach((function(e){var n=new zr(t[e],Oi((0,d.Z)(i),Ri)[Ri]);Oi((0,d.Z)(i),Xi)[Xi](n)}))}(),function(){var e=i.getPluginState().assemblies;return Promise.all(Object.keys(e).map((function(e){return i.activeAssemblies[e].update()})))}()})),i.restored.then((function(){i.restored=null}))}}}),Object.defineProperty((0,d.Z)(i),Qi,{writable:!0,value:function(e,t){var n=e.map((function(e){return i.uppy.getFile(e)})),r=n.filter((function(e){return!e.error&&(i.uppy.emit("preprocess-progress",e,{mode:"indeterminate",message:i.i18n("creatingAssembly")}),!0)})),a=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(n){var r,o,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fileIDs,o=n.options,e.prev=1,e.next=4,Oi((0,d.Z)(i),Ii)[Ii](r,t,o);case 4:if(a=e.sent,!i.opts.importFromUploadURLs){e.next=8;break}return e.next=8,Oi((0,d.Z)(i),Mi)[Mi](a,r);case 8:return r.forEach((function(e){var t=i.uppy.getFile(e);i.uppy.emit("preprocess-complete",t)})),e.abrupt("return",a);case 12:throw e.prev=12,e.t0=e.catch(1),r.forEach((function(t){var n=i.uppy.getFile(t);i.uppy.emit("preprocess-complete",n),i.uppy.emit("upload-error",n,e.t0)})),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),s=i.getPluginState().uploadsAssemblies;return i.setPluginState({uploadsAssemblies:(0,o.Z)((0,o.Z)({},s),{},(0,u.Z)({},t,[]))}),new oi(r,i.opts).build().then((function(e){return Promise.all(e.map(a))})).then((function(e){var n=e.filter(Boolean),r=n.map((function(e){return e.status.assembly_id}));return Oi((0,d.Z)(i),Bi)[Bi](r,t),Promise.all(n.map((function(e){return Oi((0,d.Z)(i),Xi)[Xi](e)})))})).catch((function(e){throw r.forEach((function(t){i.uppy.emit("preprocess-complete",t),i.uppy.emit("upload-error",t,e)})),e}))}}),Object.defineProperty((0,d.Z)(i),$i,{writable:!0,value:function(e,t){var n=e.map((function(e){return i.uppy.getFile(e)})),r=n.filter((function(e){return!e.error})).map((function(e){return e.id})),a=i.getPluginState();if(i.restored)return i.restored.then((function(){return Oi((0,d.Z)(i),$i)[$i](r,t)}));var s=a.uploadsAssemblies[t],u=function(){s.forEach((function(e){i.activeAssemblies[e].close(),delete i.activeAssemblies[e]}))};if(!Oi((0,d.Z)(i),Li)[Li]()){u();var l=s.map((function(e){return i.getAssembly(e)}));return i.uppy.addResultData(t,{transloadit:l}),Promise.resolve()}return 0===s.length?(i.uppy.addResultData(t,{transloadit:[]}),Promise.resolve()):(n.filter((function(e){return!(0,y.Z)(i.completedFiles,e.id)})).forEach((function(e){i.uppy.emit("postprocess-progress",e,{mode:"indeterminate",message:i.i18n("encoding")})})),i.assemblyWatchers[t].promise.then((function(){u();var e=s.map((function(e){return i.getAssembly(e)})),n=(0,o.Z)({},i.getPluginState().uploadsAssemblies);delete n[t],i.setPluginState({uploadsAssemblies:n}),i.uppy.addResultData(t,{transloadit:e})})))}}),Object.defineProperty((0,d.Z)(i),Ji,{writable:!0,value:function(e){var t;null==(t=i.activeAssemblies[e])||t.close()}}),Object.defineProperty((0,d.Z)(i),eo,{writable:!0,value:function(e,t){void 0===e&&(e=null);var n=h.getPluginState().uploadsAssemblies[t];null==n||n.forEach(Oi(h,Ji)[Ji]),h.client.submitError(e).catch(Ai(e))}}),Object.defineProperty((0,d.Z)(i),to,{writable:!0,value:function(e,t){var n,r;if(Oi((0,d.Z)(i),Ji)[Ji](null==e||null==(n=e.transloadit)?void 0:n.assembly),null!=t&&null!=(r=t.message)&&r.startsWith("tus: ")){var o,a,s=null==(o=t.originalRequest)||null==(a=o.getUnderlyingObject())?void 0:a.responseURL;i.client.submitError(t,{endpoint:s,type:"TUS_ERROR"}).catch(Ai(t))}}}),i.type="uploader",i.id=i.opts.id||"Transloadit",i.title="Transloadit",i.defaultLocale=xi;return i.opts=(0,o.Z)((0,o.Z)({},{service:"https://api2.transloadit.com",errorReporting:!0,waitForEncoding:!1,waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:null,getAssemblyOptions:null,limit:20,retryDelays:[7e3,1e4,15e3,2e4]}),r),null!=(f=i.opts).assemblyOptions||(f.assemblyOptions=null!=(v=i.opts.getAssemblyOptions)?v:{params:i.opts.params,signature:i.opts.signature,fields:i.opts.fields}),null!=(null==r?void 0:r.params)&&null==r.getAssemblyOptions&&null==r.assemblyOptions&&Jr(i.opts.assemblyOptions.params),Oi((0,d.Z)(i),Ri)[Ri]=new I(i.opts.limit),i.i18nInit(),i.client=new Qr({service:i.opts.service,client:Oi((0,d.Z)(i),Di)[Di](),errorReporting:i.opts.errorReporting,rateLimitedQueue:Oi((0,d.Z)(i),Ri)[Ri]}),i.activeAssemblies={},i.assemblyWatchers={},i.completedFiles=Object.create(null),i}return(0,h.Z)(n,[{key:"install",value:function(){this.uppy.addPreProcessor(Oi(this,Qi)[Qi]),this.uppy.addPostProcessor(Oi(this,$i)[$i]),this.uppy.on("error",Oi(this,eo)[eo]),this.uppy.on("cancel-all",Oi(this,Ki)[Ki]),this.uppy.on("upload-error",Oi(this,to)[to]),this.opts.importFromUploadURLs?this.uppy.on("upload-success",Oi(this,ji)[ji]):this.uppy.use(Ht,{storeFingerprintForResuming:!1,useFastRemoteRetry:!1,allowedMetaFields:["assembly_url","filename","fieldname"],limit:this.opts.limit,rateLimitedQueue:Oi(this,Ri)[Ri],retryDelays:this.opts.retryDelays}),this.uppy.on("restore:get-data",Oi(this,Yi)[Yi]),this.uppy.on("restored",Oi(this,Gi)[Gi]),this.setPluginState({assemblies:{},uploadsAssemblies:{},files:{},results:[]});var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:(0,o.Z)((0,o.Z)({},e),{},{individualCancellation:!1})})}},{key:"uninstall",value:function(){this.uppy.removePreProcessor(Oi(this,Qi)[Qi]),this.uppy.removePostProcessor(Oi(this,$i)[$i]),this.uppy.off("error",Oi(this,eo)[eo]),this.opts.importFromUploadURLs&&this.uppy.off("upload-success",Oi(this,ji)[ji]);var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:(0,o.Z)((0,o.Z)({},e),{},{individualCancellation:!0})})}},{key:"getAssembly",value:function(e){return this.getPluginState().assemblies[e]}},{key:"getAssemblyFiles",value:function(e){return this.uppy.getFiles().filter((function(t){var n;return(null==t||null==(n=t.transloadit)?void 0:n.assembly)===e}))}}]),n}(q.Z);function ro(){var e=this,t=["uppy-core:".concat(this.uppy.constructor.VERSION),"uppy-transloadit:".concat(this.constructor.VERSION),"uppy-tus:".concat(Ht.VERSION)],n=function(n,r){var i=e.uppy.getPlugin(n);i&&t.push("".concat(r,":").concat(i.constructor.VERSION))};return this.opts.importFromUploadURLs&&(n("XHRUpload","uppy-xhr-upload"),n("AwsS3","uppy-aws-s3"),n("AwsS3Multipart","uppy-aws-s3-multipart")),n("Dropbox","uppy-dropbox"),n("Box","uppy-box"),n("Facebook","uppy-facebook"),n("GoogleDrive","uppy-google-drive"),n("Instagram","uppy-instagram"),n("OneDrive","uppy-onedrive"),n("Zoom","uppy-zoom"),n("Url","uppy-url"),t.join(",")}function io(e,t){var n=(0,o.Z)((0,o.Z)({},e.meta),{},{assembly_url:t.assembly_url,filename:e.name,fieldname:"file"}),r=(0,o.Z)((0,o.Z)({},e.tus),{},{endpoint:t.tus_url,addRequestId:!0}),i=e.remote;if(e.remote&&Ui.test(e.remote.companionUrl)){var a=t.companion_url.replace(/\/$/,""),s=e.remote.url.replace(e.remote.companionUrl,"").replace(/^\//,"");i=(0,o.Z)((0,o.Z)({},e.remote),{},{companionUrl:a,url:"".concat(a,"/").concat(s)})}var u=(0,o.Z)((0,o.Z)({},e),{},{transloadit:{assembly:t.assembly_id}});return this.opts.importFromUploadURLs||Object.assign(u,{meta:n,tus:r,remote:i}),u}function oo(e,t,n){var r=this;return this.uppy.log("[Transloadit] Create Assembly"),this.client.createAssembly({params:n.params,fields:n.fields,expectedFiles:e.length,signature:n.signature}).then(function(){var n=(0,c.Z)((0,l.Z)().mark((function n(a){var s,c,p,h,d,f,v,y,m;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=r.uppy.getFiles().filter((function(t){var n=t.id;return e.includes(n)})),s.length===e.length){n.next=8;break}if(0!==s.length){n.next=6;break}return n.next=5,r.client.cancelAssembly(a);case 5:return n.abrupt("return",null);case 6:return n.next=8,r.client.updateNumberOfFilesInAssembly(a,s.length);case 8:return c=new zr(a,Oi(r,Ri)[Ri]),p=c.status,h=p.assembly_id,d=r.getPluginState(),f=d.assemblies,v=d.uploadsAssemblies,r.setPluginState({assemblies:(0,o.Z)((0,o.Z)({},f),{},(0,u.Z)({},h,p)),uploadsAssemblies:(0,o.Z)((0,o.Z)({},v),{},(0,u.Z)({},t,[].concat((0,i.Z)(v[t]),[h])))}),y={},s.forEach((function(e){y[e.id]=Oi(r,Ni)[Ni](e,p)})),r.uppy.setState({files:(0,o.Z)((0,o.Z)({},r.uppy.getState().files),y)}),m=function e(t,n){if("cancel-all"===n)c.close(),r.uppy.off(e);else if(t.id in y){delete y[t.id];var i=Object.keys(y).length;0===i?(c.close(),Oi(r,Wi)[Wi](a).catch((function(){})),r.uppy.off(e)):r.client.updateNumberOfFilesInAssembly(a,i).catch((function(){}))}},r.uppy.on("file-removed",m),r.uppy.emit("transloadit:assembly-created",p,e),r.uppy.log("[Transloadit] Created Assembly ".concat(h)),n.abrupt("return",c);case 21:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){var t=new m.Z("".concat(r.i18n("creatingAssemblyFailed"),": ").concat(e.message),{cause:e});throw"details"in e&&(t.details=e.details),"assembly"in e&&(t.assembly=e.assembly),t}))}function ao(e,t){var n=this,r=new Fi(this.uppy,e);r.on("assembly-complete",(function(e){n.getAssemblyFiles(e).forEach((function(e){n.completedFiles[e.id]=!0,n.uppy.emit("postprocess-complete",e)}))})),r.on("assembly-error",(function(e,t){n.getAssemblyFiles(e).forEach((function(e){n.uppy.emit("upload-error",e,t),n.uppy.emit("postprocess-complete",e)})),n.uppy.emit("error",t)})),this.assemblyWatchers[t]=r}function so(){return this.opts.waitForEncoding||this.opts.waitForMetadata}function uo(e,t){var n=this;return Promise.all(t.map((function(t){var r=n.uppy.getFile(t);return n.client.reserveFile(e.status,r)})))}function lo(e){for(var t=this.uppy.getFiles(),n=0;n<t.length;n++){var r=t[n];if(r.uploadURL===e.tus_upload_url)return r;if(r.tus&&r.tus.uploadUrl===e.tus_upload_url)return r;if(!e.is_tus_file&&r.name===e.name&&r.size===e.size)return r}}function co(e,t){var n=this.getPluginState(),r=Oi(this,zi)[zi](t);r?(this.setPluginState({files:(0,o.Z)((0,o.Z)({},n.files),{},(0,u.Z)({},t.id,{assembly:e,id:r.id,uploadedFile:t}))}),this.uppy.emit("transloadit:upload",t,this.getAssembly(e))):this.uppy.log("[Transloadit] Couldn\u2019t file the file, it was likely removed in the process")}function po(e,t,n){var r=this.getPluginState(),o=r.files[n.original_id];n.localId=o?o.id:null;var a={result:n,stepName:t,id:n.id,assembly:e};this.setPluginState({results:[].concat((0,i.Z)(r.results),[a])}),this.uppy.emit("transloadit:result",t,n,this.getAssembly(e))}function ho(e){var t=this,n=e.assembly_ssl_url;this.client.getAssemblyStatus(n).then((function(e){var n=e.assembly_id,r=t.getPluginState();t.setPluginState({assemblies:(0,o.Z)((0,o.Z)({},r.assemblies),{},(0,u.Z)({},n,e))}),t.uppy.emit("transloadit:complete",e)}))}function fo(e){return vo.apply(this,arguments)}function vo(){return(vo=(0,c.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.cancelAssembly(t);case 2:this.uppy.emit("transloadit:assembly-cancelled",t);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function yo(e){var t=this,n=e.status.assembly_id;return this.activeAssemblies[n]=e,e.on("status",(function(e){var r=t.getPluginState().assemblies;t.setPluginState({assemblies:(0,o.Z)((0,o.Z)({},r),{},(0,u.Z)({},n,e))})})),e.on("upload",(function(e){Oi(t,qi)[qi](n,e)})),e.on("error",(function(n){n.assembly=e.status,t.uppy.emit("transloadit:assembly-error",e.status,n)})),e.on("executing",(function(){t.uppy.emit("transloadit:assembly-executing",e.status)})),this.opts.waitForEncoding&&e.on("result",(function(e,r){Oi(t,Hi)[Hi](n,e,r)})),this.opts.waitForEncoding?e.on("finished",(function(){Oi(t,Vi)[Vi](e.status)})):this.opts.waitForMetadata&&e.on("metadata",(function(){Oi(t,Vi)[Vi](e.status)})),"ASSEMBLY_COMPLETE"===e.ok||e.connect(),e}no.VERSION="3.1.3",no.COMPANION="https://api2.transloadit.com/companion",no.COMPANION_PATTERN=/\.transloadit\.com$/},71209:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(74165),i=n(15861),o=n(1413),a=n(15671),s=n(43144),u=n(97326),l=n(60136),c=n(29388),p=n(73856),h=n(3737),d=n(51280),f=n(28800),v="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";function y(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var m=0;function g(e){return"__private_"+m+++"_"+e}var b=g("handleSubmit"),w=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).form=document.createElement("form"),Object.defineProperty((0,u.Z)(r),b,{writable:!0,value:function(e){e.preventDefault(),(0,r.props.addFile)(r.input.value.trim())}}),r.form.id=function(){for(var e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;t--;)e+=v[64*Math.random()|0];return e}(),r}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.input.value="",this.form.addEventListener("submit",y(this,b)[b]),document.body.appendChild(this.form)}},{key:"componentWillUnmount",value:function(){this.form.removeEventListener("submit",y(this,b)[b]),document.body.removeChild(this.form)}},{key:"render",value:function(){var e=this,t=this.props.i18n;return(0,p.h)("div",{className:"uppy-Url"},(0,p.h)("input",{className:"uppy-u-reset uppy-c-textInput uppy-Url-input",type:"text","aria-label":t("enterUrlToImport"),placeholder:t("enterUrlToImport"),ref:function(t){e.input=t},"data-uppy-super-focusable":!0,form:this.form.id}),(0,p.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton",type:"submit",form:this.form.id},t("import")))}}]),n}(p.wA),k=w;function _(e,t,n){var r,i=(0,f.Z)(e.items);switch(t){case"paste":if(i.some((function(e){return"file"===e.kind})))return;r=i.filter((function(e){return"string"===e.kind&&"text/plain"===e.type}));break;case"drop":r=i.filter((function(e){return"string"===e.kind&&"text/uri-list"===e.type}));break;default:throw new Error("isDropOrPaste must be either 'drop' or 'paste', but it's ".concat(t))}r.forEach((function(e){e.getAsString((function(e){return n(e)}))}))}var P={strings:{import:"Import",enterUrlToImport:"Enter URL to import a file",failedToFetch:"Companion failed to fetch this URL, please make sure it\u2019s correct",enterCorrectUrl:"Incorrect URL: Please make sure you are entering a direct link to a file"}};function Z(){return(0,p.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,p.h)("path",{d:"M23.637 15.312l-2.474 2.464a3.582 3.582 0 01-.577.491c-.907.657-1.897.986-2.968.986a4.925 4.925 0 01-3.959-1.971c-.248-.329-.164-.902.165-1.149.33-.247.907-.164 1.155.164 1.072 1.478 3.133 1.724 4.618.656a.642.642 0 00.33-.328l2.473-2.463c1.238-1.313 1.238-3.366-.082-4.597a3.348 3.348 0 00-4.618 0l-1.402 1.395a.799.799 0 01-1.154 0 .79.79 0 010-1.15l1.402-1.394a4.843 4.843 0 016.843 0c2.062 1.805 2.144 5.007.248 6.896zm-8.081 5.664l-1.402 1.395a3.348 3.348 0 01-4.618 0c-1.319-1.23-1.319-3.365-.082-4.596l2.475-2.464.328-.328c.743-.492 1.567-.739 2.475-.657.906.165 1.648.574 2.143 1.314.248.329.825.411 1.155.165.33-.248.412-.822.165-1.15-.825-1.068-1.98-1.724-3.216-1.888-1.238-.247-2.556.082-3.628.902l-.495.493-2.474 2.464c-1.897 1.969-1.814 5.09.083 6.977.99.904 2.226 1.396 3.463 1.396s2.473-.492 3.463-1.395l1.402-1.396a.79.79 0 000-1.15c-.33-.328-.908-.41-1.237-.082z",fill:"#FF753E","fill-rule":"nonzero"}))}function S(e){return/^[a-z0-9]+:\/\//.test(e)?e:"http://"+e}function C(e){if(!e)return!1;var t=e.match(/^([a-z0-9]+):\/\//)[1];return"http"===t||"https"===t}function F(e){var t=new URL(e).pathname;return t.substring(t.lastIndexOf("/")+1)}var x=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e,r){var i;(0,a.Z)(this,n),(i=t.call(this,e,r)).id=i.opts.id||"Url",i.title=i.opts.title||"Link",i.type="acquirer",i.icon=function(){return(0,p.h)(Z,null)},i.defaultLocale=P;if(i.opts=(0,o.Z)((0,o.Z)({},{}),r),i.i18nInit(),i.hostname=i.opts.companionUrl,!i.hostname)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");return i.getMeta=i.getMeta.bind((0,u.Z)(i)),i.addFile=i.addFile.bind((0,u.Z)(i)),i.handleRootDrop=i.handleRootDrop.bind((0,u.Z)(i)),i.handleRootPaste=i.handleRootPaste.bind((0,u.Z)(i)),i.client=new d.C$(e,{companionUrl:i.opts.companionUrl,companionHeaders:i.opts.companionHeaders,companionCookiesRule:i.opts.companionCookiesRule}),i}return(0,s.Z)(n,[{key:"getMeta",value:function(e){var t=this;return this.client.post("url/meta",{url:e}).then((function(e){if(e.error)throw t.uppy.log("[URL] Error:"),t.uppy.log(e.error),new Error("Failed to fetch the file");return e}))}},{key:"addFile",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=void 0),C(i=S(t))){e.next=6;break}return this.uppy.log("[URL] Incorrect URL entered: ".concat(i)),this.uppy.info(this.i18n("enterCorrectUrl"),"error",4e3),e.abrupt("return",void 0);case 6:return e.prev=6,e.next=9,this.getMeta(i);case 9:return o=e.sent,a={meta:n,source:this.id,name:F(i),type:o.type,data:{size:o.size},isRemote:!0,body:{url:i},remote:{companionUrl:this.opts.companionUrl,url:"".concat(this.hostname,"/url/get"),body:{fileId:i,url:i},providerOptions:this.client.opts}},this.uppy.log("[Url] Adding remote file"),e.prev=12,e.abrupt("return",this.uppy.addFile(a));case 16:return e.prev=16,e.t0=e.catch(12),e.t0.isRestriction||this.uppy.log(e.t0),e.abrupt("return",e.t0);case 20:e.next=27;break;case 22:return e.prev=22,e.t1=e.catch(6),this.uppy.log(e.t1),this.uppy.info({message:this.i18n("failedToFetch"),details:e.t1},"error",4e3),e.abrupt("return",e.t1);case 27:case"end":return e.stop()}}),e,this,[[6,22],[12,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleRootDrop",value:function(e){var t=this;_(e.dataTransfer,"drop",(function(e){t.uppy.log("[URL] Adding file from dropped url: ".concat(e)),t.addFile(e)}))}},{key:"handleRootPaste",value:function(e){var t=this;_(e.clipboardData,"paste",(function(e){t.uppy.log("[URL] Adding file from pasted url: ".concat(e)),t.addFile(e)}))}},{key:"render",value:function(){return(0,p.h)(k,{i18n:this.i18n,addFile:this.addFile})}},{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}]),n}(h.di);x.VERSION="3.3.1",x.prototype.canHandleRootDrop=function(e){return(0,f.Z)(e.dataTransfer.items).filter((function(e){return"string"===e.kind&&"text/uri-list"===e.type})).length>0}},69549:function(e,t,n){"use strict";var r=n(43144),i=n(15671),o=n(60136),a=n(29388),s=n(98737),u=n(26516),l=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){var o;return(0,i.Z)(this,n),void 0===r&&(r={}),(o=t.call(this,e)).cause=r.cause,o.cause&&(0,u.Z)(o.cause,"isNetworkError")&&(o.isNetworkError=o.cause.isNetworkError),o}return(0,r.Z)(n)}((0,s.Z)(Error));t.Z=l},24911:function(e,t,n){"use strict";var r=n(43144),i=n(15671),o=n(60136),a=n(29388),s=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){var o;return(0,i.Z)(this,n),void 0===r&&(r=null),(o=t.call(this,"This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.")).cause=e,o.isNetworkError=!0,o.request=r,o}return(0,r.Z)(n)}((0,n(98737).Z)(Error));t.Z=s},25429:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(1413),i=n(15671),o=n(43144),a=n(26516);function s(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var u=0;function l(e){return"__private_"+u+++"_"+e}function c(e,t,n){var r=[];return e.forEach((function(e){return"string"!==typeof e?r.push(e):t[Symbol.split](e).forEach((function(e,t,i){""!==e&&r.push(e),t<i.length-1&&r.push(n)}))})),r}function p(e,t){var n=/\$/g,r=[e];if(null==t)return r;for(var i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];if("_"!==a){var s=t[a];"string"===typeof s&&(s=n[Symbol.replace](s,"$$$$")),r=c(r,new RegExp("%\\{".concat(a,"\\}"),"g"),s)}}return r}var h=l("apply"),d=function(){function e(t){(0,i.Z)(this,e),Object.defineProperty(this,h,{value:f}),this.locale={strings:{},pluralize:function(e){return 1===e?0:1}},Array.isArray(t)?t.forEach(s(this,h)[h],this):s(this,h)[h](t)}return(0,o.Z)(e,[{key:"translate",value:function(e,t){return this.translateArray(e,t).join("")}},{key:"translateArray",value:function(e,t){if(!(0,a.Z)(this.locale.strings,e))throw new Error("missing string: ".concat(e));var n=this.locale.strings[e];if("object"===typeof n){if(t&&"undefined"!==typeof t.smart_count)return p(n[this.locale.pluralize(t.smart_count)],t);throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return p(n,t)}}]),e}();function f(e){if(null!=e&&e.strings){var t=this.locale;this.locale=(0,r.Z)((0,r.Z)({},t),{},{strings:(0,r.Z)((0,r.Z)({},t.strings),e.strings)}),this.locale.pluralize=e.pluralize||t.pluralize}}},57096:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(24911);function i(){return fetch.apply(void 0,arguments).catch((function(e){throw"AbortError"===e.name?e:new r.Z(e)}))}},13829:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});var r=n(1413),i=n(37162);function o(e){var t="";return e.replace(/[^A-Z0-9]/gi,(function(e){return t+="-".concat(function(e){return e.charCodeAt(0).toString(32)}(e)),"/"}))+t}function a(e){if(function(e){return!(!e.isRemote||!e.remote)&&new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider)}(e))return e.id;var t=(0,i.Z)(e);return function(e){var t="uppy";return"string"===typeof e.name&&(t+="-".concat(o(e.name.toLowerCase()))),void 0!==e.type&&(t+="-".concat(e.type)),e.meta&&"string"===typeof e.meta.relativePath&&(t+="-".concat(o(e.meta.relativePath.toLowerCase()))),void 0!==e.data.size&&(t+="-".concat(e.data.size)),void 0!==e.data.lastModified&&(t+="-".concat(e.data.lastModified)),t}((0,r.Z)((0,r.Z)({},e),{},{type:t}))}},61904:function(e,t,n){"use strict";function r(e){var t=e.lastIndexOf(".");return-1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}n.d(t,{Z:function(){return r}})},37162:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(61904),i=n(95426);function o(e){var t;if(e.type)return e.type;var n=e.name?null==(t=(0,r.Z)(e.name).extension)?void 0:t.toLowerCase():null;return n&&n in i.Z?i.Z[n]:"application/octet-stream"}},72602:function(e,t){"use strict";t.Z=function(e){for(var t;e&&!e.dir;)e=e.parentNode;return null==(t=e)?void 0:t.dir}},26516:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.d(t,{Z:function(){return r}})},89377:function(e,t,n){"use strict";function r(e){return(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE}n.d(t,{Z:function(){return r}})},88170:function(e,t,n){"use strict";function r(e){return!!e&&/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(e)}n.d(t,{Z:function(){return r}})},95426:function(e,t){"use strict";t.Z={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"}},28800:function(e,t){"use strict";t.Z=Array.from}}]);